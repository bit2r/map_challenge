[
  {
    "objectID": "approval_rate.html",
    "href": "approval_rate.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ìœ¤ì„ì—´ ëŒ€í†µë ¹\në¬¸ì¬ì¸ ëŒ€í†µë ¹\në°•ê·¼í˜œ ëŒ€í†µë ¹\nì´ëª…ë°• ëŒ€í†µë ¹\në…¸ë¬´í˜„ ëŒ€í†µë ¹\n\n\n\n\nì½”ë“œlibrary(tidyverse)\nlibrary(rvest)\nextrafont::loadfonts()\n\nyoon_url &lt;- 'https://namu.wiki/w/%EC%9C%A4%EC%84%9D%EC%97%B4/%EC%A7%80%EC%A7%80%EC%9C%A8'\n\nyoon_html &lt;- read_html(yoon_url)\n\nyoon_list &lt;- yoon_html |&gt; \n  html_nodes('table') |&gt; \n  html_table(header = TRUE)\n\nyoon_raw &lt;- yoon_list |&gt; \n  enframe() |&gt; \n  mutate(nrow = map_int(value, nrow)) |&gt; \n  filter(nrow &gt; 54) |&gt; \n  mutate(ì¡°ì‚¬íšŒì‚¬ = c(\"í•œêµ­ê°¤ëŸ½\", \"ë¦¬ì–¼ë¯¸í„°\", \"ì „êµ­ì§€í‘œì¡°ì‚¬\")) \n\nclean_tbl &lt;- function(dataframe) {\n  three_tbl &lt;- dataframe |&gt; \n    janitor::clean_names(ascii = FALSE) |&gt; \n    select(1:3) |&gt; \n    set_names(c(\"ì¡°ì‚¬ê¸°ê°„\", \"ê¸ì •\", \"ë¶€ì •\")) |&gt; \n    filter(str_detect(ì¡°ì‚¬ê¸°ê°„, \"^\\\\d{4}ë…„\"))\n}\n\nyoon_tbl &lt;- yoon_raw |&gt; \n  mutate(data = map(value, clean_tbl)) |&gt; \n  select(ì¡°ì‚¬íšŒì‚¬, data) |&gt; \n  unnest(data) |&gt; \n  mutate(ê¸ì • = parse_number(ê¸ì •),\n         ë¶€ì • = parse_number(ë¶€ì •)) |&gt; \n  fill(ê¸ì •, .direction = \"down\") |&gt; \n  fill(ë¶€ì •, .direction = \"down\") |&gt; \n  pivot_longer(ê¸ì •:ë¶€ì •, names_to = \"ê¸ë¶€ì •\", values_to = \"ì§€ì§€ìœ¨\") \n\nconvert_korean_date &lt;- function(korean_date) {\n  # Split the input into components\n  components &lt;- strsplit(korean_date, \" \")[[1]]\n  \n  # Extract year, month, and week\n  year &lt;- as.numeric(gsub(\"ë…„\", \"\", components[1]))\n  month &lt;- as.numeric(gsub(\"ì›”\", \"\", components[2]))\n  week &lt;- as.numeric(gsub(\"ì£¼\", \"\", components[3]))\n  \n  # Construct the date - the first day of the month and year, then add weeks\n  date &lt;- make_date(year, month, 1) + weeks(week - 1)\n  \n  return(date)\n}\n  \nyoon_gg_tbl &lt;- yoon_tbl |&gt; \n  mutate(ì¡°ì‚¬ê¸°ê°„ = map(ì¡°ì‚¬ê¸°ê°„, convert_korean_date)) |&gt; \n  unnest(ì¡°ì‚¬ê¸°ê°„) |&gt; \n  mutate(ì¡°ì‚¬íšŒì‚¬ = factor(ì¡°ì‚¬íšŒì‚¬, levels = c(\"í•œêµ­ê°¤ëŸ½\", \"ë¦¬ì–¼ë¯¸í„°\", \"ì „êµ­ì§€í‘œì¡°ì‚¬\"))) |&gt; \n  filter(ì¡°ì‚¬íšŒì‚¬ == \"í•œêµ­ê°¤ëŸ½\",\n         ì¡°ì‚¬ê¸°ê°„ &gt;= as.Date(\"2022-05-07\"))\n\nelection_interval &lt;- -interval(ymd(\"2024-04-10\"), ymd('2023-08-05'))\n\nelection_period   &lt;- as.period(election_interval, unit = \"month\") \n\nremaining_ymd &lt;- glue::glue(\"ë‚¨ì€ ê¸°ê°„:\\n {month(election_period)}ì›” {day(election_period)}ì¼\")\n\nyoon_approval_gg &lt;- yoon_gg_tbl  |&gt; \n  ggplot(aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •)) +\n    geom_point(data = yoon_gg_tbl |&gt; filter(ì¡°ì‚¬ê¸°ê°„ == max(ì¡°ì‚¬ê¸°ê°„)), \n               aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •), size = 1.5) +\n    geom_hline(yintercept = 50, linetype = 2, color = \"gray50\") +\n    geom_vline(xintercept = as.Date(\"2024-04-10\"), linetype = 1, color = \"gray50\") +    \n    geom_line() +\n    scale_color_manual(values = c(\"ê¸ì •\" = \"blue\", \"ë¶€ì •\" = \"red\")) +\n    labs(x = \"\",\n         y = \"ì§€ì§€ìœ¨(%)\",\n         title = \"ìœ¤ì„ì—´ ëŒ€í†µë ¹ ì§€ì§€ìœ¨ ì¶”ì„¸\") +\n    theme(legend.position = \"top\") +\n    expand_limits(x = c(as.Date(\"2022-05-10\"), as.Date(\"2027-05-09\"))) +\n    scale_x_date(date_labels =  \"%Y\", breaks = \"1 year\")  +\n    geom_text(aes(x=as.Date(\"2023-12-01\"), y = 60, label = remaining_ymd), \n              color = \"gray10\", size = 3, family = \"MaruBrui\") +\n    geom_text(aes(x=as.Date(\"2024-08-01\"), y = 65, label = \"ì œ22ëŒ€ ì´ì„ \\n4ì›”10ì¼\"), \n              color = \"gray10\", size = 3, family = \"MaruBrui\")  \n\nyoon_approval_gg\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ìœ¤ì„ì—´.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\nyoon_approval_gg\ndev.off()\n\n\n\n\n\n\n\n\n\nì½”ë“œlibrary(tidyverse)\nlibrary(rvest)\n\nmoon_url &lt;- 'https://namu.wiki/w/%EB%AC%B8%EC%9E%AC%EC%9D%B8/%EC%A7%80%EC%A7%80%EC%9C%A8'\n\nmoon_html &lt;- read_html(moon_url)\n\nmoon_list &lt;- moon_html |&gt; \n  html_nodes('table') |&gt; \n  html_table(header = TRUE)\n\nmoon_raw &lt;- moon_list |&gt; \n  enframe() |&gt; \n  mutate(nrow = map_int(value, nrow)) |&gt; \n  filter(nrow &gt; 30) |&gt; \n  mutate(id = row_number(),\n         ì¡°ì‚¬íšŒì‚¬ = ifelse(id &gt;6, \"ë¦¬ì–¼ë¯¸í„°\", \"í•œêµ­ê°¤ëŸ½\")) \n\nclean_tbl &lt;- function(dataframe) {\n  three_tbl &lt;- dataframe |&gt; \n    janitor::clean_names(ascii = FALSE) |&gt; \n    select(1:3) |&gt; \n    set_names(c(\"ì¡°ì‚¬ê¸°ê°„\", \"ê¸ì •\", \"ë¶€ì •\")) |&gt; \n    filter(str_detect(ì¡°ì‚¬ê¸°ê°„, \"^\\\\d{4}ë…„\"))\n}\n\nmoon_tbl &lt;- moon_raw |&gt; \n  mutate(data = map(value, clean_tbl)) |&gt; \n  filter(nrow &gt; 250) |&gt; \n  select(ì¡°ì‚¬íšŒì‚¬, data) |&gt; \n  unnest(data) |&gt; \n  mutate(ê¸ì • = parse_number(ê¸ì •),\n         ë¶€ì • = parse_number(ë¶€ì •)) |&gt; \n  fill(ê¸ì •, .direction = \"down\") |&gt; \n  fill(ë¶€ì •, .direction = \"down\") |&gt; \n  pivot_longer(ê¸ì •:ë¶€ì •, names_to = \"ê¸ë¶€ì •\", values_to = \"ì§€ì§€ìœ¨\") \n\nconvert_korean_date &lt;- function(korean_date) {\n  # Split the input into components\n  components &lt;- strsplit(korean_date, \" \")[[1]]\n  \n  # Extract year, month, and week\n  year &lt;- as.numeric(gsub(\"ë…„\", \"\", components[1]))\n  month &lt;- as.numeric(gsub(\"ì›”\", \"\", components[2]))\n  week &lt;- as.numeric(gsub(\"ì£¼\", \"\", components[3]))\n  \n  # Construct the date - the first day of the month and year, then add weeks\n  date &lt;- make_date(year, month, 1) + weeks(week - 1)\n  \n  return(date)\n}\n  \nmoon_approval_gg &lt;- moon_tbl |&gt; \n  mutate(ì¡°ì‚¬ê¸°ê°„ = map(ì¡°ì‚¬ê¸°ê°„, convert_korean_date)) |&gt; \n  unnest(ì¡°ì‚¬ê¸°ê°„) |&gt; \n  mutate(ì¡°ì‚¬íšŒì‚¬ = factor(ì¡°ì‚¬íšŒì‚¬, levels = c(\"í•œêµ­ê°¤ëŸ½\", \"ë¦¬ì–¼ë¯¸í„°\"))) |&gt; \n  filter(ì¡°ì‚¬íšŒì‚¬ == \"í•œêµ­ê°¤ëŸ½\") |&gt; \n  ggplot(aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •)) +\n    geom_hline(yintercept = 50, linetype = 2, color = \"gray50\") +  \n    geom_line() +\n    # facet_wrap(~ì¡°ì‚¬íšŒì‚¬) +\n    scale_color_manual(values = c(\"ê¸ì •\" = \"blue\", \"ë¶€ì •\" = \"red\")) +\n    labs(x = \"\",\n         y = \"ì§€ì§€ìœ¨(%)\",\n         title = \"ë¬¸ì¬ì¸ ëŒ€í†µë ¹ ì§€ì§€ìœ¨ ì¶”ì„¸\") +\n    theme(legend.position = \"top\")\n\nmoon_approval_gg\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ë¬¸ì¬ì¸.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\nmoon_approval_gg\ndev.off()\n\n\n\n\n\n\n\n\n\nì½”ë“œ\npark_url &lt;- 'https://namu.wiki/w/%EB%B0%95%EA%B7%BC%ED%98%9C/%EC%A7%80%EC%A7%80%EC%9C%A8'\n\npark_html &lt;- read_html(park_url)\n\npark_list &lt;- park_html |&gt; \n  html_nodes('table') |&gt; \n  html_table(header = TRUE)\n\npark_raw &lt;- park_list |&gt; \n  enframe() |&gt; \n  mutate(nrow = map_int(value, nrow)) |&gt; \n  filter(nrow &gt; 30) |&gt; \n  mutate(ì¡°ì‚¬íšŒì‚¬ = \"í•œêµ­ê°¤ëŸ½\") \n\n\npark_tbl &lt;- park_raw |&gt; \n  mutate(data = map(value, clean_tbl)) |&gt; \n  filter(nrow &gt; 200) |&gt; \n  select(ì¡°ì‚¬íšŒì‚¬, data) |&gt; \n  unnest(data) |&gt; \n  mutate(ê¸ì • = parse_number(ê¸ì •),\n         ë¶€ì • = parse_number(ë¶€ì •)) |&gt; \n  fill(ê¸ì •, .direction = \"down\") |&gt; \n  fill(ë¶€ì •, .direction = \"down\") |&gt; \n  pivot_longer(ê¸ì •:ë¶€ì •, names_to = \"ê¸ë¶€ì •\", values_to = \"ì§€ì§€ìœ¨\") \n\npark_approval_gg &lt;- park_tbl |&gt; \n  mutate(ì¡°ì‚¬ê¸°ê°„ = map(ì¡°ì‚¬ê¸°ê°„, convert_korean_date)) |&gt; \n  unnest(ì¡°ì‚¬ê¸°ê°„) |&gt; \n  ggplot(aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •)) +\n    geom_hline(yintercept = 50, linetype = 2, color = \"gray50\") +  \n    geom_line() +\n    scale_color_manual(values = c(\"ê¸ì •\" = \"blue\", \"ë¶€ì •\" = \"red\")) +\n    labs(x = \"\",\n         y = \"ì§€ì§€ìœ¨(%)\",\n         title = \"ë°•ê·¼í˜œ ëŒ€í†µë ¹ ì§€ì§€ìœ¨ ì¶”ì„¸\") +\n    theme(legend.position = \"top\")\n\npark_approval_gg\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ë°•ê·¼í˜œ.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\npark_approval_gg\ndev.off()\n\n\n\n\n\n\n\n\n\nì½”ë“œ\nlee_url &lt;- 'https://namu.wiki/w/%EC%9D%B4%EB%AA%85%EB%B0%95/%EC%A7%80%EC%A7%80%EC%9C%A8'\n\nlee_html &lt;- read_html(lee_url)\n\nlee_list &lt;- lee_html |&gt; \n  html_nodes('table') |&gt; \n  html_table(header = TRUE)\n\nlee_raw &lt;- lee_list |&gt; \n  enframe() |&gt; \n  mutate(nrow = map_int(value, nrow)) |&gt; \n  filter(nrow &gt; 30) |&gt; \n  mutate(ì¡°ì‚¬íšŒì‚¬ = \"í•œêµ­ê°¤ëŸ½\") \n\nconvert_ym_date &lt;- function(korean_date) {\n  \n  # Split the input into components\n  components &lt;- strsplit(korean_date, \" \")[[1]]\n  \n  # Extract year and month\n  year &lt;- as.numeric(gsub(\"ë…„\", \"\", components[1]))\n  month &lt;- as.numeric(gsub(\"ì›”\", \"\", components[2]))\n  \n  # Construct the date - the first day of the month and year\n  date &lt;- make_date(year, month, 15)\n  \n  return(date)\n}\n\nlee_tbl &lt;- lee_raw |&gt; \n  mutate(data = map(value, clean_tbl)) |&gt; \n  filter(nrow &gt; 90) |&gt; \n  select(ì¡°ì‚¬íšŒì‚¬, data) |&gt; \n  unnest(data) |&gt; \n  mutate(ê¸ì • = parse_number(ê¸ì •),\n         ë¶€ì • = parse_number(ë¶€ì •)) |&gt; \n  fill(ê¸ì •, .direction = \"down\") |&gt; \n  fill(ë¶€ì •, .direction = \"down\") |&gt; \n  separate(ì¡°ì‚¬ê¸°ê°„, into = c(\"ì‹œì‘\", \"ë\"), sep = \"-\") |&gt; \n  select(-ë) |&gt; \n  mutate(ì¡°ì‚¬ê¸°ê°„ = case_when(str_detect(ì‹œì‘, \"ì£¼$\") ~ map(ì‹œì‘, convert_korean_date), \n                              TRUE ~                    map(ì‹œì‘, convert_ym_date))) |&gt; \n  unnest(ì¡°ì‚¬ê¸°ê°„) |&gt; \n  mutate(ì¡°ì‚¬ê¸°ê°„ = as.Date(ì¡°ì‚¬ê¸°ê°„, origin = \"1970-01-01\"))\n\nprevious_date &lt;- ymd(\"2012-04-11\") - election_period\n\n\nlee_current_tbl &lt;- lee_tbl |&gt; \n  pivot_longer(ê¸ì •:ë¶€ì •, names_to = \"ê¸ë¶€ì •\", values_to = \"ì§€ì§€ìœ¨\") |&gt; \n  filter(ì¡°ì‚¬ê¸°ê°„ == previous_date+9)\n\nlee_approval_gg &lt;- lee_tbl |&gt; \n  pivot_longer(ê¸ì •:ë¶€ì •, names_to = \"ê¸ë¶€ì •\", values_to = \"ì§€ì§€ìœ¨\") |&gt;\n  ggplot(aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •)) +\n    geom_point(data = lee_current_tbl, aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •)) +\n    geom_text(data = lee_current_tbl, aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •,\n                                          label = ì§€ì§€ìœ¨), vjust = -1.5) +\n    geom_hline(yintercept = 50, linetype = 2, color = \"gray50\") +  \n    geom_line() +\n    scale_color_manual(values = c(\"ê¸ì •\" = \"blue\", \"ë¶€ì •\" = \"red\")) +\n    labs(x = \"\",\n         y = \"ì§€ì§€ìœ¨(%)\",\n         title = \"ì´ëª…ë°• ëŒ€í†µë ¹ ì§€ì§€ìœ¨ ì¶”ì„¸\") +\n    theme(legend.position = \"top\") +\n    scale_x_date(date_labels =  \"%Y\", breaks = \"1 year\") +\n    geom_vline(xintercept = as.Date(\"2012-04-11\"), linetype = 1, color = \"gray50\") +\n    geom_text(aes(x=as.Date(\"2011-12-01\"), y = 45, label = remaining_ymd), \n              color = \"gray10\", size = 3, family = \"MaruBrui\") +\n    geom_text(aes(x=as.Date(\"2012-08-01\"), y = 65, label = \"ì œ19ëŒ€ ì´ì„ \\n4ì›”11ì¼\"), \n              color = \"gray10\", size = 3, family = \"MaruBrui\")  \n  \nlee_approval_gg\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ì´ëª…ë°•.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\nlee_approval_gg\ndev.off()\n\n\n\n\n\n\n\n\n\nì½”ë“œ\nrho_url &lt;- 'https://namu.wiki/w/%ED%8B%80:%ED%95%9C%EA%B5%AD%EA%B0%A4%EB%9F%BD%20%EB%85%B8%EB%AC%B4%ED%98%84%20%EB%8C%80%ED%86%B5%EB%A0%B9%20%EA%B5%AD%EC%A0%95%EC%A7%80%EC%A7%80%EC%9C%A8'\n\nrho_html &lt;- read_html(rho_url)\n\nrho_list &lt;- rho_html |&gt; \n  html_nodes('table') |&gt; \n  html_table(header = TRUE)\n\nrho_raw &lt;- rho_list |&gt; \n  enframe() |&gt; \n  mutate(nrow = map_int(value, nrow)) |&gt; \n  filter(nrow &gt; 30) |&gt; \n  mutate(ì¡°ì‚¬íšŒì‚¬ = \"í•œêµ­ê°¤ëŸ½\") \n\n\nrho_tbl &lt;- rho_raw |&gt; \n  mutate(data = map(value, clean_tbl)) |&gt; \n  filter(nrow &gt; 20) |&gt; \n  select(ì¡°ì‚¬íšŒì‚¬, data) |&gt; \n  unnest(data) |&gt; \n  mutate(ê¸ì • = parse_number(ê¸ì •),\n         ë¶€ì • = parse_number(ë¶€ì •)) |&gt; \n  fill(ê¸ì •, .direction = \"down\") |&gt; \n  fill(ë¶€ì •, .direction = \"down\") |&gt; \n  separate(ì¡°ì‚¬ê¸°ê°„, into = c(\"ì‹œì‘\", \"ë\"), sep = \"-\") |&gt; \n  select(-ë) |&gt; \n  mutate(ì¡°ì‚¬ê¸°ê°„ = case_when(str_detect(ì‹œì‘, \"ì£¼$\") ~ map(ì‹œì‘, convert_korean_date), \n                              TRUE ~                    map(ì‹œì‘, convert_ym_date))) |&gt; \n  unnest(ì¡°ì‚¬ê¸°ê°„) |&gt; \n  mutate(ì¡°ì‚¬ê¸°ê°„ = as.Date(ì¡°ì‚¬ê¸°ê°„, origin = \"1970-01-01\"))\n  \n\nrho_approval_gg &lt;- rho_tbl |&gt; \n  pivot_longer(ê¸ì •:ë¶€ì •, names_to = \"ê¸ë¶€ì •\", values_to = \"ì§€ì§€ìœ¨\") |&gt;\n  ggplot(aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •)) +\n    geom_hline(yintercept = 50, linetype = 2, color = \"gray50\") +  \n    geom_line() +\n    scale_color_manual(values = c(\"ê¸ì •\" = \"blue\", \"ë¶€ì •\" = \"red\")) +\n    labs(x = \"\",\n         y = \"ì§€ì§€ìœ¨(%)\",\n         title = \"ë…¸ë¬´í˜„ ëŒ€í†µë ¹ ì§€ì§€ìœ¨ ì¶”ì„¸\") +\n    theme(legend.position = \"top\")\n\nrho_approval_gg\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ë…¸ë¬´í˜„.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\nrho_approval_gg\ndev.off()\n\n\n\n\n\n\n\nì½”ë“œrho_tbl |&gt; select(ì¡°ì‚¬íšŒì‚¬, ì¡°ì‚¬ê¸°ê°„, ê¸ì •, ë¶€ì •)\n\nlee_tbl |&gt; select(ì¡°ì‚¬íšŒì‚¬, ì¡°ì‚¬ê¸°ê°„, ê¸ì •, ë¶€ì •)\n\npark_tbl |&gt; pivot_wider(names_from = ê¸ë¶€ì •, values_from = ì§€ì§€ìœ¨) |&gt; \n  filter(ì¡°ì‚¬íšŒì‚¬ == \"í•œêµ­ê°¤ëŸ½\")\n\nmoon_tbl |&gt; pivot_wider(names_from = ê¸ë¶€ì •, values_from = ì§€ì§€ìœ¨) |&gt; \n  filter(ì¡°ì‚¬íšŒì‚¬ == \"í•œêµ­ê°¤ëŸ½\")\n\n\n\n\nëŒ€í†µë ¹ ì§€ì§€ìœ¨\nì´ëª…ë°•/ìœ¤ì„ì—´\n\n\n\n\nì½”ë“œlibrary(patchwork)\n\nall_approval_gg &lt;- (rho_approval_gg + lee_approval_gg + park_approval_gg)  /\n(moon_approval_gg + yoon_approval_gg)\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ì „ì²´ëŒ€í†µë ¹.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\nall_approval_gg\ndev.off()\n\n\n\n\n\n\n\n\n\nì½”ë“œtwo_approval_gg &lt;- (lee_approval_gg)  / (yoon_approval_gg)\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ë‘ëŒ€í†µë ¹.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\ntwo_approval_gg\ndev.off()"
  },
  {
    "objectID": "approval_rate.html#ê²°í•©",
    "href": "approval_rate.html#ê²°í•©",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œrho_tbl |&gt; select(ì¡°ì‚¬íšŒì‚¬, ì¡°ì‚¬ê¸°ê°„, ê¸ì •, ë¶€ì •)\n\nlee_tbl |&gt; select(ì¡°ì‚¬íšŒì‚¬, ì¡°ì‚¬ê¸°ê°„, ê¸ì •, ë¶€ì •)\n\npark_tbl |&gt; pivot_wider(names_from = ê¸ë¶€ì •, values_from = ì§€ì§€ìœ¨) |&gt; \n  filter(ì¡°ì‚¬íšŒì‚¬ == \"í•œêµ­ê°¤ëŸ½\")\n\nmoon_tbl |&gt; pivot_wider(names_from = ê¸ë¶€ì •, values_from = ì§€ì§€ìœ¨) |&gt; \n  filter(ì¡°ì‚¬íšŒì‚¬ == \"í•œêµ­ê°¤ëŸ½\")\n\n\n\n\nëŒ€í†µë ¹ ì§€ì§€ìœ¨\nì´ëª…ë°•/ìœ¤ì„ì—´\n\n\n\n\nì½”ë“œlibrary(patchwork)\n\nall_approval_gg &lt;- (rho_approval_gg + lee_approval_gg + park_approval_gg)  /\n(moon_approval_gg + yoon_approval_gg)\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ì „ì²´ëŒ€í†µë ¹.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\nall_approval_gg\ndev.off()\n\n\n\n\n\n\n\n\n\nì½”ë“œtwo_approval_gg &lt;- (lee_approval_gg)  / (yoon_approval_gg)\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ë‘ëŒ€í†µë ¹.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\ntwo_approval_gg\ndev.off()"
  },
  {
    "objectID": "approval_rate.html#ë…„-ê¸°ì¤€",
    "href": "approval_rate.html#ë…„-ê¸°ì¤€",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n2.1 1ë…„ ê¸°ì¤€",
    "text": "2.1 1ë…„ ê¸°ì¤€\n\nì½”ë“œ\nrm_url &lt;- glue::glue('https://namu.wiki/w/%ED%8B%80:%EB%A6%AC%EC%96%BC%EB%AF%B8%ED%84%B0%20{2006}%EB%85%84%20%EC%A0%95%EB%8B%B9%EC%A7%80%EC%A7%80%EC%9C%A8')\n\nrm_html &lt;- read_html(rm_url)\n\nrm_list &lt;- rm_html |&gt; \n  html_nodes('table') |&gt; \n  html_table(header = TRUE)\n\nrm_raw &lt;- rm_list |&gt; \n  enframe() |&gt; \n  mutate(nrow = map_int(value, nrow)) |&gt; \n  filter(name == 1) |&gt; \n  mutate(ì¡°ì‚¬íšŒì‚¬ = \"ë¦¬ì–¼ë¯¸í„°\") \n\nremove_last &lt;- function(vector) {\n  if(vector[length(vector)] ==\"\") {\n    vector[1:(length(vector)-1)]\n  } else {\n    vector\n  }\n}\n\nmake_dataframe &lt;- function(x_vec, y_vec) {\n  data.frame(x_vec, y_vec)\n}\n\n## ì •ë‹¹ëª…ê³¼ ì§€ì§€ìœ¨\nrm_tbl &lt;- rm_raw |&gt; \n  mutate(data = map(value, janitor::clean_names, ascii = FALSE)) |&gt; \n  select(ì¡°ì‚¬íšŒì‚¬, data) |&gt; \n  unnest(data) |&gt;\n  select(contains(\"ì •ë‹¹ì§€ì§€ìœ¨\"), x_2) |&gt; \n  set_names(c(\"ì¡°ì‚¬ê¸°ê°„\", \"ì§€ì§€ìœ¨\")) |&gt; \n  mutate(ì •ë‹¹ëª… = ifelse(str_detect(ì¡°ì‚¬ê¸°ê°„, \"â—\"), \n                      str_split(ì§€ì§€ìœ¨, \"â—\"), NA)) |&gt; \n  mutate(ì •ë‹¹ëª… = map_chr(ì •ë‹¹ëª…, paste0, collapse=\"\")) |&gt; \n  mutate(ì •ë‹¹ëª… = ifelse(ì •ë‹¹ëª… == \"NA\", NA, ì •ë‹¹ëª…)) |&gt; \n  fill(ì •ë‹¹ëª…, .direction = \"down\") |&gt; \n  filter(str_detect(ì¡°ì‚¬ê¸°ê°„, \"^\\\\d{1,2}ì›”\")) |&gt; \n  mutate(ì§€ì§€ìœ¨ = str_squish(ì§€ì§€ìœ¨),\n         ì •ë‹¹ëª… = str_squish(ì •ë‹¹ëª…)) |&gt; \n  mutate(ì •ë‹¹ëª… = str_split(ì •ë‹¹ëª…, pattern = \"\\\\s+/\\\\s+\"),\n         ì§€ì§€ìœ¨ = str_split(ì§€ì§€ìœ¨, pattern = \"%\"))  |&gt; \n  mutate(ì§€ì§€ìœ¨ìˆ˜ = map_int(ì§€ì§€ìœ¨, length),\n         ì •ë‹¹ìˆ˜   = map_int(ì •ë‹¹ëª…, length)) |&gt; \n  mutate(ì§€ì§€ìœ¨ = ifelse(ì§€ì§€ìœ¨ìˆ˜ == ì •ë‹¹ìˆ˜, ì§€ì§€ìœ¨,\n                      map(ì§€ì§€ìœ¨, remove_last))) |&gt; \n  filter(abs(ì§€ì§€ìœ¨ìˆ˜ - ì •ë‹¹ìˆ˜)  &lt; 2) |&gt; \n  mutate(data = map2(ì§€ì§€ìœ¨, ì •ë‹¹ëª…, make_dataframe)) |&gt; \n  select(ì¡°ì‚¬ê¸°ê°„, data)\n  \nrm_tbl |&gt; \n  unnest(data)"
  },
  {
    "objectID": "approval_rate.html#í•¨ìˆ˜",
    "href": "approval_rate.html#í•¨ìˆ˜",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n2.2 í•¨ìˆ˜",
    "text": "2.2 í•¨ìˆ˜\n\nì½”ë“œ\nget_party_data &lt;- function(year = \"2012\") {\n  \n  rm_url &lt;- glue::glue('https://namu.wiki/w/%ED%8B%80:%EB%A6%AC%EC%96%BC%EB%AF%B8%ED%84%B0%20',\n                       '{year}',\n                       '%EB%85%84%20%EC%A0%95%EB%8B%B9%EC%A7%80%EC%A7%80%EC%9C%A8') |&gt; as.character()\n\n  rm_html &lt;- read_html(rm_url)\n  \n  rm_list &lt;- rm_html |&gt; \n    html_nodes('table') |&gt; \n    html_table(header = TRUE)\n  \n  rm_raw &lt;- rm_list |&gt; \n    enframe() |&gt; \n    mutate(nrow = map_int(value, nrow)) |&gt; \n    filter(name == 1) |&gt; \n    mutate(ì¡°ì‚¬íšŒì‚¬ = \"ë¦¬ì–¼ë¯¸í„°\") \n  \n  remove_last &lt;- function(vector) {\n    \n    if(length(vector) &lt; 3){\n      vector\n    } else if(vector[length(vector)] ==\"\") {\n      vector[1:(length(vector)-1)]\n    } else {\n      vector\n    }\n  }\n  \n  make_dataframe &lt;- function(x_vec, y_vec) {\n    min_row &lt;- min(length(x_vec), length(y_vec))\n    data.frame(x_vec = x_vec[1:min_row], y_vec = y_vec[1:min_row])\n  }\n  \n  ## ì •ë‹¹ëª…ê³¼ ì§€ì§€ìœ¨\n  rm_tbl &lt;- rm_raw |&gt; \n    mutate(data = map(value, janitor::clean_names, ascii = FALSE)) |&gt; \n    select(ì¡°ì‚¬íšŒì‚¬, data) |&gt; \n    unnest(data) |&gt;\n    select(contains(\"ì •ë‹¹ì§€ì§€ìœ¨\"), x_2) |&gt; \n    set_names(c(\"ì¡°ì‚¬ê¸°ê°„\", \"ì§€ì§€ìœ¨\")) |&gt; \n    mutate(ì •ë‹¹ëª… = ifelse(str_detect(ì¡°ì‚¬ê¸°ê°„, \"â—\"), \n                        str_split(ì§€ì§€ìœ¨, \"â—\"), NA)) |&gt; \n    mutate(ì •ë‹¹ëª… = map_chr(ì •ë‹¹ëª…, paste0, collapse=\"\")) |&gt; \n    mutate(ì •ë‹¹ëª… = ifelse(ì •ë‹¹ëª… == \"NA\", NA, ì •ë‹¹ëª…)) |&gt; \n    fill(ì •ë‹¹ëª…, .direction = \"down\") |&gt; \n    filter(str_detect(ì¡°ì‚¬ê¸°ê°„, \"^\\\\d{1,2}ì›”\")) |&gt; \n    mutate(ì§€ì§€ìœ¨ = str_squish(ì§€ì§€ìœ¨),\n           ì •ë‹¹ëª… = str_squish(ì •ë‹¹ëª…)) |&gt; \n    mutate(ì •ë‹¹ëª… = str_split(ì •ë‹¹ëª…, pattern = \"\\\\s+/\\\\s+\"),\n           ì§€ì§€ìœ¨ = str_split(ì§€ì§€ìœ¨, pattern = \"%\"))  |&gt; \n    mutate(ì§€ì§€ìœ¨ìˆ˜ = map_int(ì§€ì§€ìœ¨, length),\n           ì •ë‹¹ìˆ˜   = map_int(ì •ë‹¹ëª…, length)) |&gt; \n    mutate(ì§€ì§€ìœ¨ = ifelse(ì§€ì§€ìœ¨ìˆ˜ == ì •ë‹¹ìˆ˜, ì§€ì§€ìœ¨, map(ì§€ì§€ìœ¨, remove_last))) |&gt; \n    filter(abs(ì§€ì§€ìœ¨ìˆ˜ - ì •ë‹¹ìˆ˜)  &lt; 2) |&gt; \n    mutate(ì§€ì§€ìœ¨ìˆ˜ = map_int(ì§€ì§€ìœ¨, length),\n           ì •ë‹¹ìˆ˜   = map_int(ì •ë‹¹ëª…, length)) |&gt; \n    mutate(ì§€ì§€ìœ¨ = ifelse(ì§€ì§€ìœ¨ìˆ˜ != ì •ë‹¹ìˆ˜, NA, ì§€ì§€ìœ¨)) |&gt; \n    fill(ì§€ì§€ìœ¨, .direction = \"up\") |&gt; \n    mutate(data = map2(ì§€ì§€ìœ¨, ì •ë‹¹ëª…, make_dataframe)) |&gt; \n    select(ì¡°ì‚¬ê¸°ê°„, data)\n\n  \n  rm_df &lt;- rm_tbl |&gt; unnest(data) |&gt; mutate(x_vec = parse_number(x_vec)) |&gt; \n    rename(ì§€ì§€ìœ¨ = x_vec,\n           ì •ë‹¹   = y_vec) |&gt; \n    mutate(ì—°ë„ = year)\n  \n  return(rm_df)\n}\n\nget_party_data(\"2018\")"
  },
  {
    "objectID": "approval_rate.html#ê²°í•©-1",
    "href": "approval_rate.html#ê²°í•©-1",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n2.3 ê²°í•©",
    "text": "2.3 ê²°í•©\n\nì½”ë“œ\nsafely_get_party_data &lt;- safely(get_party_data, otherwise = \"ì˜¤ë¥˜\")\n\nyear &lt;- 2006:2023\n\nparty_raw &lt;- year |&gt; \n  enframe()  |&gt; \n  mutate(data = map(value, safely_get_party_data))\n\nparty_tbl &lt;- party_raw |&gt; \n  mutate(result = map(data, \"result\")) |&gt; \n  mutate(check = map_dbl(result, is_tibble)) |&gt; \n  unnest(result) |&gt; \n  select(ì—°ë„, ì¡°ì‚¬ê¸°ê°„, ì •ë‹¹, ì§€ì§€ìœ¨)\n\nparty_tbl |&gt; \n  write_csv(\"data/ë¦¬ì–¼ë¯¸í„°_ì •ë‹¹ì§€ì§€ìœ¨.csv\")"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "1 ì°¸ê³  ì›¹ì‚¬ì´íŠ¸\n\n#30DayMapChallenge ğŸŒğŸŒğŸŒ\n30 DAY MAP CHALLENGE IN R\nAbdoulMa/30DayMapChallenge\n\n2 ì›ì²œ ì§€ë„\n\n\nêµ­í† êµí†µë¶€\n\n\nLX í•œêµ­êµ­í† ì •ë³´ê³µì‚¬, êµ¬ í•œêµ­ì§€ì ê³µì‚¬\n\nê³µê°„ì •ë³´ì‚°ì—…ì§„í¥ì›\n\nVWorld, ê³µê°„ì •ë³´ì˜¤í”ˆí”Œë«í¼\n\n\n\nêµ­í† ì§€ë¦¬ì •ë³´ì›\n\nêµ­í† ì •ë³´í”Œë«í¼\n\nêµ­ê°€ê³µê°„ì •ë³´í¬í„¸\n\nì˜¤í”ˆë§ˆì¼“, 90m í‘œê³  ë°ì´í„°: [êµ­í† ì§€ë¦¬ì •ë³´ì›] ìˆ˜ì¹˜í‘œê³ ëª¨ë¸(DEM)_90M\n\n\n\n\n\n\nëŒ€í•œë¯¼êµ­ í–‰ì •ë™ ê²½ê³„: admdongkor\nëŒ€í•œë¯¼êµ­ ìµœì‹  í–‰ì •êµ¬ì—­(SHP) ë‹¤ìš´ë¡œë“œ\n\n3 ì„¸ê³„ì§€ë„\nì¶œì²˜: Fixing maps library data for Pacific centred (0Â°-360Â° longitude) display\n\n\nì„¸ê³„ì§€ë„: giscoR\nì„¸ê³„ì§€ë„: maps\nì„¸ê³„ì§€ë„: rnaturalearth\nì•„ì‹œì•„\nëŒ€í•œë¯¼êµ­\níƒœí‰ì–‘ ì¤‘ì‹¬\n\n\n\n\nì½”ë“œlibrary(tidyverse)\nlibrary(sf)\n\n# download.file(url = \"https://gisco-services.ec.europa.eu/distribution/v2/countries/geojson/CNTR_RG_01M_2016_4326.geojson\", destfile = \"data/world.geojson\", mode = \"w\")\n# \n# world_sf &lt;- giscoR::gisco_get_countries(\n#   epsg = \"4326\",\n#   region = \"Asia\",\n#   resolution = \"1\",\n#   cache = TRUE, \n#   update_cache = TRUE\n# )\n\nworld_sf &lt;- sf::st_read(\"data/world.geojson\")\n#&gt; Reading layer `world' from data source `D:\\tcs\\map_challenge\\data\\world.geojson' using driver `GeoJSON'\n#&gt; Simple feature collection with 257 features and 6 fields\n#&gt; Geometry type: MULTIPOLYGON\n#&gt; Dimension:     XY\n#&gt; Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.66498\n#&gt; Geodetic CRS:  WGS 84\n\nplot(st_geometry(world_sf))\n\n\n\n\n\n\n\n\n\n\nì½”ë“œ# í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\nlibrary(ggplot2)\nlibrary(maps)\n\n# ì›”ë“œë§µ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\nworld_map &lt;- map_data(\"world\")\n\n# ggplot2ë¥¼ ì‚¬ìš©í•´ ì§€ë„ë¥¼ ê·¸ë¦½ë‹ˆë‹¤.\nggplot() +\n  geom_polygon(data = world_map, aes(x = long, y = lat, group = group), fill = \"white\", color = \"black\") +\n  coord_cartesian(xlim = c(-180, 180)) +\n  theme_void()\n\n\n\n\n\n\n\n\n\n\nì½”ë“œlibrary(rnaturalearth)\n\n# Get the world map data\nworld &lt;- ne_countries(scale = \"medium\", returnclass = \"sf\")\n\n# Shift the map to center on the Pacific Ocean\nworld_trans &lt;- st_transform(st_wrap_dateline(world, options = c(\"WRAPDATELINE=YES\", \"DATELINEOFFSET=-180\")), crs = \"+proj=robin\")\n\n# Plot the world map\nggplot(data = world_trans) +\n  geom_sf() +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\nì½”ë“œasia_sf &lt;- giscoR::gisco_get_countries(\n  epsg = \"4326\",\n  region = \"Asia\",\n  resolution = \"60\",\n  cache = TRUE,\n  update_cache = TRUE\n)\n\nplot(st_geometry(asia_sf))\n\n\n\n\n\n\n\n\n\n\nì½”ë“œlibrary(tidyverse)\nlibrary(sf)\nlibrary(giscoR)\n\nkorea &lt;- giscoR::gisco_get_countries(\n    resolution = \"1\",\n    country = \"KOR\"\n) |&gt;\n    sf::st_transform(\"+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0\")\n\nplot(st_geometry(korea))\n\n\n\n\n\n\n\n\n\n\nì½”ë“œlibrary(maps)\n\nplot.map&lt;- function(database,center,...){\n    Obj &lt;- map(database,...,plot=F)\n    coord &lt;- cbind(Obj[[1]],Obj[[2]])\n\n    # split up the coordinates\n    id &lt;- rle(!is.na(coord[,1]))\n    id &lt;- matrix(c(1,cumsum(id$lengths)),ncol=2,byrow=T)\n    polygons &lt;- apply(id,1,function(i){coord[i[1]:i[2],]})\n\n    # split up polygons that differ too much\n    polygons &lt;- lapply(polygons,function(x){\n        x[,1] &lt;- x[,1] + center\n        x[,1] &lt;- ifelse(x[,1]&gt;180,x[,1]-360,x[,1])\n        if(sum(diff(x[,1])&gt;300,na.rm=T) &gt;0){\n          id &lt;- x[,1] &lt; 0\n          x &lt;- rbind(x[id,],c(NA,NA),x[!id,])\n       }\n       x\n    })\n    # reconstruct the object\n    polygons &lt;- do.call(rbind,polygons)\n    Obj[[1]] &lt;- polygons[,1]\n    Obj[[2]] &lt;- polygons[,2]\n\n    map(Obj,...)\n}\n\nplot.map(\"world\", center=210, col=\"white\",bg=\"gray\",\n         fill=TRUE, ylim=c(-60,90),mar=c(0,0,0,0))"
  },
  {
    "objectID": "km_BitGPT.html",
    "href": "km_BitGPT.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "í–‰ì •ì•ˆì „ë¶€ ì£¼ë¯¼ë“±ë¡ ì¸êµ¬ ë° ì„¸ëŒ€í˜„í™© ì›¹ì‚¬ì´íŠ¸ì—ì„œ ê´‘ëª…ì‹œ ìµœê·¼ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.\n\nì½”ë“œlibrary(tidyverse)\nlibrary(readxl)\n\nraw_data &lt;- read_excel(\"data/202307_202307_ì—°ë ¹ë³„ì¸êµ¬í˜„í™©_ì›”ê°„.xlsx\", skip =3) \n\nraw_data |&gt; \n  janitor::clean_names(ascii = FALSE) |&gt; \n  select(1:10) |&gt; \n  head() |&gt; \n  gt::gt()\n\n\n\n\n\ní–‰ì •ê¸°ê´€ì½”ë“œ\n      í–‰ì •ê¸°ê´€\n      ì´_ì¸êµ¬ìˆ˜\n      ì—°ë ¹êµ¬ê°„ì¸êµ¬ìˆ˜_4\n      x0ì„¸_5\n      x1ì„¸_6\n      x2ì„¸_7\n      x3ì„¸_8\n      x4ì„¸_9\n      x5ì„¸_10\n    \n\n\n4121000000\nê²½ê¸°ë„ ê²½ê¸°ë„ ê´‘ëª…ì‹œ\n280,986\n280,986\n1,373\n1,470\n1,582\n1,588\n1,729\n1,924\n\n\n4121051000\nê²½ê¸°ë„ ê´‘ëª…ì‹œ ê´‘ëª…1ë™\n56\n56\n0\n0\n0\n0\n0\n0\n\n\n4121052000\nê²½ê¸°ë„ ê´‘ëª…ì‹œ ê´‘ëª…2ë™\n2,953\n2,953\n9\n7\n11\n5\n5\n8\n\n\n4121054000\nê²½ê¸°ë„ ê´‘ëª…ì‹œ ê´‘ëª…3ë™\n9,869\n9,869\n29\n21\n20\n20\n23\n24\n\n\n4121055000\nê²½ê¸°ë„ ê´‘ëª…ì‹œ ê´‘ëª…4ë™\n8,114\n8,114\n35\n29\n44\n27\n28\n35\n\n\n4121056000\nê²½ê¸°ë„ ê´‘ëª…ì‹œ ê´‘ëª…5ë™\n12,206\n12,206\n41\n40\n64\n51\n49\n60\n\n\n\n\n\n\n\n\nì½”ë“œlibrary(tidyverse)\n\npop_tbl &lt;- \n  read_rds(\"data/kwangmyung_pop.rds\")\n\npop_tbl |&gt; \n  head() |&gt; \n  gt::gt()\n\n\n\n\n\nì‹œì \n      í–‰ì •ë™\n      ì„±ë³„\n      ë‚˜ì´\n      ì¸êµ¬ìˆ˜\n    \n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n0\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n1\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n2\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n3\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n4\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n5\n0\n\n\n\n\n\n\n\në°ì´í„°ë¥¼ ê°€ê³µí•œ í›„ ì±—GPT Code Interpreter ë¶„ì„ìš©ìœ¼ë¡œ ë³€í™˜ì‹œì¼œ ë°ì´í„°ë¥¼ ì „ì†¡í•œë‹¤.\n\nì½”ë“œpop_tbl |&gt; \n  write_csv(\"data/kwangmyung_pop.csv\")\n\n\n\n\n\n\nCSV íŒŒì¼ ë‹¤ìš´ë¡œë“œ"
  },
  {
    "objectID": "realmeter_metro.html",
    "href": "realmeter_metro.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œlibrary(tidyverse)\nlibrary(rvest)\n\nrm_url &lt;- glue::glue('http://www.realmeter.net/category/pdf/page/1/')\n\nrm_html &lt;- read_html(rm_url)\n\n## PDF ë‹¤ìš´ë¡œë“œ ë§í¬ ---------------\nrm_links_text &lt;- rm_html |&gt; \n  html_nodes(\"a\") |&gt; \n  html_text()\n\nrm_links &lt;- rm_html |&gt; \n  html_nodes(\"a\") |&gt; \n  html_attr(\"href\")\n\nrm_pdf_raw &lt;- tibble('text' = rm_links_text, 'link' = rm_links)\n\nrm_pdf_tbl &lt;- rm_pdf_raw |&gt; \n  filter(str_detect(text, \"ì£¼ê°„í†µê³„í‘œ\")) |&gt; \n  mutate(text = str_extract(text, \"\\\\d{2}ë…„\\\\s+\\\\d{1,2}ì›”\\\\s+\\\\d{1}ì£¼\"))  |&gt; \n  mutate(filename = str_extract(link, '[^/]+\\\\.pdf'))\n\n\n\n\nì½”ë“œfs::dir_create(\"data/realmeter/\")\n\ndownload.file(url = rm_pdf_tbl$link[1], mode='wb', \n              destfile = glue::glue(\"data/realmeter/{rm_pdf_tbl$filename[1]}\"))\n\n\n\n\nì½”ë“œlink &lt;- rm_pdf_tbl$link[2]\nfilename &lt;- rm_pdf_tbl$filename[2]\n\ndownload_pdfs &lt;- function(link, filename) {\n  download.file(url = link, mode='wb', \n              destfile = glue::glue(\"data/realmeter/{filename}\"))\n}\n\ndownload_pdfs(link, filename)\n\n\n\n\nì½”ë“œ\nget_reports &lt;- function(page=\"1\"){\n  \n  rm_url &lt;- glue::glue('http://www.realmeter.net/category/pdf/page/{page}/')\n\n  rm_html &lt;- read_html(rm_url)\n  \n  ## PDF ë‹¤ìš´ë¡œë“œ ë§í¬ ---------------\n  rm_links_text &lt;- rm_html |&gt; \n    html_nodes(\"a\") |&gt; \n    html_text()\n  \n  rm_links &lt;- rm_html |&gt; \n    html_nodes(\"a\") |&gt; \n    html_attr(\"href\")\n  \n  rm_pdf_raw &lt;- tibble('text' = rm_links_text, 'link' = rm_links)\n  \n  rm_pdf_tbl &lt;- rm_pdf_raw |&gt; \n    filter(str_detect(text, \"ì£¼ê°„í†µê³„í‘œ\")) |&gt; \n    # mutate(text = str_extract(text, \"\\\\d{2}ë…„\\\\s+\\\\d{1,2}ì›”\\\\s+\\\\d{1}ì£¼\"))  |&gt; \n    mutate(filename = str_extract(link, '[^/]+\\\\.pdf')) |&gt; \n    mutate(link = ifelse(str_detect(link, \"^http\"), link, \n                         glue::glue(\"http://realmeter.cafe24.com{link}\")))\n  \n  return(rm_pdf_tbl)\n}\n\nget_reports(157)\n\npdf_pages &lt;- 1:157\n\npdf_report_raw &lt;- pdf_pages |&gt; \n  enframe(value = \"page\")  |&gt; \n  slice(156) |&gt; \n  mutate(data = map(page, get_reports)) \n\npdf_report_raw |&gt; \n  unnest(data) |&gt; \n  pull(link)\n\npdf_report_raw |&gt; \n  unnest(data) |&gt; \n  mutate(report = walk2(link, filename, download_pdfs))"
  },
  {
    "objectID": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ-ë§í¬",
    "href": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ-ë§í¬",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œlibrary(tidyverse)\nlibrary(rvest)\n\nrm_url &lt;- glue::glue('http://www.realmeter.net/category/pdf/page/1/')\n\nrm_html &lt;- read_html(rm_url)\n\n## PDF ë‹¤ìš´ë¡œë“œ ë§í¬ ---------------\nrm_links_text &lt;- rm_html |&gt; \n  html_nodes(\"a\") |&gt; \n  html_text()\n\nrm_links &lt;- rm_html |&gt; \n  html_nodes(\"a\") |&gt; \n  html_attr(\"href\")\n\nrm_pdf_raw &lt;- tibble('text' = rm_links_text, 'link' = rm_links)\n\nrm_pdf_tbl &lt;- rm_pdf_raw |&gt; \n  filter(str_detect(text, \"ì£¼ê°„í†µê³„í‘œ\")) |&gt; \n  mutate(text = str_extract(text, \"\\\\d{2}ë…„\\\\s+\\\\d{1,2}ì›”\\\\s+\\\\d{1}ì£¼\"))  |&gt; \n  mutate(filename = str_extract(link, '[^/]+\\\\.pdf'))"
  },
  {
    "objectID": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ",
    "href": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œfs::dir_create(\"data/realmeter/\")\n\ndownload.file(url = rm_pdf_tbl$link[1], mode='wb', \n              destfile = glue::glue(\"data/realmeter/{rm_pdf_tbl$filename[1]}\"))"
  },
  {
    "objectID": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ-í•¨ìˆ˜",
    "href": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ-í•¨ìˆ˜",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œlink &lt;- rm_pdf_tbl$link[2]\nfilename &lt;- rm_pdf_tbl$filename[2]\n\ndownload_pdfs &lt;- function(link, filename) {\n  download.file(url = link, mode='wb', \n              destfile = glue::glue(\"data/realmeter/{filename}\"))\n}\n\ndownload_pdfs(link, filename)"
  },
  {
    "objectID": "realmeter_metro.html#ì „ì²´-ë‹¤ìš´ë¡œë“œ",
    "href": "realmeter_metro.html#ì „ì²´-ë‹¤ìš´ë¡œë“œ",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œ\nget_reports &lt;- function(page=\"1\"){\n  \n  rm_url &lt;- glue::glue('http://www.realmeter.net/category/pdf/page/{page}/')\n\n  rm_html &lt;- read_html(rm_url)\n  \n  ## PDF ë‹¤ìš´ë¡œë“œ ë§í¬ ---------------\n  rm_links_text &lt;- rm_html |&gt; \n    html_nodes(\"a\") |&gt; \n    html_text()\n  \n  rm_links &lt;- rm_html |&gt; \n    html_nodes(\"a\") |&gt; \n    html_attr(\"href\")\n  \n  rm_pdf_raw &lt;- tibble('text' = rm_links_text, 'link' = rm_links)\n  \n  rm_pdf_tbl &lt;- rm_pdf_raw |&gt; \n    filter(str_detect(text, \"ì£¼ê°„í†µê³„í‘œ\")) |&gt; \n    # mutate(text = str_extract(text, \"\\\\d{2}ë…„\\\\s+\\\\d{1,2}ì›”\\\\s+\\\\d{1}ì£¼\"))  |&gt; \n    mutate(filename = str_extract(link, '[^/]+\\\\.pdf')) |&gt; \n    mutate(link = ifelse(str_detect(link, \"^http\"), link, \n                         glue::glue(\"http://realmeter.cafe24.com{link}\")))\n  \n  return(rm_pdf_tbl)\n}\n\nget_reports(157)\n\npdf_pages &lt;- 1:157\n\npdf_report_raw &lt;- pdf_pages |&gt; \n  enframe(value = \"page\")  |&gt; \n  slice(156) |&gt; \n  mutate(data = map(page, get_reports)) \n\npdf_report_raw |&gt; \n  unnest(data) |&gt; \n  pull(link)\n\npdf_report_raw |&gt; \n  unnest(data) |&gt; \n  mutate(report = walk2(link, filename, download_pdfs))"
  },
  {
    "objectID": "realmeter_metro.html#ë‹¤ìš´ë¡œë“œ-ëª©ë¡",
    "href": "realmeter_metro.html#ë‹¤ìš´ë¡œë“œ-ëª©ë¡",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n2.1 ë‹¤ìš´ë¡œë“œ ëª©ë¡",
    "text": "2.1 ë‹¤ìš´ë¡œë“œ ëª©ë¡\n\nì½”ë“œlibrary(tidyverse)\nlibrary(rvest)\n\n## í•¨ìˆ˜\nget_reports &lt;- function(page=\"1\"){\n  \n  cat(\"\\n----------------------------\\n\", \n      \"     \", page, \" í˜ì´ì§€\",\n      \"\\n----------------------------\\n\")\n  \n  rm_url &lt;- glue::glue('http://www.realmeter.net/category/pdf/page/{page}/')\n\n  rm_html &lt;- read_html(rm_url)\n  \n  ## PDF ë‹¤ìš´ë¡œë“œ ë§í¬ ---------------\n  rm_links_text &lt;- rm_html |&gt; \n    html_nodes(\"a\") |&gt; \n    html_text()\n  \n  rm_links &lt;- rm_html |&gt; \n    html_nodes(\"a\") |&gt; \n    html_attr(\"href\")\n  \n  rm_pdf_raw &lt;- tibble('text' = rm_links_text, 'link' = rm_links)\n  \n  rm_pdf_tbl &lt;- rm_pdf_raw |&gt; \n    filter(str_detect(text, \"ì£¼ê°„í†µê³„í‘œ\")) |&gt; \n    # mutate(text = str_extract(text, \"\\\\d{2}ë…„\\\\s+\\\\d{1,2}ì›”\\\\s+\\\\d{1}ì£¼\"))  |&gt; \n    mutate(filename = str_extract(link, '[^/]+\\\\.pdf')) |&gt; \n    mutate(link = ifelse(str_detect(link, \"^http\"), link, \n                         glue::glue(\"http://realmeter.cafe24.com{link}\")))\n  \n  return(rm_pdf_tbl)\n}\n\n## ë‹¤ìš´ë¡œë“œ í˜ì´ì§€\n\npdf_pages &lt;- 1:158\n\npdf_report_raw &lt;- pdf_pages |&gt; \n  enframe(value = \"page\")  |&gt; \n  mutate(data = map(page, get_reports))\n\npdf_report_tbl &lt;- pdf_report_raw |&gt; \n  select(data) |&gt; \n  mutate(nrow = map_int(data, nrow)) |&gt; \n  filter(nrow !=0) |&gt; \n  unnest(data)\n\npdf_report_tbl |&gt; \n  write_rds(\"data/realmeter/pdf_report_tbl.rds\")"
  },
  {
    "objectID": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ-1",
    "href": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ-1",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n2.2 PDF ë‹¤ìš´ë¡œë“œ",
    "text": "2.2 PDF ë‹¤ìš´ë¡œë“œ\n\nì½”ë“œpdf_report_tbl &lt;- \n  read_rds(\"data/realmeter/pdf_report_tbl.rds\")\n\n\ndownload_pdfs &lt;- function(link, filename) {\n  cat(\"\\n----------------------------\\n\", \n      \"     \", filename, \": íŒŒì¼ëª…\",\n      \"\\n----------------------------\\n\")\n  download.file(url = link, mode='wb', \n              destfile = glue::glue(\"data/realmeter/{filename}\"))\n}\n\npdf_report_tbl |&gt; \n  mutate(pdfs = walk2(link, filename, download_pdfs))"
  },
  {
    "objectID": "realmeter_metro.html#ìœ¤ì„ì—´-ëŒ€í†µë ¹-ì´í›„",
    "href": "realmeter_metro.html#ìœ¤ì„ì—´-ëŒ€í†µë ¹-ì´í›„",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n3.1 ìœ¤ì„ì—´ ëŒ€í†µë ¹ ì´í›„",
    "text": "3.1 ìœ¤ì„ì—´ ëŒ€í†µë ¹ ì´í›„\n\nì½”ë“œlibrary(tidyverse)\nlibrary(fs)\n\npdf_report_tbl &lt;- \n  read_rds(\"data/realmeter/pdf_report_tbl.rds\")\n\nlocal_path_file &lt;- fs::dir_ls(\"data/realmeter/\") |&gt; \n  enframe(value = \"path_file\") |&gt; \n  mutate(filename = path_file(name)) |&gt; \n  select(path_file, filename)\n\n# ë‚ ì§œ ë³€í™˜ í•¨ìˆ˜\nconvert_to_date &lt;- function(d) {\n  year &lt;- as.numeric(sub(\"ë…„.*\", \"\", d)) + 2000  # 2000ì„ ë”í•´ì„œ 4ìë¦¬ ì—°ë„ë¥¼ ë§Œë“­ë‹ˆë‹¤.\n  month &lt;- as.numeric(sub(\".* (\\\\d+)ì›”.*\", \"\\\\1\", d))\n  week &lt;- as.numeric(sub(\".*ì›” (\\\\d+)ì£¼\", \"\\\\1\", d))\n  start_date &lt;- ymd(paste(year, month, 1, sep = \"-\"))\n  \n  return(start_date + days(7 * (week - 1)))\n}\n\n\nyoon_pdf &lt;- pdf_report_tbl |&gt; \n  left_join(local_path_file) |&gt; \n  select(text, path_file, filename) |&gt; \n  mutate(date = str_extract(text, pattern = '(\\\\d+ë…„ \\\\d+ì›” \\\\d+ì£¼)')) |&gt; \n  mutate(date = convert_to_date(date)) |&gt; \n  filter(date &gt; as.Date(\"2022-05-01\"),\n         str_detect(filename, \"ì£¼ê°„í†µê³„í‘œ\")) |&gt; \n  select(date, path_file, filename) |&gt; \n  arrange(date)\n\nyoon_pdf"
  },
  {
    "objectID": "realmeter_metro.html#ì‘ë‹µì-íŠ¹ì„±",
    "href": "realmeter_metro.html#ì‘ë‹µì-íŠ¹ì„±",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n3.2 ì‘ë‹µì íŠ¹ì„±",
    "text": "3.2 ì‘ë‹µì íŠ¹ì„±\n\nì½”ë“œlibrary(pdftools)\nlibrary(openai)\n\nraw_text &lt;- pdftools::pdf_text(pdf = \"data/realmeter/ì£¼ê°„í†µê³„í‘œ22ë…„5ì›”2ì£¼ìµœì¢…_y51w.pdf\")\n\ndemo_text &lt;- raw_text |&gt; \n  enframe() |&gt; \n  mutate(value = str_squish(value)) |&gt; \n  # filter(str_detect(value, \"^(?=.*ë³´ìˆ˜)(?=.*ì¤‘ë„)(?=.*ì§„ë³´)\")) |&gt; \n  filter(str_detect(value, \"ì‘ë‹µì\\\\s+íŠ¹ì„±\")) |&gt; \n  pull(value)\n\nsystem_task &lt;- glue::glue(\"ë‹¹ì‹ ì€ í†µê³„ ë°ì´í„° ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\n                          ë‹¹ì‹ ì—ê²Œ í…ìŠ¤íŠ¸ í˜•ì‹ì˜ í‘œë¡œ ì£¼ì–´ì¡Œì„ ë•Œ,\n                          ì„¤ëª…ì€ ì—†ì´ í…ìŠ¤íŠ¸ë¥¼ í‘œë¡œ ë°”ê¾¸ëŠ” ê²ƒì…ë‹ˆë‹¤.\",\n                          \"í…ìŠ¤íŠ¸ í˜•ì‹ì˜ í‘œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\",\n                          \"ë°ì´í„°ì˜ ìƒë‹¨ì—ëŠ” í‘œì˜ ì¹¼ëŸ¼ëª…ì´ ìœ„ì¹˜í•˜ê³  ì²«ë²ˆì§¸ í˜¹ì€ \n                          ë‘ë²ˆì§¸ ì¹¼ëŸ¼ì€ ë‹¤ì°¨ì›í‘œì˜ ë²”ì£¼(Level)ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆê³ \n                          ë‚˜ë¨¸ì§€ ì…€ì€ ìˆ«ìë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.\")\n                          # \"'ë§Œ18ì„¸ ì´ìƒ 29ì„¸ ì´í•˜'ëŠ” í•˜ë‚˜ì˜ ê°’ì…ë‹ˆë‹¤.\")\n\ngpt_response &lt;- create_chat_completion(\n            # model = \"gpt-3.5-turbo\",\n            model = \"gpt-4\",\n            messages = list(\n              list(\n                \"role\" = \"system\",\n                \"content\" = system_task\n              ),\n              list(\n                \"role\" = \"user\",\n                \"content\" = demo_text\n              )\n            ),\n            temperature = 0,\n            top_p = 1,\n            n = 1,\n            openai_api_key = Sys.getenv(\"OPENAI_API_KEY\"),\n            openai_organization = NULL\n          )\n\n\ngpt_response |&gt; \n  write_rds(\"data/realmeter_deom.rds\")\n\n\n\nì½”ë“œlibrary(tidyverse)\nlibrary(openai)\n\ngpt_response &lt;- \n  read_rds(\"data/realmeter_deom.rds\")\n\nresult_md &lt;- gpt_response |&gt; \n  pluck('choices') |&gt; \n  pull('message.content')  |&gt; \n  str_split(\"\\n\") %&gt;%\n  .[[1]]\n  \nresult_md\n#&gt;  [1] \"| êµ¬ ë¶„ | ì‚¬ë¡€ìˆ˜(ëª…) | ë¹„ìœ¨(%) | ê°€ì¤‘ê°’ ì‚¬ë¡€ìˆ˜(ëª…) | ê°€ì¤‘ê°’ ë¹„ìœ¨(%) | ë°°ìœ¨ |\"\n#&gt;  [2] \"|---|---|---|---|---|---|\"                                                   \n#&gt;  [3] \"| ì „ ì²´ | 2526 | 100.0 | 2526 | 100.0 | 1.00 |\"                              \n#&gt;  [4] \"| ë‚¨ ì | 1566 | 62.0 | 1252 | 49.6 | 0.80 |\"                                \n#&gt;  [5] \"| ì—¬ ì | 960 | 38.0 | 1274 | 50.4 | 1.33 |\"                                 \n#&gt;  [6] \"| ë§Œ18ì„¸ì´ìƒ | 300 | 11.9 | 437 | 17.3 | 1.46 |\"                             \n#&gt;  [7] \"| 2 9 ì„¸ ì´ í•˜ | 292 | 11.6 | 382 | 15.1 | 1.31 |\"                           \n#&gt;  [8] \"| 4 0 ëŒ€ | 404 | 16.0 | 467 | 18.5 | 1.16 |\"                                 \n#&gt;  [9] \"| 5 0 ëŒ€ | 626 | 24.8 | 493 | 19.5 | 0.79 |\"                                 \n#&gt; [10] \"| 6 0 ëŒ€ | 545 | 21.6 | 410 | 16.2 | 0.75 |\"                                 \n#&gt; [11] \"| 7 0 ì„¸ ì´ ìƒ | 359 | 14.2 | 337 | 13.3 | 0.94 |\"                           \n#&gt; [12] \"| ì„œ ìš¸ | 619 | 24.5 | 478 | 18.9 | 0.77 |\"                                  \n#&gt; [13] \"| ì¸ ì²œ / ê²½ ê¸° | 768 | 30.4 | 798 | 31.6 | 1.04 |\"                          \n#&gt; [14] \"| ëŒ€ì „/ì„¸ì¢…/ì¶©ì²­ | 231 | 9.1 | 268 | 10.6 | 1.16 |\"                          \n#&gt; [15] \"| ê°• ì› | 79 | 3.1 | 74 | 2.9 | 0.94 |\"                                      \n#&gt; [16] \"| ë¶€ì‚°/ìš¸ì‚°/ê²½ë‚¨ | 315 | 12.5 | 381 | 15.1 | 1.21 |\"                         \n#&gt; [17] \"| ëŒ€ êµ¬ / ê²½ ë¶ | 223 | 8.8 | 248 | 9.8 | 1.11 |\"                            \n#&gt; [18] \"| ê´‘ ì£¼ / ì „ ë¼ | 257 | 10.2 | 248 | 9.8 | 0.96 |\"                           \n#&gt; [19] \"| ì œ ì£¼ | 34 | 1.3 | 31 | 1.2 | 0.91 |\"\n\n\nmarkdown_to_df &lt;- function(markdown_table) {\n  \n  # Remove rows with only dashes (assuming they're separator rows)\n  markdown_table &lt;- markdown_table[!str_detect(markdown_table, \"^\\\\|[-]+\\\\|\")]\n\n  # Split each line into its components based on the pipe delimiter\n  split_lines &lt;- str_split(markdown_table, \"\\\\|\")\n  \n  # Extract headers and data\n  headers &lt;- str_trim(unlist(split_lines[1]))\n  data &lt;- do.call(rbind, split_lines[-1])\n  \n  # Convert data to dataframe and assign column names\n  df &lt;- as.data.frame(data, stringsAsFactors = FALSE)\n  colnames(df) &lt;- headers\n  \n  return(df)\n}\n\ndemo_raw &lt;- markdown_to_df(result_md)\n\ndeom_tbl &lt;- demo_raw |&gt; \n  janitor::clean_names(ascii= FALSE) |&gt; \n  select(!starts_with(\"x\")) |&gt; \n  set_names(c(\"êµ¬ë¶„\", \"ì™„ë£Œ_ì‚¬ë¡€\", \"ì™„ë£Œ_ë¹„ìœ¨\", \"ê°€ì¤‘_ì‚¬ë¡€\", \"ê°€ì¤‘_ë¹„ìœ¨\", \"ê°€ì¤‘ê°’\")) |&gt; \n  as_tibble() |&gt; \n  mutate_all(str_squish) |&gt; \n  mutate(êµ¬ë¶„ = str_remove_all(êµ¬ë¶„, \"\\\\s+\")) |&gt; \n  mutate(êµ¬ë¶„ = case_when(str_detect(êµ¬ë¶„, \"ë§Œ18ì„¸ì´ìƒ\") ~ \"20ëŒ€\",\n                          str_detect(êµ¬ë¶„, \"29ì„¸ì´í•˜\") ~ \"30ëŒ€\",\n                          TRUE ~ êµ¬ë¶„))\n\ndeom_tbl |&gt; \n  gt::gt()\n\n\n\n\n\nêµ¬ë¶„\n      ì™„ë£Œ_ì‚¬ë¡€\n      ì™„ë£Œ_ë¹„ìœ¨\n      ê°€ì¤‘_ì‚¬ë¡€\n      ê°€ì¤‘_ë¹„ìœ¨\n      ê°€ì¤‘ê°’\n    \n\n\nì „ì²´\n2526\n100.0\n2526\n100.0\n1.00\n\n\në‚¨ì\n1566\n62.0\n1252\n49.6\n0.80\n\n\nì—¬ì\n960\n38.0\n1274\n50.4\n1.33\n\n\n20ëŒ€\n300\n11.9\n437\n17.3\n1.46\n\n\n30ëŒ€\n292\n11.6\n382\n15.1\n1.31\n\n\n40ëŒ€\n404\n16.0\n467\n18.5\n1.16\n\n\n50ëŒ€\n626\n24.8\n493\n19.5\n0.79\n\n\n60ëŒ€\n545\n21.6\n410\n16.2\n0.75\n\n\n70ì„¸ì´ìƒ\n359\n14.2\n337\n13.3\n0.94\n\n\nì„œìš¸\n619\n24.5\n478\n18.9\n0.77\n\n\nì¸ì²œ/ê²½ê¸°\n768\n30.4\n798\n31.6\n1.04\n\n\nëŒ€ì „/ì„¸ì¢…/ì¶©ì²­\n231\n9.1\n268\n10.6\n1.16\n\n\nê°•ì›\n79\n3.1\n74\n2.9\n0.94\n\n\në¶€ì‚°/ìš¸ì‚°/ê²½ë‚¨\n315\n12.5\n381\n15.1\n1.21\n\n\nëŒ€êµ¬/ê²½ë¶\n223\n8.8\n248\n9.8\n1.11\n\n\nê´‘ì£¼/ì „ë¼\n257\n10.2\n248\n9.8\n0.96\n\n\nì œì£¼\n34\n1.3\n31\n1.2\n0.91"
  },
  {
    "objectID": "nbs_metro.html",
    "href": "nbs_metro.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œlibrary(tidyverse)\nlibrary(rvest)\n\nnbs_url &lt;- \"http://nbsurvey.kr/files\"\n\nnbs_bbs &lt;- read_html(nbs_url)\n\nnbs_bbs_raw &lt;- nbs_bbs |&gt; \n  html_nodes('.pagination-large') |&gt; \n  html_nodes('.btn-page') |&gt; \n  html_nodes('a') |&gt; \n  html_attr('href')\n\nnbs_bbs_lists &lt;- c('http://nbsurvey.kr/files?mode=list', nbs_bbs_raw[2:length(nbs_bbs_raw)], 'http://nbsurvey.kr/files?mode=list&board_page=11')\n\nnbs_bbs_lists\n\n\n\n\nì½”ë“œ\npage_html &lt;- read_html(nbs_bbs_list[2])\n\npage_links &lt;- page_html |&gt; \n  html_nodes(\"a\") |&gt; \n  html_attr('href') \n\npage_report_links_raw &lt;- page_links[str_detect(page_links, \"vid=\")] \n\npage_report_links &lt;- page_report_links_raw[!is.na(page_report_links_raw)]\n\npage_report_links\n\n\n\n\nì½”ë“œlibrary(httr)\n\nreport_html &lt;- read_html(page_report_links[1])\n\nreport_filename &lt;- report_html |&gt; \n  html_nodes('a.file-download') |&gt; \n  html_text() |&gt; \n  str_extract(pattern = \"\\\\((NBS)\\\\)_\\\\d+ì°¨_ê²°ê³¼\\\\.zip\")\n\n\nreport_download_url &lt;- glue::glue(\"http://nbsurvey.kr/wp-content/plugins/mangboard/includes/mb-file.php\",\n                                  \"?path=MjAyMy8wMy8zMC9GMjc1XyhOQlMpXzkz7LCoX%2BqysOqzvC56aXA%3D\",\n                                  \"&type=download\",\n                                  \"&file_name={I(report_filename)}\")\n\n# fs::dir_create(\"data/NBS\")\n\ndownload.file(report_download_url, mode='wb', destfile = glue::glue(\"data/NBS/{report_filename}\"))"
  },
  {
    "objectID": "nbs_metro.html#ìë£Œì‹¤-ëª©ë¡",
    "href": "nbs_metro.html#ìë£Œì‹¤-ëª©ë¡",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œlibrary(tidyverse)\nlibrary(rvest)\n\nnbs_url &lt;- \"http://nbsurvey.kr/files\"\n\nnbs_bbs &lt;- read_html(nbs_url)\n\nnbs_bbs_raw &lt;- nbs_bbs |&gt; \n  html_nodes('.pagination-large') |&gt; \n  html_nodes('.btn-page') |&gt; \n  html_nodes('a') |&gt; \n  html_attr('href')\n\nnbs_bbs_lists &lt;- c('http://nbsurvey.kr/files?mode=list', nbs_bbs_raw[2:length(nbs_bbs_raw)], 'http://nbsurvey.kr/files?mode=list&board_page=11')\n\nnbs_bbs_lists"
  },
  {
    "objectID": "nbs_metro.html#í˜ì´ì§€ë³„-ë³´ê³ ì„œ-ë§í¬",
    "href": "nbs_metro.html#í˜ì´ì§€ë³„-ë³´ê³ ì„œ-ë§í¬",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œ\npage_html &lt;- read_html(nbs_bbs_list[2])\n\npage_links &lt;- page_html |&gt; \n  html_nodes(\"a\") |&gt; \n  html_attr('href') \n\npage_report_links_raw &lt;- page_links[str_detect(page_links, \"vid=\")] \n\npage_report_links &lt;- page_report_links_raw[!is.na(page_report_links_raw)]\n\npage_report_links"
  },
  {
    "objectID": "nbs_metro.html#ë³´ê³ ì„œ-íŒŒì¼",
    "href": "nbs_metro.html#ë³´ê³ ì„œ-íŒŒì¼",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œlibrary(httr)\n\nreport_html &lt;- read_html(page_report_links[1])\n\nreport_filename &lt;- report_html |&gt; \n  html_nodes('a.file-download') |&gt; \n  html_text() |&gt; \n  str_extract(pattern = \"\\\\((NBS)\\\\)_\\\\d+ì°¨_ê²°ê³¼\\\\.zip\")\n\n\nreport_download_url &lt;- glue::glue(\"http://nbsurvey.kr/wp-content/plugins/mangboard/includes/mb-file.php\",\n                                  \"?path=MjAyMy8wMy8zMC9GMjc1XyhOQlMpXzkz7LCoX%2BqysOqzvC56aXA%3D\",\n                                  \"&type=download\",\n                                  \"&file_name={I(report_filename)}\")\n\n# fs::dir_create(\"data/NBS\")\n\ndownload.file(report_download_url, mode='wb', destfile = glue::glue(\"data/NBS/{report_filename}\"))"
  },
  {
    "objectID": "nbs_metro.html#í•œ-í˜ì´ì§€",
    "href": "nbs_metro.html#í•œ-í˜ì´ì§€",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n2.1 í•œ í˜ì´ì§€",
    "text": "2.1 í•œ í˜ì´ì§€\n\nì½”ë“œ\n# for(i in 1:length(page_report_links)) {\n#   cat(\"\\n\", i, \"----------\", page_report_links[i], \"\\n\")\n#   download_zip_report(page_report_links[i])\n# }\n\ndownload_zip_report &lt;- function(page_report_link) {\n  \n  report_html &lt;- read_html(page_report_link)\n\n  report_filename &lt;- report_html |&gt; \n    html_nodes('a.file-download') |&gt; \n    html_text() |&gt; \n    str_extract(pattern = \"\\\\((NBS)\\\\)_\\\\d+ì°¨_ê²°ê³¼\\\\.zip\")\n  \n  \n  report_download_url &lt;- glue::glue(\"http://nbsurvey.kr/wp-content/plugins/mangboard/includes/mb-file.php\",\n                                    \"?path=MjAyMy8wMy8zMC9GMjc1XyhOQlMpXzkz7LCoX%2BqysOqzvC56aXA%3D\",\n                                    \"&type=download\",\n                                    \"&file_name={I(report_filename)}\")\n  \n  download.file(report_download_url, mode='wb', destfile = glue::glue(\"data/NBS/{report_filename}\"))\n}\n\nwalk(page_report_links, download_zip_report)"
  },
  {
    "objectID": "nbs_metro.html#ì  ì²´-í˜ì´ì§€",
    "href": "nbs_metro.html#ì  ì²´-í˜ì´ì§€",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n2.2 ì  ì²´ í˜ì´ì§€",
    "text": "2.2 ì  ì²´ í˜ì´ì§€\n\nì½”ë“œ\nnbs_bbs_lists\n\nget_page_links &lt;- function(nbs_bbs_list) {\n  \n  page_html &lt;- read_html(nbs_bbs_list)\n\n  page_links &lt;- page_html |&gt; \n    html_nodes(\"a\") |&gt; \n    html_attr('href') \n  \n  page_report_links_raw &lt;- page_links[str_detect(page_links, \"vid=\")] \n  \n  page_report_links &lt;- page_report_links_raw[!is.na(page_report_links_raw)]\n  \n  page_report_links\n}\n\nnbs_bbs_tbl &lt;- nbs_bbs_lists |&gt; \n  enframe(value = \"page_url\") |&gt; \n  mutate(data = map(page_url, get_page_links))\n\nnbs_bbs_tbl |&gt; \n  unnest(data)\n\n\ndownload_zip_report &lt;- function(page_report_link) {\n  \n  report_html &lt;- read_html(page_report_link)\n\n  report_filename &lt;- report_html |&gt; \n    html_nodes('a.file-download') |&gt; \n    html_text() |&gt; \n    str_extract(pattern = \"\\\\((NBS)\\\\)_\\\\d+ì°¨_ê²°ê³¼\\\\.zip\")\n  \n  \n  report_download_url &lt;- glue::glue(\"http://nbsurvey.kr/wp-content/plugins/mangboard/includes/mb-file.php\",\n                                    \"?path=MjAyMy8wMy8zMC9GMjc1XyhOQlMpXzkz7LCoX%2BqysOqzvC56aXA%3D\",\n                                    \"&type=download\",\n                                    \"&file_name={I(report_filename)}\")\n  \n  download.file(report_download_url, mode='wb', destfile = glue::glue(\"data/NBS/{report_filename}\"))\n}\n\nwalk(page_report_links, download_zip_report)"
  },
  {
    "objectID": "gallop_metro.html",
    "href": "gallop_metro.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "1 ë°ì´í„°"
  },
  {
    "objectID": "km_BitGPT.html#ì›ë³¸-ë°ì´í„°",
    "href": "km_BitGPT.html#ì›ë³¸-ë°ì´í„°",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "í–‰ì •ì•ˆì „ë¶€ ì£¼ë¯¼ë“±ë¡ ì¸êµ¬ ë° ì„¸ëŒ€í˜„í™© ì›¹ì‚¬ì´íŠ¸ì—ì„œ ê´‘ëª…ì‹œ ìµœê·¼ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.\n\nì½”ë“œlibrary(tidyverse)\nlibrary(readxl)\n\nraw_data &lt;- read_excel(\"data/202307_202307_ì—°ë ¹ë³„ì¸êµ¬í˜„í™©_ì›”ê°„.xlsx\", skip =3) \n\nraw_data |&gt; \n  janitor::clean_names(ascii = FALSE) |&gt; \n  select(1:10) |&gt; \n  head() |&gt; \n  gt::gt()\n\n\n\n\n\ní–‰ì •ê¸°ê´€ì½”ë“œ\n      í–‰ì •ê¸°ê´€\n      ì´_ì¸êµ¬ìˆ˜\n      ì—°ë ¹êµ¬ê°„ì¸êµ¬ìˆ˜_4\n      x0ì„¸_5\n      x1ì„¸_6\n      x2ì„¸_7\n      x3ì„¸_8\n      x4ì„¸_9\n      x5ì„¸_10\n    \n\n\n4121000000\nê²½ê¸°ë„ ê²½ê¸°ë„ ê´‘ëª…ì‹œ\n280,986\n280,986\n1,373\n1,470\n1,582\n1,588\n1,729\n1,924\n\n\n4121051000\nê²½ê¸°ë„ ê´‘ëª…ì‹œ ê´‘ëª…1ë™\n56\n56\n0\n0\n0\n0\n0\n0\n\n\n4121052000\nê²½ê¸°ë„ ê´‘ëª…ì‹œ ê´‘ëª…2ë™\n2,953\n2,953\n9\n7\n11\n5\n5\n8\n\n\n4121054000\nê²½ê¸°ë„ ê´‘ëª…ì‹œ ê´‘ëª…3ë™\n9,869\n9,869\n29\n21\n20\n20\n23\n24\n\n\n4121055000\nê²½ê¸°ë„ ê´‘ëª…ì‹œ ê´‘ëª…4ë™\n8,114\n8,114\n35\n29\n44\n27\n28\n35\n\n\n4121056000\nê²½ê¸°ë„ ê´‘ëª…ì‹œ ê´‘ëª…5ë™\n12,206\n12,206\n41\n40\n64\n51\n49\n60"
  },
  {
    "objectID": "km_BitGPT.html#ê°€ê³µë°ì´í„°",
    "href": "km_BitGPT.html#ê°€ê³µë°ì´í„°",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œlibrary(tidyverse)\n\npop_tbl &lt;- \n  read_rds(\"data/kwangmyung_pop.rds\")\n\npop_tbl |&gt; \n  head() |&gt; \n  gt::gt()\n\n\n\n\n\nì‹œì \n      í–‰ì •ë™\n      ì„±ë³„\n      ë‚˜ì´\n      ì¸êµ¬ìˆ˜\n    \n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n0\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n1\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n2\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n3\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n4\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n5\n0"
  },
  {
    "objectID": "km_BitGPT.html#ì±—gpt-ë°ì´í„°-ë³€í™˜",
    "href": "km_BitGPT.html#ì±—gpt-ë°ì´í„°-ë³€í™˜",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ë°ì´í„°ë¥¼ ê°€ê³µí•œ í›„ ì±—GPT Code Interpreter ë¶„ì„ìš©ìœ¼ë¡œ ë³€í™˜ì‹œì¼œ ë°ì´í„°ë¥¼ ì „ì†¡í•œë‹¤.\n\nì½”ë“œpop_tbl |&gt; \n  write_csv(\"data/kwangmyung_pop.csv\")\n\n\n\n\n\n\nCSV íŒŒì¼ ë‹¤ìš´ë¡œë“œ"
  },
  {
    "objectID": "km_BitGPT.html#ì—°ë„ë³„-ì¸êµ¬ìˆ˜",
    "href": "km_BitGPT.html#ì—°ë„ë³„-ì¸êµ¬ìˆ˜",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n4.1 ì—°ë„ë³„ ì¸êµ¬ìˆ˜",
    "text": "4.1 ì—°ë„ë³„ ì¸êµ¬ìˆ˜\n\nì½”ë“œlibrary(tidyverse)\n\npop_tbl &lt;- \n  read_rds(\"data/kwangmyung_pop.rds\")\n\npop_tbl |&gt; \n  mutate(ì‹œì  = ymd(ì‹œì )) |&gt; \n  mutate(ì—°ë„ = year(ì‹œì )) |&gt; \n  group_by(ì—°ë„) |&gt; \n  summarise(ì¸êµ¬ìˆ˜ = sum(ì¸êµ¬ìˆ˜)) |&gt; \n  ggplot(aes(x=ì—°ë„, y=ì¸êµ¬ìˆ˜)) +\n    geom_line(color=\"skyblue\", size=1.5) +\n    geom_point(color=\"blue\", size=3) +\n    labs(title=\"ê´‘ëª…ì‹œ ì¸êµ¬ìˆ˜ ë³€í™”\", x=\"\", y=\"ì¸êµ¬ìˆ˜(ëª…)\",\n         caption = \"ë°ì´í„° ì¶œì²˜: í–‰ì •ì•ˆì „ë¶€ ì£¼ë¯¼ë“±ë¡ ì¸êµ¬ ë° ì„¸ëŒ€í˜„í™©\") +\n    theme_minimal() +\n    scale_y_continuous(labels = scales::comma)"
  },
  {
    "objectID": "km_BitGPT.html#ì—°ë„ë³„-ì¸êµ¬ìˆ˜-1",
    "href": "km_BitGPT.html#ì—°ë„ë³„-ì¸êµ¬ìˆ˜-1",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n4.2 ì—°ë„ë³„ ì¸êµ¬ìˆ˜",
    "text": "4.2 ì—°ë„ë³„ ì¸êµ¬ìˆ˜\n\nì½”ë“œlibrary(tidyverse)\n\npop_tbl &lt;- \n  read_rds(\"data/kwangmyung_pop.rds\")\n\npop_tbl |&gt; \n  mutate(ì‹œì  = ymd(ì‹œì )) |&gt; \n  mutate(ì—°ë„ = year(ì‹œì )) |&gt; \n  group_by(ì—°ë„) |&gt; \n  summarise(ì¸êµ¬ìˆ˜ = sum(ì¸êµ¬ìˆ˜)) |&gt; \n  ggplot(aes(x=ì—°ë„, y=ì¸êµ¬ìˆ˜)) +\n    geom_line(color=\"skyblue\", size=1.5) +\n    geom_point(color=\"blue\", size=3) +\n    labs(title=\"ê´‘ëª…ì‹œ ì¸êµ¬ìˆ˜ ë³€í™”\", x=\"\", y=\"ì¸êµ¬ìˆ˜(ëª…)\",\n         caption = \"ë°ì´í„° ì¶œì²˜: í–‰ì •ì•ˆì „ë¶€ ì£¼ë¯¼ë“±ë¡ ì¸êµ¬ ë° ì„¸ëŒ€í˜„í™©\") +\n    theme_minimal() +\n    scale_y_continuous(labels = scales::comma)"
  },
  {
    "objectID": "km_BitGPT.html#ë™ë³„-ì¸êµ¬ìˆ˜",
    "href": "km_BitGPT.html#ë™ë³„-ì¸êµ¬ìˆ˜",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n4.3 ë™ë³„ ì¸êµ¬ìˆ˜",
    "text": "4.3 ë™ë³„ ì¸êµ¬ìˆ˜\n\nì½”ë“œ\npop_tbl |&gt; \n  mutate(ì‹œì  = ymd(ì‹œì )) |&gt; \n  mutate(ì—°ë„ = year(ì‹œì )) |&gt; \n  group_by(ì—°ë„, í–‰ì •ë™) |&gt; \n  summarise(ì¸êµ¬ìˆ˜ = sum(ì¸êµ¬ìˆ˜)) |&gt; \n  ggplot(aes(x=ì—°ë„, y=ì¸êµ¬ìˆ˜, color = í–‰ì •ë™, group=í–‰ì •ë™)) +\n    geom_line(size=1.5) +\n    geom_point(color=\"blue\", size=3) +\n    labs(title=\"ê´‘ëª…ì‹œ ë™ë³„ ì¸êµ¬ìˆ˜ ë³€í™”\", x=\"\", y=\"ì¸êµ¬ìˆ˜(ëª…)\",\n         caption = \"ë°ì´í„° ì¶œì²˜: í–‰ì •ì•ˆì „ë¶€ ì£¼ë¯¼ë“±ë¡ ì¸êµ¬ ë° ì„¸ëŒ€í˜„í™©\") +\n    theme_minimal() +\n    scale_y_continuous(labels = scales::comma)"
  },
  {
    "objectID": "km_BitGPT.html#ìœ ê¶Œì-ë¹„ìœ¨-1",
    "href": "km_BitGPT.html#ìœ ê¶Œì-ë¹„ìœ¨-1",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n4.4 ìœ ê¶Œì ë¹„ìœ¨",
    "text": "4.4 ìœ ê¶Œì ë¹„ìœ¨\n\nì½”ë“œpop_tbl |&gt; \n  mutate(ì‹œì  = ymd(ì‹œì )) |&gt; \n  mutate(ì—°ë„ = year(ì‹œì )) |&gt; \n  mutate(ìœ ê¶Œì = ifelse(ë‚˜ì´ &gt;=18, \"ìœ ê¶Œì\", \"ë¹„ìœ ê¶Œì\"),\n         ìœ ê¶Œì = factor(ìœ ê¶Œì, levels = c(\"ë¹„ìœ ê¶Œì\", 'ìœ ê¶Œì'))) |&gt; \n  group_by(ìœ ê¶Œì) |&gt; \n  summarise(ì¸êµ¬ìˆ˜ = sum(ì¸êµ¬ìˆ˜)) |&gt; \n  ggplot(aes(x=\"\", y=ì¸êµ¬ìˆ˜, fill = ìœ ê¶Œì)) +\n    geom_bar(width = 1, stat = \"identity\") +\n    coord_polar(\"y\")  +\n    labs(title=\"ê´‘ëª…ì‹œ ìœ ê¶Œì ë¹„ìœ¨\",\n         caption = \"ë°ì´í„° ì¶œì²˜: í–‰ì •ì•ˆì „ë¶€ ì£¼ë¯¼ë“±ë¡ ì¸êµ¬ ë° ì„¸ëŒ€í˜„í™©\",\n         fill = \"êµ¬ë¶„\") +\n    theme_minimal() +\n    scale_y_continuous(labels = scales::comma) +\n    scale_fill_manual(values = c(ìœ ê¶Œì = \"blue\", ë¹„ìœ ê¶Œì=\"red\"))"
  },
  {
    "objectID": "km_BitGPT.html#ë‚´ë¦¼ì°¨ìˆœ-ìœ ê¶Œììˆ˜",
    "href": "km_BitGPT.html#ë‚´ë¦¼ì°¨ìˆœ-ìœ ê¶Œììˆ˜",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n4.5 ë‚´ë¦¼ì°¨ìˆœ ìœ ê¶Œììˆ˜",
    "text": "4.5 ë‚´ë¦¼ì°¨ìˆœ ìœ ê¶Œììˆ˜\n\nì½”ë“œpop_tbl |&gt; \n  mutate(ì‹œì  = ymd(ì‹œì )) |&gt; \n  mutate(ì—°ë„ = year(ì‹œì )) |&gt; \n  filter(ì—°ë„ == max(ì—°ë„)) |&gt; \n  mutate(ìœ ê¶Œì = ifelse(ë‚˜ì´ &gt;=18, \"ìœ ê¶Œì\", \"ë¹„ìœ ê¶Œì\"),\n         ìœ ê¶Œì = factor(ìœ ê¶Œì, levels = c(\"ë¹„ìœ ê¶Œì\", 'ìœ ê¶Œì'))) |&gt; \n  group_by(í–‰ì •ë™, ìœ ê¶Œì) |&gt; \n  summarise(ì¸êµ¬ìˆ˜ = sum(ì¸êµ¬ìˆ˜)) |&gt; \n  mutate(ìœ ê¶Œìë¹„ìœ¨ = ì¸êµ¬ìˆ˜/sum(ì¸êµ¬ìˆ˜)) |&gt; \n  ungroup() |&gt; \n    \n  # pivot_wider(names_from = ìœ ê¶Œì, values_from = ì¸êµ¬ìˆ˜) |&gt; \n  # mutate(ìœ ê¶Œìë¹„ìœ¨ = ìœ ê¶Œì/(ë¹„ìœ ê¶Œì+ìœ ê¶Œì)) |&gt; \n  # arrange(desc(ìœ ê¶Œìë¹„ìœ¨))\n\n  # ì‹œê°í™” -----------------\n  ggplot(aes(x=fct_reorder2(í–‰ì •ë™, ìœ ê¶Œì, ìœ ê¶Œìë¹„ìœ¨), y=ìœ ê¶Œìë¹„ìœ¨, fill = ìœ ê¶Œì)) +\n    geom_col() +\n    coord_flip() +\n    labs(title=\"ê´‘ëª…ì‹œ ë™ë³„ ìœ ê¶Œì ë¹„ìœ¨\",\n         caption = \"ë°ì´í„° ì¶œì²˜: í–‰ì •ì•ˆì „ë¶€ ì£¼ë¯¼ë“±ë¡ ì¸êµ¬ ë° ì„¸ëŒ€í˜„í™©\",\n         fill = \"êµ¬ë¶„\",\n         x = \"\") +\n    theme_minimal() +\n    scale_y_continuous(labels = scales::percent) +\n    scale_fill_manual(values = c(ìœ ê¶Œì = \"blue\", ë¹„ìœ ê¶Œì=\"red\")) +\n    theme(legend.position = \"top\")"
  },
  {
    "objectID": "minju_party.html",
    "href": "minju_party.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œlibrary(gt)\nlibrary(gtExtras)\nlibrary(tidyverse)\n\n# Creating the tibble using tribble\nmage_raw &lt;- tribble(\n  ~`ì—°ë ¹`, ~ë¹„ìœ¨,\n  \"10ëŒ€í›„ë°˜\", \"0.1%\",\n  \"20_24\", \"1.7%\",\n  \"25_29\", \"4.2%\",\n  \"30_34\", \"5.3%\",\n  \"35_39\", \"6.3%\",\n  \"40_44\", \"9.8%\",\n  \"45_49\", \"12.2%\",\n  \"50_54\", \"15.8%\",\n  \"55_59\", \"13.8%\",\n  \"60_64\", \"12.8%\",\n  \"65_69\", \"8.1%\",\n  \"70+\", \"10.0%\"\n)\n\nmage_tbl &lt;- mage_raw |&gt; \n  mutate(ë¹„ìœ¨ = parse_number(ë¹„ìœ¨)/100) |&gt; \n  mutate(ë‹¹ì›ìˆ˜ = ë¹„ìœ¨ * 2454332)\n\nmage_tbl |&gt; \n  gt::gt() |&gt; \n  fmt_percent(columns = ë¹„ìœ¨, decimals = 1) |&gt; \n  fmt_integer(columns = ë‹¹ì›ìˆ˜) |&gt; \n  cols_align(\"center\") |&gt; \n  ## í‘œ ì „ì²´ í•©ê³„ -------------- -----------------------\n  grand_summary_rows(\n    columns = ë‹¹ì›ìˆ˜,\n    fns =  list(label = \"í•©ê³„\", fn = \"sum\"),\n    fmt = ~ fmt_integer(.),\n    side = \"top\"\n  )  |&gt; \n  grand_summary_rows(\n    columns = ë¹„ìœ¨,\n    fns =  list(label = \"í•©ê³„\", fn = \"sum\"),\n    fmt = ~ fmt_percent(., decimals = 0),\n    side = \"top\"\n  ) |&gt; \n  gt_theme_538()\n\n\n\n\nì½”ë“œ# tribbleì„ ì‚¬ìš©í•˜ì—¬ tibble ìƒì„±\nsido_raw &lt;- tribble(\n  ~`ê¶Œë¦¬ë‹¹ì›`, ~`ë‹¹ì›ìˆ˜`, ~`ë¹„ì¤‘`, ~`ì„ ê±°ì¸ìˆ˜`, ~`ë¹„ì¤‘`,\n  \"ì„œìš¸\", 444775, \"18.1%\", 8378339, \"18.9%\",\n  \"ë¶€ì‚°\", 54950, \"2.2%\", 2916832, \"6.6%\",\n  \"ëŒ€êµ¬\", 21011, \"0.9%\", 2044579, \"4.6%\",\n  \"ì¸ì²œ\", 88387, \"3.6%\", 2534338, \"5.7%\",\n  \"ê´‘ì£¼\", 185858, \"7.6%\", 1206886, \"2.7%\",\n  \"ëŒ€ì „\", 67016, \"2.7%\", 1233557, \"2.8%\",\n  \"ìš¸ì‚°\", 36175, \"1.5%\", 941189, \"2.1%\",\n  \"ì„¸ì¢…\", 12459, \"0.5%\", 292259, \"0.7%\",\n  \"ê²½ê¸°\", 500892, \"20.4%\", 11497206, \"26.0%\",\n  \"ê°•ì›\", 61088, \"2.5%\", 1336080, \"3.0%\",\n  \"ì¶©ë¶\", 67330, \"2.7%\", 1368779, \"3.1%\",\n  \"ì¶©ë‚¨\", 121512, \"5.0%\", 1803096, \"4.1%\",\n  \"ì „ë¶\", 326518, \"13.3%\", 1532133, \"3.5%\",\n  \"ì „ë‚¨\", 304151, \"12.4%\", 1580098, \"3.6%\",\n  \"ê²½ë¶\", 22126, \"0.9%\", 2268707, \"5.1%\",\n  \"ê²½ë‚¨\", 77845, \"3.2%\", 2804287, \"6.3%\",\n  \"ì œì£¼\", 60667, \"2.5%\", 565084, \"1.3%\"\n)\n\nsido_raw |&gt; \n  janitor::clean_names(ascii = FALSE) |&gt; \n  select(ì‹œë„ëª… = ê¶Œë¦¬ë‹¹ì›, ë‹¹ì›ìˆ˜, ì„ ê±°ì¸ìˆ˜) |&gt; \n  pivot_longer(ë‹¹ì›ìˆ˜:ì„ ê±°ì¸ìˆ˜, names_to = \"êµ¬ë¶„\", values_to = \"ì¸êµ¬ìˆ˜\") |&gt; \n  group_by(êµ¬ë¶„) |&gt; \n  mutate(ë¹„ìœ¨ = ì¸êµ¬ìˆ˜/sum(ì¸êµ¬ìˆ˜)) |&gt; \n  # ì‹œê°í™”\n  ggplot(aes(x = fct_reorder(ì‹œë„ëª…, -ë¹„ìœ¨), y = ë¹„ìœ¨, color = êµ¬ë¶„, group = êµ¬ë¶„)) +\n    geom_point() +\n    geom_line()\n  \n\n\n\n\nì½”ë“œage_raw &lt;- readxl::read_excel(\"data/í˜ì‹ ì•ˆ_202307_202307_ì—°ë ¹ë³„_ì›”ê°„.xlsx\", skip = 3)\n\nmale_tbl&lt;- age_raw |&gt; \n  janitor::clean_names(ascii = FALSE)  |&gt; \n  select(c(\"í–‰ì •ê¸°ê´€ì½”ë“œ\", \"í–‰ì •ê¸°ê´€\", \"ë‚¨_ì¸êµ¬ìˆ˜\", \"ì—°ë ¹êµ¬ê°„ì¸êµ¬ìˆ˜_4\", \n          \"x0_4ì„¸_5\", \"x5_9ì„¸_6\", \"x10_14ì„¸_7\", \"x15_19ì„¸_8\", \"x20_24ì„¸_9\", \n          \"x25_29ì„¸_10\", \"x30_34ì„¸_11\", \"x35_39ì„¸_12\", \"x40_44ì„¸_13\", \n          \"x45_49ì„¸_14\", \"x50_54ì„¸_15\", \"x55_59ì„¸_16\", \"x60_64ì„¸_17\", \n          \"x65_69ì„¸_18\", \"x70_74ì„¸_19\", \"x75_79ì„¸_20\", \"x80_84ì„¸_21\", \n          \"x85_89ì„¸_22\", \"x90_94ì„¸_23\", \"x95_99ì„¸_24\", \"x100ì„¸_ì´ìƒ_25\")) |&gt; \n  pivot_longer(starts_with(\"x\"), names_to = \"ì—°ë ¹\", values_to = \"ì¸êµ¬ìˆ˜\") |&gt; \n  mutate(ì„±ë³„ = \"ë‚¨\") |&gt; \n  select(í–‰ì •ê¸°ê´€, ì„±ë³„, ì—°ë ¹, ì¸êµ¬ìˆ˜)\n  \n\nfemale_tbl &lt;- age_raw |&gt; \n  janitor::clean_names(ascii = FALSE)  |&gt; \n  select(c(\"í–‰ì •ê¸°ê´€ì½”ë“œ\", \"í–‰ì •ê¸°ê´€\", \"ì—¬_ì¸êµ¬ìˆ˜\", \"ì—°ë ¹êµ¬ê°„ì¸êµ¬ìˆ˜_27\", \n           \"x0_4ì„¸_28\", \"x5_9ì„¸_29\", \"x10_14ì„¸_30\", \"x15_19ì„¸_31\", \n           \"x20_24ì„¸_32\", \"x25_29ì„¸_33\", \"x30_34ì„¸_34\", \"x35_39ì„¸_35\", \n           \"x40_44ì„¸_36\", \"x45_49ì„¸_37\", \"x50_54ì„¸_38\", \"x55_59ì„¸_39\", \n           \"x60_64ì„¸_40\", \"x65_69ì„¸_41\", \"x70_74ì„¸_42\", \"x75_79ì„¸_43\", \n           \"x80_84ì„¸_44\", \"x85_89ì„¸_45\", \"x90_94ì„¸_46\", \"x95_99ì„¸_47\", \"x100ì„¸_ì´ìƒ_48\")) |&gt; \n  pivot_longer(starts_with(\"x\"), names_to = \"ì—°ë ¹\", values_to = \"ì¸êµ¬ìˆ˜\") |&gt; \n  mutate(ì„±ë³„ = \"ì—¬\") |&gt; \n  select(í–‰ì •ê¸°ê´€, ì„±ë³„, ì—°ë ¹, ì¸êµ¬ìˆ˜)\n\nage_tbl &lt;- bind_rows(male_tbl, female_tbl) |&gt; \n  filter(!str_detect(í–‰ì •ê¸°ê´€, \"ì „êµ­\")) |&gt; \n  mutate(ì—°ë ¹ = str_extract(ì—°ë ¹, '(\\\\d{1,2}_\\\\d{1,2})'))  |&gt; \n  mutate(ì—°ë ¹ëŒ€ = case_when(ì—°ë ¹ %in% c(\"0_4\", \"5_9\", \"10_14\", \"15_19\") ~ \"-19\",\n                            ì—°ë ¹ %in% c(\"70_74\", \"75_79\", \"80_84\", \"85_89\", \"90_94\", \"95_99\") ~ \"70+\",\n                              is.na(ì—°ë ¹) ~ \"70+\",\n                              TRUE ~ ì—°ë ¹)) |&gt; \n  mutate(ì¸êµ¬ìˆ˜ = parse_number(ì¸êµ¬ìˆ˜))\n\nage_tbl |&gt;\n  write_rds(\"data/í˜ì‹ ì•ˆ_2023ë…„_ì—°ë ¹ì¸êµ¬ìˆ˜.rds\")"
  },
  {
    "objectID": "minju_party.html#ì‹œë„ë³„",
    "href": "minju_party.html#ì‹œë„ë³„",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œ# tribbleì„ ì‚¬ìš©í•˜ì—¬ tibble ìƒì„±\nsido_raw &lt;- tribble(\n  ~`ê¶Œë¦¬ë‹¹ì›`, ~`ë‹¹ì›ìˆ˜`, ~`ë¹„ì¤‘`, ~`ì„ ê±°ì¸ìˆ˜`, ~`ë¹„ì¤‘`,\n  \"ì„œìš¸\", 444775, \"18.1%\", 8378339, \"18.9%\",\n  \"ë¶€ì‚°\", 54950, \"2.2%\", 2916832, \"6.6%\",\n  \"ëŒ€êµ¬\", 21011, \"0.9%\", 2044579, \"4.6%\",\n  \"ì¸ì²œ\", 88387, \"3.6%\", 2534338, \"5.7%\",\n  \"ê´‘ì£¼\", 185858, \"7.6%\", 1206886, \"2.7%\",\n  \"ëŒ€ì „\", 67016, \"2.7%\", 1233557, \"2.8%\",\n  \"ìš¸ì‚°\", 36175, \"1.5%\", 941189, \"2.1%\",\n  \"ì„¸ì¢…\", 12459, \"0.5%\", 292259, \"0.7%\",\n  \"ê²½ê¸°\", 500892, \"20.4%\", 11497206, \"26.0%\",\n  \"ê°•ì›\", 61088, \"2.5%\", 1336080, \"3.0%\",\n  \"ì¶©ë¶\", 67330, \"2.7%\", 1368779, \"3.1%\",\n  \"ì¶©ë‚¨\", 121512, \"5.0%\", 1803096, \"4.1%\",\n  \"ì „ë¶\", 326518, \"13.3%\", 1532133, \"3.5%\",\n  \"ì „ë‚¨\", 304151, \"12.4%\", 1580098, \"3.6%\",\n  \"ê²½ë¶\", 22126, \"0.9%\", 2268707, \"5.1%\",\n  \"ê²½ë‚¨\", 77845, \"3.2%\", 2804287, \"6.3%\",\n  \"ì œì£¼\", 60667, \"2.5%\", 565084, \"1.3%\"\n)\n\nsido_raw |&gt; \n  janitor::clean_names(ascii = FALSE) |&gt; \n  select(ì‹œë„ëª… = ê¶Œë¦¬ë‹¹ì›, ë‹¹ì›ìˆ˜, ì„ ê±°ì¸ìˆ˜) |&gt; \n  pivot_longer(ë‹¹ì›ìˆ˜:ì„ ê±°ì¸ìˆ˜, names_to = \"êµ¬ë¶„\", values_to = \"ì¸êµ¬ìˆ˜\") |&gt; \n  group_by(êµ¬ë¶„) |&gt; \n  mutate(ë¹„ìœ¨ = ì¸êµ¬ìˆ˜/sum(ì¸êµ¬ìˆ˜)) |&gt; \n  # ì‹œê°í™”\n  ggplot(aes(x = fct_reorder(ì‹œë„ëª…, -ë¹„ìœ¨), y = ë¹„ìœ¨, color = êµ¬ë¶„, group = êµ¬ë¶„)) +\n    geom_point() +\n    geom_line()"
  },
  {
    "objectID": "minju_party.html#ë‹¹ì›-í†µê³„",
    "href": "minju_party.html#ë‹¹ì›-í†µê³„",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œlibrary(gt)\nlibrary(gtExtras)\nlibrary(tidyverse)\n\n# Creating the tibble using tribble\nmage_raw &lt;- tribble(\n  ~`ì—°ë ¹`, ~ë¹„ìœ¨,\n  \"10ëŒ€í›„ë°˜\", \"0.1%\",\n  \"20_24\", \"1.7%\",\n  \"25_29\", \"4.2%\",\n  \"30_34\", \"5.3%\",\n  \"35_39\", \"6.3%\",\n  \"40_44\", \"9.8%\",\n  \"45_49\", \"12.2%\",\n  \"50_54\", \"15.8%\",\n  \"55_59\", \"13.8%\",\n  \"60_64\", \"12.8%\",\n  \"65_69\", \"8.1%\",\n  \"70+\", \"10.0%\"\n)\n\nmage_tbl &lt;- mage_raw |&gt; \n  mutate(ë¹„ìœ¨ = parse_number(ë¹„ìœ¨)/100) |&gt; \n  mutate(ë‹¹ì›ìˆ˜ = ë¹„ìœ¨ * 2454332)\n\nmage_tbl |&gt; \n  gt::gt() |&gt; \n  fmt_percent(columns = ë¹„ìœ¨, decimals = 1) |&gt; \n  fmt_integer(columns = ë‹¹ì›ìˆ˜) |&gt; \n  cols_align(\"center\") |&gt; \n  ## í‘œ ì „ì²´ í•©ê³„ -------------- -----------------------\n  grand_summary_rows(\n    columns = ë‹¹ì›ìˆ˜,\n    fns =  list(label = \"í•©ê³„\", fn = \"sum\"),\n    fmt = ~ fmt_integer(.),\n    side = \"top\"\n  )  |&gt; \n  grand_summary_rows(\n    columns = ë¹„ìœ¨,\n    fns =  list(label = \"í•©ê³„\", fn = \"sum\"),\n    fmt = ~ fmt_percent(., decimals = 0),\n    side = \"top\"\n  ) |&gt; \n  gt_theme_538()"
  },
  {
    "objectID": "minju_party.html#í–‰ì•ˆë¶€-ì¸êµ¬í†µê³„",
    "href": "minju_party.html#í–‰ì•ˆë¶€-ì¸êµ¬í†µê³„",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œage_raw &lt;- readxl::read_excel(\"data/í˜ì‹ ì•ˆ_202307_202307_ì—°ë ¹ë³„_ì›”ê°„.xlsx\", skip = 3)\n\nmale_tbl&lt;- age_raw |&gt; \n  janitor::clean_names(ascii = FALSE)  |&gt; \n  select(c(\"í–‰ì •ê¸°ê´€ì½”ë“œ\", \"í–‰ì •ê¸°ê´€\", \"ë‚¨_ì¸êµ¬ìˆ˜\", \"ì—°ë ¹êµ¬ê°„ì¸êµ¬ìˆ˜_4\", \n          \"x0_4ì„¸_5\", \"x5_9ì„¸_6\", \"x10_14ì„¸_7\", \"x15_19ì„¸_8\", \"x20_24ì„¸_9\", \n          \"x25_29ì„¸_10\", \"x30_34ì„¸_11\", \"x35_39ì„¸_12\", \"x40_44ì„¸_13\", \n          \"x45_49ì„¸_14\", \"x50_54ì„¸_15\", \"x55_59ì„¸_16\", \"x60_64ì„¸_17\", \n          \"x65_69ì„¸_18\", \"x70_74ì„¸_19\", \"x75_79ì„¸_20\", \"x80_84ì„¸_21\", \n          \"x85_89ì„¸_22\", \"x90_94ì„¸_23\", \"x95_99ì„¸_24\", \"x100ì„¸_ì´ìƒ_25\")) |&gt; \n  pivot_longer(starts_with(\"x\"), names_to = \"ì—°ë ¹\", values_to = \"ì¸êµ¬ìˆ˜\") |&gt; \n  mutate(ì„±ë³„ = \"ë‚¨\") |&gt; \n  select(í–‰ì •ê¸°ê´€, ì„±ë³„, ì—°ë ¹, ì¸êµ¬ìˆ˜)\n  \n\nfemale_tbl &lt;- age_raw |&gt; \n  janitor::clean_names(ascii = FALSE)  |&gt; \n  select(c(\"í–‰ì •ê¸°ê´€ì½”ë“œ\", \"í–‰ì •ê¸°ê´€\", \"ì—¬_ì¸êµ¬ìˆ˜\", \"ì—°ë ¹êµ¬ê°„ì¸êµ¬ìˆ˜_27\", \n           \"x0_4ì„¸_28\", \"x5_9ì„¸_29\", \"x10_14ì„¸_30\", \"x15_19ì„¸_31\", \n           \"x20_24ì„¸_32\", \"x25_29ì„¸_33\", \"x30_34ì„¸_34\", \"x35_39ì„¸_35\", \n           \"x40_44ì„¸_36\", \"x45_49ì„¸_37\", \"x50_54ì„¸_38\", \"x55_59ì„¸_39\", \n           \"x60_64ì„¸_40\", \"x65_69ì„¸_41\", \"x70_74ì„¸_42\", \"x75_79ì„¸_43\", \n           \"x80_84ì„¸_44\", \"x85_89ì„¸_45\", \"x90_94ì„¸_46\", \"x95_99ì„¸_47\", \"x100ì„¸_ì´ìƒ_48\")) |&gt; \n  pivot_longer(starts_with(\"x\"), names_to = \"ì—°ë ¹\", values_to = \"ì¸êµ¬ìˆ˜\") |&gt; \n  mutate(ì„±ë³„ = \"ì—¬\") |&gt; \n  select(í–‰ì •ê¸°ê´€, ì„±ë³„, ì—°ë ¹, ì¸êµ¬ìˆ˜)\n\nage_tbl &lt;- bind_rows(male_tbl, female_tbl) |&gt; \n  filter(!str_detect(í–‰ì •ê¸°ê´€, \"ì „êµ­\")) |&gt; \n  mutate(ì—°ë ¹ = str_extract(ì—°ë ¹, '(\\\\d{1,2}_\\\\d{1,2})'))  |&gt; \n  mutate(ì—°ë ¹ëŒ€ = case_when(ì—°ë ¹ %in% c(\"0_4\", \"5_9\", \"10_14\", \"15_19\") ~ \"-19\",\n                            ì—°ë ¹ %in% c(\"70_74\", \"75_79\", \"80_84\", \"85_89\", \"90_94\", \"95_99\") ~ \"70+\",\n                              is.na(ì—°ë ¹) ~ \"70+\",\n                              TRUE ~ ì—°ë ¹)) |&gt; \n  mutate(ì¸êµ¬ìˆ˜ = parse_number(ì¸êµ¬ìˆ˜))\n\nage_tbl |&gt;\n  write_rds(\"data/í˜ì‹ ì•ˆ_2023ë…„_ì—°ë ¹ì¸êµ¬ìˆ˜.rds\")"
  },
  {
    "objectID": "minju_party.html#ì—°ë ¹ë¹„êµ",
    "href": "minju_party.html#ì—°ë ¹ë¹„êµ",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n2.1 ì—°ë ¹ë¹„êµ",
    "text": "2.1 ì—°ë ¹ë¹„êµ\n\nì½”ë“œmage_temp &lt;- mage_tbl |&gt; \n  filter(ì—°ë ¹ != \"10ëŒ€í›„ë°˜\")\n\nage_temp &lt;- age_tbl |&gt; \n  filter(!str_detect(ì—°ë ¹, \"(0_4)|(5_9)|(10_14)|(15_19)\")) |&gt;   \n  group_by(ì—°ë ¹) |&gt; \n  summarise(ì¸êµ¬ìˆ˜ = sum(ì¸êµ¬ìˆ˜)) |&gt; \n  mutate(ì¸êµ¬ë¹„ìœ¨ = ì¸êµ¬ìˆ˜ / sum(ì¸êµ¬ìˆ˜))\n\nfull_join(mage_temp, age_temp)\n#&gt; # A tibble: 16 Ã— 5\n#&gt;    ì—°ë ¹    ë¹„ìœ¨  ë‹¹ì›ìˆ˜  ì¸êµ¬ìˆ˜ ì¸êµ¬ë¹„ìœ¨\n#&gt;    &lt;chr&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;\n#&gt;  1 20_24  0.017  41724. 2850804  0.0727 \n#&gt;  2 25_29  0.042 103082. 3433431  0.0876 \n#&gt;  3 30_34  0.053 130080. 3376137  0.0862 \n#&gt;  4 35_39  0.063 154623. 3211899  0.0820 \n#&gt;  5 40_44  0.098 240525.      NA NA      \n#&gt;  6 45_49  0.122 299429. 3938571  0.101  \n#&gt;  7 50_54  0.158 387784. 4535734  0.116  \n#&gt;  8 55_59  0.138 338698. 4095565  0.105  \n#&gt;  9 60_64  0.128 314154. 4280225  0.109  \n#&gt; 10 65_69  0.081 198801. 3291406  0.0840 \n#&gt; 11 70+    0.1   245433.      NA NA      \n#&gt; 12 70_74 NA         NA  2245004  0.0573 \n#&gt; 13 75_79 NA         NA  1662571  0.0424 \n#&gt; 14 80_84 NA         NA  1326976  0.0339 \n#&gt; 15 85_89 NA         NA   698771  0.0178 \n#&gt; 16 90_94 NA         NA   239883  0.00612\n\nage_tbl |&gt; \n  filter(str_detect(ì—°ë ¹, \"40\"))\n#&gt; # A tibble: 34 Ã— 5\n#&gt;    í–‰ì •ê¸°ê´€       ì„±ë³„  ì—°ë ¹  ì¸êµ¬ìˆ˜ ì—°ë ¹ëŒ€\n#&gt;    &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt; \n#&gt;  1 ì„œìš¸íŠ¹ë³„ì‹œ     ë‚¨    40_44 364892 -19   \n#&gt;  2 ë¶€ì‚°ê´‘ì—­ì‹œ     ë‚¨    40_44 127280 -19   \n#&gt;  3 ëŒ€êµ¬ê´‘ì—­ì‹œ     ë‚¨    40_44  88337 -19   \n#&gt;  4 ì¸ì²œê´‘ì—­ì‹œ     ë‚¨    40_44 127532 -19   \n#&gt;  5 ê´‘ì£¼ê´‘ì—­ì‹œ     ë‚¨    40_44  57462 -19   \n#&gt;  6 ëŒ€ì „ê´‘ì—­ì‹œ     ë‚¨    40_44  55650 -19   \n#&gt;  7 ìš¸ì‚°ê´‘ì—­ì‹œ     ë‚¨    40_44  47693 -19   \n#&gt;  8 ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ ë‚¨    40_44  20453 -19   \n#&gt;  9 ê²½ê¸°ë„         ë‚¨    40_44 594508 -19   \n#&gt; 10 ê°•ì›íŠ¹ë³„ìì¹˜ë„ ë‚¨    40_44  52391 -19   \n#&gt; # â„¹ 24 more rows"
  },
  {
    "objectID": "minju_party.html#ìœ ê¶Œìì™€-ë¯¼ì£¼ë‹¹",
    "href": "minju_party.html#ìœ ê¶Œìì™€-ë¯¼ì£¼ë‹¹",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n2.1 ìœ ê¶Œìì™€ ë¯¼ì£¼ë‹¹",
    "text": "2.1 ìœ ê¶Œìì™€ ë¯¼ì£¼ë‹¹\n\nì½”ë“œlibrary(gt)\nlibrary(gtExtras)\n\nmage_temp &lt;- mage_tbl |&gt; \n  filter(ì—°ë ¹ != \"10ëŒ€í›„ë°˜\")\n\nage_temp &lt;- age_tbl |&gt; \n  filter(ì—°ë ¹ëŒ€ != \"-19\") |&gt;   \n  group_by(ì—°ë ¹ëŒ€) |&gt; \n  summarise(ì¸êµ¬ìˆ˜ = sum(ì¸êµ¬ìˆ˜)) |&gt; \n  mutate(ì¸êµ¬ë¹„ìœ¨ = ì¸êµ¬ìˆ˜ / sum(ì¸êµ¬ìˆ˜))\n\npop_party_raw &lt;- full_join(mage_temp, age_temp, by = c(\"ì—°ë ¹\" = \"ì—°ë ¹ëŒ€\"))\n\n\npop_party_tbl &lt;- pop_party_raw |&gt; \n  rename(ì—°ë ¹ëŒ€ = ì—°ë ¹,\n         ë‹¹ì›ë¹„ìœ¨ = ë¹„ìœ¨) |&gt; \n  mutate(ì°¨ì´ = ë‹¹ì›ë¹„ìœ¨ - ì¸êµ¬ë¹„ìœ¨) |&gt; \n  select(ì—°ë ¹ëŒ€, ë‹¹ì›ìˆ˜, ë‹¹ì›ë¹„ìœ¨, ì°¨ì´, ìœ ê¶Œìë¹„ìœ¨=ì¸êµ¬ë¹„ìœ¨, ìœ ê¶Œììˆ˜=ì¸êµ¬ìˆ˜)\n  \nvoter_party_gt &lt;- pop_party_tbl |&gt; \n  gt::gt() |&gt; \n  gt_theme_538() |&gt; \n  tab_header(\n    title = md(\"ì—°ë ¹ëŒ€ë³„ ë¯¼ì£¼ë‹¹ì›ê³¼ ìœ ê¶Œì ë¹„êµ\"),\n    subtitle = md(\"\")\n  ) |&gt;   \n  cols_align(\"center\") |&gt; \n  fmt_percent(columns = c(ë‹¹ì›ë¹„ìœ¨, ìœ ê¶Œìë¹„ìœ¨, ì°¨ì´), decimals = 1) |&gt; \n  fmt_integer(columns = c(ë‹¹ì›ìˆ˜, ìœ ê¶Œììˆ˜)) |&gt; \n  tab_spanner(label = \"ë¯¼ì£¼ë‹¹ì›\",\n              id = \"party\",\n              columns = c(ë‹¹ì›ìˆ˜, ë‹¹ì›ë¹„ìœ¨)) |&gt; \n  tab_spanner(label = \"ìœ ê¶Œì\",\n              id = \"voter\",              \n              columns = c(ìœ ê¶Œìë¹„ìœ¨, ìœ ê¶Œììˆ˜)) |&gt; \n  ## ì°¨ì´ ìƒ‰ìƒí‘œì‹ ---------------------\n  tab_style(\n    style = cell_text(color = \"red\", size = px(15L), weight = \"bold\"),\n    locations = cells_body(\n      rows  = ì°¨ì´ &lt; 0,\n      columns = ì°¨ì´\n    )\n  )  |&gt; \n  tab_style(\n    style = cell_text(color = \"blue\", size = px(15L), weight = \"bold\"),\n    locations = cells_body(\n      rows  = ì°¨ì´ &gt; 0,\n      columns = ì°¨ì´\n    )\n  ) |&gt; \n  tab_footnote(\n    footnote = \"ìë£Œì¶œì²˜: ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹í˜ì‹ ìœ„ í˜ì‹ ì•ˆ ì„¤ëª…ìë£Œ\",\n    location = cells_column_spanners(spanners = \"party\")\n  ) |&gt; \n  tab_footnote(\n    footnote = \"ìë£Œì¶œì²˜: í–‰ì•ˆë¶€ ì£¼ë¯¼ë“±ë¡ ì¸êµ¬ ë° ì„¸ëŒ€í˜„í™©\",\n    location = cells_column_spanners(spanners = \"voter\")\n  )  \n\nvoter_party_gt\n  \n# voter_party_gt |&gt; \n#   gtsave(filename = c(\"data/í˜ì‹ ì•ˆ_ë¯¼ì£¼ë‹¹_ìœ ê¶Œì.png\"))"
  },
  {
    "objectID": "minju_party.html#í•œêµ­ê°¤ëŸ½",
    "href": "minju_party.html#í•œêµ­ê°¤ëŸ½",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n3.1 í•œêµ­ê°¤ëŸ½",
    "text": "3.1 í•œêµ­ê°¤ëŸ½\ní•œêµ­ê°¤ëŸ½ì—ì„œ 2022ë…„ 3ì›” 10ì¼ ì‹¤ì‹œí•œ â€œì œ20ëŒ€ ëŒ€í†µë ¹ì„ ê±° ì‚¬í›„ ì¡°ì‚¬â€ ì¡°ì‚¬ì—ì„œ ì—°ë ¹ë³„ ì§€ì§€ìœ¨ì€ ë‹¤ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n\n\n\n\n\n\n\n\n\n\nì—°ë ¹ë³„\nì‚¬ë¡€ìˆ˜\nì´ì¬ëª…\nìœ¤ì„ì—´\nì‹¬ìƒì •\nê¸°íƒ€ ì¸ë¬¼\nëª¨ë¦„/ì‘ë‹µê±°ì ˆ\n\n\n\n18~29ì„¸\n171\n40%\n37%\n4%\n3%\n17%\n\n\n30ëŒ€\n151\n47%\n33%\n2%\n2%\n15%\n\n\n40ëŒ€\n186\n57%\n26%\n3%\n\n14%\n\n\n50ëŒ€\n199\n49%\n43%\n1%\n1%\n5%\n\n\n60ëŒ€\n163\n28%\n59%\n1%\n3%\n10%\n\n\n70ëŒ€ ì´ìƒ\n133\n23%\n61%\n\n\n14%\n\n\n\n\nì½”ë“œgallop_raw &lt;- read.csv(text=\"\nì—°ë ¹ë³„, ì‚¬ë¡€ìˆ˜,ì´ì¬ëª…,ìœ¤ì„ì—´,ì‹¬ìƒì •,ê¸°íƒ€ì¸ë¬¼,ëª¨ë¦„/ì‘ë‹µê±°ì ˆ\n18~29ì„¸,171,40%,37%,4%,3%,17%\n30ëŒ€,151,47%,33%,2%,2%,15%\n40ëŒ€,186,57%,26%,3%,,14%\n50ëŒ€,199,49%,43%,1%,1%,5%\n60ëŒ€,163,28%,59%,1%,3%,10%\n70ëŒ€ ì´ìƒ,133,23%,61%,,14%\n\", header=T, stringsAsFactors=F)\n\ngallop_tbl &lt;- gallop_raw |&gt; \n  as_tibble() |&gt; \n  janitor::clean_names(ascii = FALSE)  |&gt; \n  select(ì—°ë ¹ëŒ€=ì—°ë ¹ë³„, ì´ì¬ëª…, ìœ¤ì„ì—´, ì‹¬ìƒì •, ê¸°íƒ€ì¸ë¬¼, ëª¨ë¦„_ì‘ë‹µê±°ì ˆ) |&gt; \n  pivot_longer(-ì—°ë ¹ëŒ€, names_to = \"í›„ë³´\", values_to = \"ì§€ì§€ìœ¨\") |&gt; \n  mutate(ì •ë‹¹ = case_when(í›„ë³´ == \"ì´ì¬ëª…\" ~ \"ë¯¼ì£¼ë‹¹\",\n                          í›„ë³´ == \"ìœ¤ì„ì—´\" ~ \"êµ­ë¯¼ì˜í˜\",\n                          TRUE ~ \"ê¸°íƒ€/ë¬´ì‘ë‹µ\")) |&gt; \n  mutate(ì§€ì§€ìœ¨ = parse_number(ì§€ì§€ìœ¨) / 100) |&gt; \n  group_by(ì—°ë ¹ëŒ€, ì •ë‹¹) |&gt; \n  summarise(ì§€ì§€ìœ¨ = sum(ì§€ì§€ìœ¨, na.rm = TRUE)) |&gt; \n  ungroup() |&gt; \n  mutate(ì—°ë ¹ëŒ€ = case_when(ì—°ë ¹ëŒ€ == \"18~29ì„¸\" ~ \"20ëŒ€-\",\n                            ì—°ë ¹ëŒ€ == \"70ëŒ€ ì´ìƒ\" ~\"70ëŒ€+\",\n                            TRUE ~ ì—°ë ¹ëŒ€)) |&gt; \n  pivot_wider(names_from = ì •ë‹¹, values_from = ì§€ì§€ìœ¨) |&gt; \n  mutate(ì°¨ì´ = ë¯¼ì£¼ë‹¹ - êµ­ë¯¼ì˜í˜)\n\ngallop_tbl"
  },
  {
    "objectID": "minju_party.html#ë¯¼ì£¼ë‹¹-í˜ì‹ ì•ˆ",
    "href": "minju_party.html#ë¯¼ì£¼ë‹¹-í˜ì‹ ì•ˆ",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n3.2 ë¯¼ì£¼ë‹¹ í˜ì‹ ì•ˆ",
    "text": "3.2 ë¯¼ì£¼ë‹¹ í˜ì‹ ì•ˆ\n\nì½”ë“œmage_gallop_tbl &lt;- mage_tbl |&gt; \n  mutate(ì—°ë ¹ëŒ€ = case_when(ì—°ë ¹ %in% c(\"10ëŒ€í›„ë°˜\", \"20_24\", \"25_29\")~ \"20ëŒ€-\",\n                            ì—°ë ¹ %in% c(\"30_34\", \"35_39\")~ \"30ëŒ€\",\n                            ì—°ë ¹ %in% c(\"40_44\", \"45_49\")~ \"40ëŒ€\",\n                            ì—°ë ¹ %in% c(\"50_54\", \"55_59\")~ \"50ëŒ€\",\n                            ì—°ë ¹ %in% c(\"60_64\", \"65_69\")~ \"60ëŒ€\",\n                            TRUE ~ \"70ëŒ€+\")) |&gt; \n  group_by(ì—°ë ¹ëŒ€) |&gt; \n  summarise(ë‹¹ì›ë¹„ìœ¨ = sum(ë¹„ìœ¨),\n            ë‹¹ì›ìˆ˜   = sum(ë‹¹ì›ìˆ˜))\n\nmage_gallop_tbl"
  },
  {
    "objectID": "minju_party.html#í–‰ì•ˆìœ„-ìœ ê¶Œì",
    "href": "minju_party.html#í–‰ì•ˆìœ„-ìœ ê¶Œì",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n3.3 í–‰ì•ˆìœ„ ìœ ê¶Œì",
    "text": "3.3 í–‰ì•ˆìœ„ ìœ ê¶Œì\n\nì½”ë“œage_tbl &lt;- \n  read_rds(\"data/í˜ì‹ ì•ˆ_2023ë…„_ì—°ë ¹ì¸êµ¬ìˆ˜.rds\")\n\nadm_gallop_tbl &lt;- age_tbl |&gt; \n  filter(!ì—°ë ¹ %in% c(\"0_4\", \"5_9\", \"10_14\", \"15_19\")) |&gt; \n  mutate(ì—°ë ¹ëŒ€ = case_when(ì—°ë ¹ëŒ€ %in% c(\"20_24\", \"25_29\") ~ \"20ëŒ€-\",\n                            ì—°ë ¹ëŒ€ %in% c(\"30_34\", \"35_39\") ~ \"30ëŒ€\",\n                         ì—°ë ¹ëŒ€ %in% c(\"40_44\", \"45_49\") ~ \"40ëŒ€\",\n                         ì—°ë ¹ëŒ€ %in% c(\"50_54\", \"55_59\") ~ \"50ëŒ€\",\n                         ì—°ë ¹ëŒ€ %in% c(\"60_64\", \"65_69\") ~ \"60ëŒ€\",\n                         TRUE ~ \"70ëŒ€+\")) |&gt; \n  group_by(ì—°ë ¹ëŒ€) |&gt; \n  summarise(ìœ ê¶Œììˆ˜ = sum(ì¸êµ¬ìˆ˜)) |&gt; \n  mutate(ìœ ê¶Œìë¹„ìœ¨ = ìœ ê¶Œììˆ˜ / sum(ìœ ê¶Œììˆ˜))\n\nadm_gallop_tbl"
  },
  {
    "objectID": "minju_party.html#ê²°í•©",
    "href": "minju_party.html#ê²°í•©",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n3.4 ê²°í•©",
    "text": "3.4 ê²°í•©\n\nì½”ë“œmerge_tbl &lt;- adm_gallop_tbl |&gt; \n  left_join(mage_gallop_tbl) |&gt; \n  left_join(gallop_tbl)\n\npresident_age_gt &lt;- merge_tbl |&gt; \n  rename(ë“í‘œì°¨ì´ = ì°¨ì´) |&gt; \n  mutate(êµ¬ì„±ì°¨ì´ = ë‹¹ì›ë¹„ìœ¨ - ìœ ê¶Œìë¹„ìœ¨) |&gt;\n  relocate(êµ¬ì„±ì°¨ì´, .before = ë“í‘œì°¨ì´) |&gt; \n  relocate(ë¯¼ì£¼ë‹¹, .before = `ê¸°íƒ€/ë¬´ì‘ë‹µ`) |&gt; \n  relocate(êµ­ë¯¼ì˜í˜, .after = `ê¸°íƒ€/ë¬´ì‘ë‹µ`)  |&gt; \n  gt() |&gt; \n  gt_theme_538() |&gt; \n  tab_options(\n    footnotes.font.size = px(10L)\n  ) |&gt; \n  tab_header(\n    title = md(\"ì—°ë ¹ëŒ€ë³„ ìœ ê¶Œì, ë¯¼ì£¼ë‹¹ì›, ëŒ€ì„  ë“í‘œ ë¹„êµ\"),\n  ) |&gt;   \n  cols_align(\"center\") |&gt; \n  fmt_percent(columns = c(ë‹¹ì›ë¹„ìœ¨, ìœ ê¶Œìë¹„ìœ¨, êµ¬ì„±ì°¨ì´, ë“í‘œì°¨ì´,\n                          êµ­ë¯¼ì˜í˜, `ê¸°íƒ€/ë¬´ì‘ë‹µ`, ë¯¼ì£¼ë‹¹), decimals = 0) |&gt; \n  fmt_integer(columns = c(ë‹¹ì›ìˆ˜, ìœ ê¶Œììˆ˜)) |&gt; \n  ## ìŠ¤íŒ¨ë„ˆ ---------------------  \n  tab_spanner(label = \"ë¯¼ì£¼ë‹¹ì›\",\n              id = \"party\",\n              columns = c(ë‹¹ì›ìˆ˜, ë‹¹ì›ë¹„ìœ¨)) |&gt; \n  tab_spanner(label = \"ìœ ê¶Œì\",\n              id = \"voter\",              \n              columns = c(ìœ ê¶Œìë¹„ìœ¨, ìœ ê¶Œììˆ˜)) |&gt; \n  tab_spanner(label = \"ë‹¹ì›ê³¼ ìœ ê¶Œì êµ¬ì„±ë¹„\",\n              id = \"prop\",\n              columns = c(ë‹¹ì›ìˆ˜, ë‹¹ì›ë¹„ìœ¨, ìœ ê¶Œììˆ˜, ìœ ê¶Œìë¹„ìœ¨, êµ¬ì„±ì°¨ì´)) |&gt; \n  tab_spanner(label = \"ëŒ€í†µë ¹ì„ ê±°\",\n              id = \"election\",              \n              columns = c(ë“í‘œì°¨ì´, ë¯¼ì£¼ë‹¹, `ê¸°íƒ€/ë¬´ì‘ë‹µ`, êµ­ë¯¼ì˜í˜)) |&gt; \n  ## ì°¨ì´ ìƒ‰ìƒí‘œì‹ ---------------------\n  tab_style(\n    style = cell_text(color = \"red\", size = px(15L), weight = \"bold\"),\n    locations = cells_body(\n      rows  = êµ¬ì„±ì°¨ì´ &lt; 0,\n      columns = êµ¬ì„±ì°¨ì´\n    )\n  )  |&gt; \n  tab_style(\n    style = cell_text(color = \"blue\", size = px(15L), weight = \"bold\"),\n    locations = cells_body(\n      rows  = êµ¬ì„±ì°¨ì´ &gt; 0,\n      columns = êµ¬ì„±ì°¨ì´\n    )\n  ) |&gt; \n  tab_footnote(\n    footnote = \"ìë£Œì¶œì²˜: ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹í˜ì‹ ìœ„ í˜ì‹ ì•ˆ ì„¤ëª…ìë£Œ\",\n    location = cells_column_spanners(spanners = \"party\")\n  ) |&gt; \n  tab_footnote(\n    footnote = \"ìë£Œì¶œì²˜: í–‰ì•ˆë¶€ ì£¼ë¯¼ë“±ë¡ ì¸êµ¬ ë° ì„¸ëŒ€í˜„í™©\",\n    location = cells_column_spanners(spanners = \"voter\")\n  ) |&gt; \n  tab_footnote(\n    footnote = \"ìë£Œì¶œì²˜: í•œêµ­ê°¤ëŸ½ ì œ20ëŒ€ ëŒ€í†µë ¹ì„ ê±° ì‚¬í›„ ì¡°ì‚¬\",\n    location = cells_column_spanners(spanners = \"election\") \n  )  |&gt; \n  ## ë“í‘œì°¨ì´ ìƒ‰ìƒí‘œì‹ ---------------------\n  tab_style(\n    style = cell_text(color = \"red\", size = px(15L), weight = \"bold\"),\n    locations = cells_body(\n      rows  = ë“í‘œì°¨ì´ &lt; 0,\n      columns = ë“í‘œì°¨ì´\n    )\n  )  |&gt; \n  tab_style(\n    style = cell_text(color = \"blue\", size = px(15L), weight = \"bold\"),\n    locations = cells_body(\n      rows  = ë“í‘œì°¨ì´ &gt; 0,\n      columns = ë“í‘œì°¨ì´\n    )\n  ) \n  \npresident_age_gt |&gt; \n  gtsave(\"data/ì—°ë ¹ëŒ€ë³„_êµ¬ì„±ë¹„_ëŒ€ì„ .png\")"
  },
  {
    "objectID": "by_election.html",
    "href": "by_election.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œlibrary(tidyverse)\n\nkrvote::election_20220309$ë“í‘œìœ¨ |&gt; \n  filter(ì‹œë„ëª… == \"ì„œìš¸íŠ¹ë³„ì‹œ\",\n         êµ¬ì‹œêµ°ëª… == \"ê°•ì„œêµ¬\") |&gt; \n  summarise(across(ì´ì¬ëª…:ê¹€ë¯¼ì°¬, sum)) |&gt; \n  pivot_longer(cols = everything()) |&gt; \n  mutate(ë¹„ìœ¨ = value/ sum(value))\n\n\n\n\n\nì½”ë“œkrvote::local_sido_20220601 |&gt; \n  filter(ì„ ê±°êµ¬ëª… == \"ì„œìš¸íŠ¹ë³„ì‹œ\") |&gt; \n  unnest(data) |&gt; \n  filter(ì„ ê±°êµ¬ëª… == \"ì„œìš¸íŠ¹ë³„ì‹œ\",\n         êµ¬ì‹œêµ°ëª… == \"ê°•ì„œêµ¬\") |&gt; \n  summarise(across(ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹_ì†¡ì˜ê¸¸:ë¬´ì†Œì†_ê¹€ê´‘ì¢…, sum)) |&gt; \n  pivot_longer(cols = everything()) |&gt; \n  mutate(ë¹„ìœ¨ = value/ sum(value))\n\n\n\n\nì½”ë“œkrvote::local_sgg_20220601 |&gt; \n  filter(ì‹œë„ëª… == \"ì„œìš¸íŠ¹ë³„ì‹œ\",\n         êµ¬ì‹œêµ°ëª… == \"ê°•ì„œêµ¬\") |&gt; \n  mutate(ë“í‘œ = parse_number(ë“í‘œ)) |&gt; \n  group_by(í›„ë³´) |&gt; \n  summarise(ë“í‘œ = sum(ë“í‘œ)) |&gt; \n    mutate(ë¹„ìœ¨ = ë“í‘œ/ sum(ë“í‘œ))\n\n\n\n\nì½”ë“œkrvote::general_2020 |&gt; \n  filter(ì‹œë„ == \"ì„œìš¸\",\n         ì„ ê±°êµ¬ %in% c(\"ê°•ì„œêµ¬ê°‘\", \"ê°•ì„œêµ¬ì„\", \"ê°•ì„œêµ¬ë³‘\")) |&gt; \n  unnest(data) |&gt; \n  group_by(êµ¬ë¶„) |&gt; \n  summarise(ë“í‘œ = sum(ì‚¬ëŒìˆ˜)) |&gt; \n  separate(êµ¬ë¶„, into = c(\"ì •ë‹¹\", \"í›„ë³´\"), sep = \" \") |&gt; \n  filter(!is.na(í›„ë³´)) |&gt; \n  group_by(ì •ë‹¹) |&gt; \n  summarise(ë“í‘œ = sum(ë“í‘œ)) |&gt; \n  mutate(ë¹„ìœ¨ = ë“í‘œ / sum(ë“í‘œ)) |&gt; \n  arrange(desc(ë¹„ìœ¨))"
  },
  {
    "objectID": "by_election.html#ëŒ€í†µë ¹-ì„ ê±°",
    "href": "by_election.html#ëŒ€í†µë ¹-ì„ ê±°",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œlibrary(tidyverse)\n\nkrvote::election_20220309$ë“í‘œìœ¨ |&gt; \n  filter(ì‹œë„ëª… == \"ì„œìš¸íŠ¹ë³„ì‹œ\",\n         êµ¬ì‹œêµ°ëª… == \"ê°•ì„œêµ¬\") |&gt; \n  summarise(across(ì´ì¬ëª…:ê¹€ë¯¼ì°¬, sum)) |&gt; \n  pivot_longer(cols = everything()) |&gt; \n  mutate(ë¹„ìœ¨ = value/ sum(value))"
  },
  {
    "objectID": "by_election.html#ì§€ë°©ì„ ê±°",
    "href": "by_election.html#ì§€ë°©ì„ ê±°",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œkrvote::local_sido_20220601 |&gt; \n  filter(ì„ ê±°êµ¬ëª… == \"ì„œìš¸íŠ¹ë³„ì‹œ\") |&gt; \n  unnest(data) |&gt; \n  filter(ì„ ê±°êµ¬ëª… == \"ì„œìš¸íŠ¹ë³„ì‹œ\",\n         êµ¬ì‹œêµ°ëª… == \"ê°•ì„œêµ¬\") |&gt; \n  summarise(across(ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹_ì†¡ì˜ê¸¸:ë¬´ì†Œì†_ê¹€ê´‘ì¢…, sum)) |&gt; \n  pivot_longer(cols = everything()) |&gt; \n  mutate(ë¹„ìœ¨ = value/ sum(value))\n\n\n\n\nì½”ë“œkrvote::local_sgg_20220601 |&gt; \n  filter(ì‹œë„ëª… == \"ì„œìš¸íŠ¹ë³„ì‹œ\",\n         êµ¬ì‹œêµ°ëª… == \"ê°•ì„œêµ¬\") |&gt; \n  mutate(ë“í‘œ = parse_number(ë“í‘œ)) |&gt; \n  group_by(í›„ë³´) |&gt; \n  summarise(ë“í‘œ = sum(ë“í‘œ)) |&gt; \n    mutate(ë¹„ìœ¨ = ë“í‘œ/ sum(ë“í‘œ))"
  },
  {
    "objectID": "by_election.html#êµ­íšŒì˜ì›",
    "href": "by_election.html#êµ­íšŒì˜ì›",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œkrvote::general_2020 |&gt; \n  filter(ì‹œë„ == \"ì„œìš¸\",\n         ì„ ê±°êµ¬ %in% c(\"ê°•ì„œêµ¬ê°‘\", \"ê°•ì„œêµ¬ì„\", \"ê°•ì„œêµ¬ë³‘\")) |&gt; \n  unnest(data) |&gt; \n  group_by(êµ¬ë¶„) |&gt; \n  summarise(ë“í‘œ = sum(ì‚¬ëŒìˆ˜)) |&gt; \n  separate(êµ¬ë¶„, into = c(\"ì •ë‹¹\", \"í›„ë³´\"), sep = \" \") |&gt; \n  filter(!is.na(í›„ë³´)) |&gt; \n  group_by(ì •ë‹¹) |&gt; \n  summarise(ë“í‘œ = sum(ë“í‘œ)) |&gt; \n  mutate(ë¹„ìœ¨ = ë“í‘œ / sum(ë“í‘œ)) |&gt; \n  arrange(desc(ë¹„ìœ¨))"
  }
]