[
  {
    "objectID": "approval_rate.html",
    "href": "approval_rate.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ìœ¤ì„ì—´ ëŒ€í†µë ¹\në¬¸ì¬ì¸ ëŒ€í†µë ¹\në°•ê·¼í˜œ ëŒ€í†µë ¹\nì´ëª…ë°• ëŒ€í†µë ¹\në…¸ë¬´í˜„ ëŒ€í†µë ¹\n\n\n\n\nì½”ë“œlibrary(tidyverse)\nlibrary(rvest)\nextrafont::loadfonts()\n\nyoon_url &lt;- 'https://namu.wiki/w/%EC%9C%A4%EC%84%9D%EC%97%B4/%EC%A7%80%EC%A7%80%EC%9C%A8'\n\nyoon_html &lt;- read_html(yoon_url)\n\nyoon_list &lt;- yoon_html |&gt; \n  html_nodes('table') |&gt; \n  html_table(header = TRUE)\n\nyoon_raw &lt;- yoon_list |&gt; \n  enframe() |&gt; \n  mutate(nrow = map_int(value, nrow)) |&gt; \n  filter(nrow &gt; 54) |&gt; \n  mutate(ì¡°ì‚¬íšŒì‚¬ = c(\"í•œêµ­ê°¤ëŸ½\", \"ë¦¬ì–¼ë¯¸í„°\", \"ì „êµ­ì§€í‘œì¡°ì‚¬\")) \n\nclean_tbl &lt;- function(dataframe) {\n  three_tbl &lt;- dataframe |&gt; \n    janitor::clean_names(ascii = FALSE) |&gt; \n    select(1:3) |&gt; \n    set_names(c(\"ì¡°ì‚¬ê¸°ê°„\", \"ê¸ì •\", \"ë¶€ì •\")) |&gt; \n    filter(str_detect(ì¡°ì‚¬ê¸°ê°„, \"^\\\\d{4}ë…„\"))\n}\n\nyoon_tbl &lt;- yoon_raw |&gt; \n  mutate(data = map(value, clean_tbl)) |&gt; \n  select(ì¡°ì‚¬íšŒì‚¬, data) |&gt; \n  unnest(data) |&gt; \n  mutate(ê¸ì • = parse_number(ê¸ì •),\n         ë¶€ì • = parse_number(ë¶€ì •)) |&gt; \n  fill(ê¸ì •, .direction = \"down\") |&gt; \n  fill(ë¶€ì •, .direction = \"down\") |&gt; \n  pivot_longer(ê¸ì •:ë¶€ì •, names_to = \"ê¸ë¶€ì •\", values_to = \"ì§€ì§€ìœ¨\") \n\nconvert_korean_date &lt;- function(korean_date) {\n  # Split the input into components\n  components &lt;- strsplit(korean_date, \" \")[[1]]\n  \n  # Extract year, month, and week\n  year &lt;- as.numeric(gsub(\"ë…„\", \"\", components[1]))\n  month &lt;- as.numeric(gsub(\"ì›”\", \"\", components[2]))\n  week &lt;- as.numeric(gsub(\"ì£¼\", \"\", components[3]))\n  \n  # Construct the date - the first day of the month and year, then add weeks\n  date &lt;- make_date(year, month, 1) + weeks(week - 1)\n  \n  return(date)\n}\n  \nyoon_gg_tbl &lt;- yoon_tbl |&gt; \n  mutate(ì¡°ì‚¬ê¸°ê°„ = map(ì¡°ì‚¬ê¸°ê°„, convert_korean_date)) |&gt; \n  unnest(ì¡°ì‚¬ê¸°ê°„) |&gt; \n  mutate(ì¡°ì‚¬íšŒì‚¬ = factor(ì¡°ì‚¬íšŒì‚¬, levels = c(\"í•œêµ­ê°¤ëŸ½\", \"ë¦¬ì–¼ë¯¸í„°\", \"ì „êµ­ì§€í‘œì¡°ì‚¬\"))) |&gt; \n  filter(ì¡°ì‚¬íšŒì‚¬ == \"í•œêµ­ê°¤ëŸ½\",\n         ì¡°ì‚¬ê¸°ê°„ &gt;= as.Date(\"2022-05-07\"))\n\nelection_interval &lt;- -interval(ymd(\"2024-04-10\"), ymd('2023-08-05'))\n\nelection_period   &lt;- as.period(election_interval, unit = \"month\") \n\nremaining_ymd &lt;- glue::glue(\"ë‚¨ì€ ê¸°ê°„:\\n {month(election_period)}ì›” {day(election_period)}ì¼\")\n\nyoon_approval_gg &lt;- yoon_gg_tbl  |&gt; \n  ggplot(aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •)) +\n    geom_point(data = yoon_gg_tbl |&gt; filter(ì¡°ì‚¬ê¸°ê°„ == max(ì¡°ì‚¬ê¸°ê°„)), \n               aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •), size = 1.5) +\n    geom_hline(yintercept = 50, linetype = 2, color = \"gray50\") +\n    geom_vline(xintercept = as.Date(\"2024-04-10\"), linetype = 1, color = \"gray50\") +    \n    geom_line() +\n    scale_color_manual(values = c(\"ê¸ì •\" = \"blue\", \"ë¶€ì •\" = \"red\")) +\n    labs(x = \"\",\n         y = \"ì§€ì§€ìœ¨(%)\",\n         title = \"ìœ¤ì„ì—´ ëŒ€í†µë ¹ ì§€ì§€ìœ¨ ì¶”ì„¸\") +\n    theme(legend.position = \"top\") +\n    expand_limits(x = c(as.Date(\"2022-05-10\"), as.Date(\"2027-05-09\"))) +\n    scale_x_date(date_labels =  \"%Y\", breaks = \"1 year\")  +\n    geom_text(aes(x=as.Date(\"2023-12-01\"), y = 60, label = remaining_ymd), \n              color = \"gray10\", size = 3, family = \"MaruBrui\") +\n    geom_text(aes(x=as.Date(\"2024-08-01\"), y = 65, label = \"ì œ22ëŒ€ ì´ì„ \\n4ì›”10ì¼\"), \n              color = \"gray10\", size = 3, family = \"MaruBrui\")  \n\nyoon_approval_gg\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ìœ¤ì„ì—´.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\nyoon_approval_gg\ndev.off()\n\n\n\n\n\n\n\n\n\nì½”ë“œlibrary(tidyverse)\nlibrary(rvest)\n\nmoon_url &lt;- 'https://namu.wiki/w/%EB%AC%B8%EC%9E%AC%EC%9D%B8/%EC%A7%80%EC%A7%80%EC%9C%A8'\n\nmoon_html &lt;- read_html(moon_url)\n\nmoon_list &lt;- moon_html |&gt; \n  html_nodes('table') |&gt; \n  html_table(header = TRUE)\n\nmoon_raw &lt;- moon_list |&gt; \n  enframe() |&gt; \n  mutate(nrow = map_int(value, nrow)) |&gt; \n  filter(nrow &gt; 30) |&gt; \n  mutate(id = row_number(),\n         ì¡°ì‚¬íšŒì‚¬ = ifelse(id &gt;6, \"ë¦¬ì–¼ë¯¸í„°\", \"í•œêµ­ê°¤ëŸ½\")) \n\nclean_tbl &lt;- function(dataframe) {\n  three_tbl &lt;- dataframe |&gt; \n    janitor::clean_names(ascii = FALSE) |&gt; \n    select(1:3) |&gt; \n    set_names(c(\"ì¡°ì‚¬ê¸°ê°„\", \"ê¸ì •\", \"ë¶€ì •\")) |&gt; \n    filter(str_detect(ì¡°ì‚¬ê¸°ê°„, \"^\\\\d{4}ë…„\"))\n}\n\nmoon_tbl &lt;- moon_raw |&gt; \n  mutate(data = map(value, clean_tbl)) |&gt; \n  filter(nrow &gt; 250) |&gt; \n  select(ì¡°ì‚¬íšŒì‚¬, data) |&gt; \n  unnest(data) |&gt; \n  mutate(ê¸ì • = parse_number(ê¸ì •),\n         ë¶€ì • = parse_number(ë¶€ì •)) |&gt; \n  fill(ê¸ì •, .direction = \"down\") |&gt; \n  fill(ë¶€ì •, .direction = \"down\") |&gt; \n  pivot_longer(ê¸ì •:ë¶€ì •, names_to = \"ê¸ë¶€ì •\", values_to = \"ì§€ì§€ìœ¨\") \n\nconvert_korean_date &lt;- function(korean_date) {\n  # Split the input into components\n  components &lt;- strsplit(korean_date, \" \")[[1]]\n  \n  # Extract year, month, and week\n  year &lt;- as.numeric(gsub(\"ë…„\", \"\", components[1]))\n  month &lt;- as.numeric(gsub(\"ì›”\", \"\", components[2]))\n  week &lt;- as.numeric(gsub(\"ì£¼\", \"\", components[3]))\n  \n  # Construct the date - the first day of the month and year, then add weeks\n  date &lt;- make_date(year, month, 1) + weeks(week - 1)\n  \n  return(date)\n}\n  \nmoon_approval_gg &lt;- moon_tbl |&gt; \n  mutate(ì¡°ì‚¬ê¸°ê°„ = map(ì¡°ì‚¬ê¸°ê°„, convert_korean_date)) |&gt; \n  unnest(ì¡°ì‚¬ê¸°ê°„) |&gt; \n  mutate(ì¡°ì‚¬íšŒì‚¬ = factor(ì¡°ì‚¬íšŒì‚¬, levels = c(\"í•œêµ­ê°¤ëŸ½\", \"ë¦¬ì–¼ë¯¸í„°\"))) |&gt; \n  filter(ì¡°ì‚¬íšŒì‚¬ == \"í•œêµ­ê°¤ëŸ½\") |&gt; \n  ggplot(aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •)) +\n    geom_hline(yintercept = 50, linetype = 2, color = \"gray50\") +  \n    geom_line() +\n    # facet_wrap(~ì¡°ì‚¬íšŒì‚¬) +\n    scale_color_manual(values = c(\"ê¸ì •\" = \"blue\", \"ë¶€ì •\" = \"red\")) +\n    labs(x = \"\",\n         y = \"ì§€ì§€ìœ¨(%)\",\n         title = \"ë¬¸ì¬ì¸ ëŒ€í†µë ¹ ì§€ì§€ìœ¨ ì¶”ì„¸\") +\n    theme(legend.position = \"top\")\n\nmoon_approval_gg\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ë¬¸ì¬ì¸.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\nmoon_approval_gg\ndev.off()\n\n\n\n\n\n\n\n\n\nì½”ë“œ\npark_url &lt;- 'https://namu.wiki/w/%EB%B0%95%EA%B7%BC%ED%98%9C/%EC%A7%80%EC%A7%80%EC%9C%A8'\n\npark_html &lt;- read_html(park_url)\n\npark_list &lt;- park_html |&gt; \n  html_nodes('table') |&gt; \n  html_table(header = TRUE)\n\npark_raw &lt;- park_list |&gt; \n  enframe() |&gt; \n  mutate(nrow = map_int(value, nrow)) |&gt; \n  filter(nrow &gt; 30) |&gt; \n  mutate(ì¡°ì‚¬íšŒì‚¬ = \"í•œêµ­ê°¤ëŸ½\") \n\n\npark_tbl &lt;- park_raw |&gt; \n  mutate(data = map(value, clean_tbl)) |&gt; \n  filter(nrow &gt; 200) |&gt; \n  select(ì¡°ì‚¬íšŒì‚¬, data) |&gt; \n  unnest(data) |&gt; \n  mutate(ê¸ì • = parse_number(ê¸ì •),\n         ë¶€ì • = parse_number(ë¶€ì •)) |&gt; \n  fill(ê¸ì •, .direction = \"down\") |&gt; \n  fill(ë¶€ì •, .direction = \"down\") |&gt; \n  pivot_longer(ê¸ì •:ë¶€ì •, names_to = \"ê¸ë¶€ì •\", values_to = \"ì§€ì§€ìœ¨\") \n\npark_approval_gg &lt;- park_tbl |&gt; \n  mutate(ì¡°ì‚¬ê¸°ê°„ = map(ì¡°ì‚¬ê¸°ê°„, convert_korean_date)) |&gt; \n  unnest(ì¡°ì‚¬ê¸°ê°„) |&gt; \n  ggplot(aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •)) +\n    geom_hline(yintercept = 50, linetype = 2, color = \"gray50\") +  \n    geom_line() +\n    scale_color_manual(values = c(\"ê¸ì •\" = \"blue\", \"ë¶€ì •\" = \"red\")) +\n    labs(x = \"\",\n         y = \"ì§€ì§€ìœ¨(%)\",\n         title = \"ë°•ê·¼í˜œ ëŒ€í†µë ¹ ì§€ì§€ìœ¨ ì¶”ì„¸\") +\n    theme(legend.position = \"top\")\n\npark_approval_gg\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ë°•ê·¼í˜œ.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\npark_approval_gg\ndev.off()\n\n\n\n\n\n\n\n\n\nì½”ë“œ\nlee_url &lt;- 'https://namu.wiki/w/%EC%9D%B4%EB%AA%85%EB%B0%95/%EC%A7%80%EC%A7%80%EC%9C%A8'\n\nlee_html &lt;- read_html(lee_url)\n\nlee_list &lt;- lee_html |&gt; \n  html_nodes('table') |&gt; \n  html_table(header = TRUE)\n\nlee_raw &lt;- lee_list |&gt; \n  enframe() |&gt; \n  mutate(nrow = map_int(value, nrow)) |&gt; \n  filter(nrow &gt; 30) |&gt; \n  mutate(ì¡°ì‚¬íšŒì‚¬ = \"í•œêµ­ê°¤ëŸ½\") \n\nconvert_ym_date &lt;- function(korean_date) {\n  \n  # Split the input into components\n  components &lt;- strsplit(korean_date, \" \")[[1]]\n  \n  # Extract year and month\n  year &lt;- as.numeric(gsub(\"ë…„\", \"\", components[1]))\n  month &lt;- as.numeric(gsub(\"ì›”\", \"\", components[2]))\n  \n  # Construct the date - the first day of the month and year\n  date &lt;- make_date(year, month, 15)\n  \n  return(date)\n}\n\nlee_tbl &lt;- lee_raw |&gt; \n  mutate(data = map(value, clean_tbl)) |&gt; \n  filter(nrow &gt; 90) |&gt; \n  select(ì¡°ì‚¬íšŒì‚¬, data) |&gt; \n  unnest(data) |&gt; \n  mutate(ê¸ì • = parse_number(ê¸ì •),\n         ë¶€ì • = parse_number(ë¶€ì •)) |&gt; \n  fill(ê¸ì •, .direction = \"down\") |&gt; \n  fill(ë¶€ì •, .direction = \"down\") |&gt; \n  separate(ì¡°ì‚¬ê¸°ê°„, into = c(\"ì‹œì‘\", \"ë\"), sep = \"-\") |&gt; \n  select(-ë) |&gt; \n  mutate(ì¡°ì‚¬ê¸°ê°„ = case_when(str_detect(ì‹œì‘, \"ì£¼$\") ~ map(ì‹œì‘, convert_korean_date), \n                              TRUE ~                    map(ì‹œì‘, convert_ym_date))) |&gt; \n  unnest(ì¡°ì‚¬ê¸°ê°„) |&gt; \n  mutate(ì¡°ì‚¬ê¸°ê°„ = as.Date(ì¡°ì‚¬ê¸°ê°„, origin = \"1970-01-01\"))\n\nprevious_date &lt;- ymd(\"2012-04-11\") - election_period\n\n\nlee_current_tbl &lt;- lee_tbl |&gt; \n  pivot_longer(ê¸ì •:ë¶€ì •, names_to = \"ê¸ë¶€ì •\", values_to = \"ì§€ì§€ìœ¨\") |&gt; \n  filter(ì¡°ì‚¬ê¸°ê°„ == previous_date+9)\n\nlee_approval_gg &lt;- lee_tbl |&gt; \n  pivot_longer(ê¸ì •:ë¶€ì •, names_to = \"ê¸ë¶€ì •\", values_to = \"ì§€ì§€ìœ¨\") |&gt;\n  ggplot(aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •)) +\n    geom_point(data = lee_current_tbl, aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •)) +\n    geom_text(data = lee_current_tbl, aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •,\n                                          label = ì§€ì§€ìœ¨), vjust = -1.5) +\n    geom_hline(yintercept = 50, linetype = 2, color = \"gray50\") +  \n    geom_line() +\n    scale_color_manual(values = c(\"ê¸ì •\" = \"blue\", \"ë¶€ì •\" = \"red\")) +\n    labs(x = \"\",\n         y = \"ì§€ì§€ìœ¨(%)\",\n         title = \"ì´ëª…ë°• ëŒ€í†µë ¹ ì§€ì§€ìœ¨ ì¶”ì„¸\") +\n    theme(legend.position = \"top\") +\n    scale_x_date(date_labels =  \"%Y\", breaks = \"1 year\") +\n    geom_vline(xintercept = as.Date(\"2012-04-11\"), linetype = 1, color = \"gray50\") +\n    geom_text(aes(x=as.Date(\"2011-12-01\"), y = 45, label = remaining_ymd), \n              color = \"gray10\", size = 3, family = \"MaruBrui\") +\n    geom_text(aes(x=as.Date(\"2012-08-01\"), y = 65, label = \"ì œ19ëŒ€ ì´ì„ \\n4ì›”11ì¼\"), \n              color = \"gray10\", size = 3, family = \"MaruBrui\")  \n  \nlee_approval_gg\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ì´ëª…ë°•.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\nlee_approval_gg\ndev.off()\n\n\n\n\n\n\n\n\n\nì½”ë“œ\nrho_url &lt;- 'https://namu.wiki/w/%ED%8B%80:%ED%95%9C%EA%B5%AD%EA%B0%A4%EB%9F%BD%20%EB%85%B8%EB%AC%B4%ED%98%84%20%EB%8C%80%ED%86%B5%EB%A0%B9%20%EA%B5%AD%EC%A0%95%EC%A7%80%EC%A7%80%EC%9C%A8'\n\nrho_html &lt;- read_html(rho_url)\n\nrho_list &lt;- rho_html |&gt; \n  html_nodes('table') |&gt; \n  html_table(header = TRUE)\n\nrho_raw &lt;- rho_list |&gt; \n  enframe() |&gt; \n  mutate(nrow = map_int(value, nrow)) |&gt; \n  filter(nrow &gt; 30) |&gt; \n  mutate(ì¡°ì‚¬íšŒì‚¬ = \"í•œêµ­ê°¤ëŸ½\") \n\n\nrho_tbl &lt;- rho_raw |&gt; \n  mutate(data = map(value, clean_tbl)) |&gt; \n  filter(nrow &gt; 20) |&gt; \n  select(ì¡°ì‚¬íšŒì‚¬, data) |&gt; \n  unnest(data) |&gt; \n  mutate(ê¸ì • = parse_number(ê¸ì •),\n         ë¶€ì • = parse_number(ë¶€ì •)) |&gt; \n  fill(ê¸ì •, .direction = \"down\") |&gt; \n  fill(ë¶€ì •, .direction = \"down\") |&gt; \n  separate(ì¡°ì‚¬ê¸°ê°„, into = c(\"ì‹œì‘\", \"ë\"), sep = \"-\") |&gt; \n  select(-ë) |&gt; \n  mutate(ì¡°ì‚¬ê¸°ê°„ = case_when(str_detect(ì‹œì‘, \"ì£¼$\") ~ map(ì‹œì‘, convert_korean_date), \n                              TRUE ~                    map(ì‹œì‘, convert_ym_date))) |&gt; \n  unnest(ì¡°ì‚¬ê¸°ê°„) |&gt; \n  mutate(ì¡°ì‚¬ê¸°ê°„ = as.Date(ì¡°ì‚¬ê¸°ê°„, origin = \"1970-01-01\"))\n  \n\nrho_approval_gg &lt;- rho_tbl |&gt; \n  pivot_longer(ê¸ì •:ë¶€ì •, names_to = \"ê¸ë¶€ì •\", values_to = \"ì§€ì§€ìœ¨\") |&gt;\n  ggplot(aes(x = ì¡°ì‚¬ê¸°ê°„, y = ì§€ì§€ìœ¨, color= ê¸ë¶€ì •)) +\n    geom_hline(yintercept = 50, linetype = 2, color = \"gray50\") +  \n    geom_line() +\n    scale_color_manual(values = c(\"ê¸ì •\" = \"blue\", \"ë¶€ì •\" = \"red\")) +\n    labs(x = \"\",\n         y = \"ì§€ì§€ìœ¨(%)\",\n         title = \"ë…¸ë¬´í˜„ ëŒ€í†µë ¹ ì§€ì§€ìœ¨ ì¶”ì„¸\") +\n    theme(legend.position = \"top\")\n\nrho_approval_gg\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ë…¸ë¬´í˜„.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\nrho_approval_gg\ndev.off()\n\n\n\n\n\n\n\nì½”ë“œrho_tbl |&gt; select(ì¡°ì‚¬íšŒì‚¬, ì¡°ì‚¬ê¸°ê°„, ê¸ì •, ë¶€ì •)\n\nlee_tbl |&gt; select(ì¡°ì‚¬íšŒì‚¬, ì¡°ì‚¬ê¸°ê°„, ê¸ì •, ë¶€ì •)\n\npark_tbl |&gt; pivot_wider(names_from = ê¸ë¶€ì •, values_from = ì§€ì§€ìœ¨) |&gt; \n  filter(ì¡°ì‚¬íšŒì‚¬ == \"í•œêµ­ê°¤ëŸ½\")\n\nmoon_tbl |&gt; pivot_wider(names_from = ê¸ë¶€ì •, values_from = ì§€ì§€ìœ¨) |&gt; \n  filter(ì¡°ì‚¬íšŒì‚¬ == \"í•œêµ­ê°¤ëŸ½\")\n\n\n\n\nëŒ€í†µë ¹ ì§€ì§€ìœ¨\nì´ëª…ë°•/ìœ¤ì„ì—´\n\n\n\n\nì½”ë“œlibrary(patchwork)\n\nall_approval_gg &lt;- (rho_approval_gg + lee_approval_gg + park_approval_gg)  /\n(moon_approval_gg + yoon_approval_gg)\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ì „ì²´ëŒ€í†µë ¹.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\nall_approval_gg\ndev.off()\n\n\n\n\n\n\n\n\n\nì½”ë“œtwo_approval_gg &lt;- (lee_approval_gg)  / (yoon_approval_gg)\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ë‘ëŒ€í†µë ¹.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\ntwo_approval_gg\ndev.off()"
  },
  {
    "objectID": "approval_rate.html#ê²°í•©",
    "href": "approval_rate.html#ê²°í•©",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œrho_tbl |&gt; select(ì¡°ì‚¬íšŒì‚¬, ì¡°ì‚¬ê¸°ê°„, ê¸ì •, ë¶€ì •)\n\nlee_tbl |&gt; select(ì¡°ì‚¬íšŒì‚¬, ì¡°ì‚¬ê¸°ê°„, ê¸ì •, ë¶€ì •)\n\npark_tbl |&gt; pivot_wider(names_from = ê¸ë¶€ì •, values_from = ì§€ì§€ìœ¨) |&gt; \n  filter(ì¡°ì‚¬íšŒì‚¬ == \"í•œêµ­ê°¤ëŸ½\")\n\nmoon_tbl |&gt; pivot_wider(names_from = ê¸ë¶€ì •, values_from = ì§€ì§€ìœ¨) |&gt; \n  filter(ì¡°ì‚¬íšŒì‚¬ == \"í•œêµ­ê°¤ëŸ½\")\n\n\n\n\nëŒ€í†µë ¹ ì§€ì§€ìœ¨\nì´ëª…ë°•/ìœ¤ì„ì—´\n\n\n\n\nì½”ë“œlibrary(patchwork)\n\nall_approval_gg &lt;- (rho_approval_gg + lee_approval_gg + park_approval_gg)  /\n(moon_approval_gg + yoon_approval_gg)\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ì „ì²´ëŒ€í†µë ¹.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\nall_approval_gg\ndev.off()\n\n\n\n\n\n\n\n\n\nì½”ë“œtwo_approval_gg &lt;- (lee_approval_gg)  / (yoon_approval_gg)\n\nragg::agg_jpeg(\"images/ëŒ€í†µë ¹ì§€ì§€ìœ¨/ë‘ëŒ€í†µë ¹.jpeg\",\n              width = 10, height = 7, units = \"in\", res = 600)\ntwo_approval_gg\ndev.off()"
  },
  {
    "objectID": "approval_rate.html#ë…„-ê¸°ì¤€",
    "href": "approval_rate.html#ë…„-ê¸°ì¤€",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n2.1 1ë…„ ê¸°ì¤€",
    "text": "2.1 1ë…„ ê¸°ì¤€\n\nì½”ë“œ\nrm_url &lt;- glue::glue('https://namu.wiki/w/%ED%8B%80:%EB%A6%AC%EC%96%BC%EB%AF%B8%ED%84%B0%20{2006}%EB%85%84%20%EC%A0%95%EB%8B%B9%EC%A7%80%EC%A7%80%EC%9C%A8')\n\nrm_html &lt;- read_html(rm_url)\n\nrm_list &lt;- rm_html |&gt; \n  html_nodes('table') |&gt; \n  html_table(header = TRUE)\n\nrm_raw &lt;- rm_list |&gt; \n  enframe() |&gt; \n  mutate(nrow = map_int(value, nrow)) |&gt; \n  filter(name == 1) |&gt; \n  mutate(ì¡°ì‚¬íšŒì‚¬ = \"ë¦¬ì–¼ë¯¸í„°\") \n\nremove_last &lt;- function(vector) {\n  if(vector[length(vector)] ==\"\") {\n    vector[1:(length(vector)-1)]\n  } else {\n    vector\n  }\n}\n\nmake_dataframe &lt;- function(x_vec, y_vec) {\n  data.frame(x_vec, y_vec)\n}\n\n## ì •ë‹¹ëª…ê³¼ ì§€ì§€ìœ¨\nrm_tbl &lt;- rm_raw |&gt; \n  mutate(data = map(value, janitor::clean_names, ascii = FALSE)) |&gt; \n  select(ì¡°ì‚¬íšŒì‚¬, data) |&gt; \n  unnest(data) |&gt;\n  select(contains(\"ì •ë‹¹ì§€ì§€ìœ¨\"), x_2) |&gt; \n  set_names(c(\"ì¡°ì‚¬ê¸°ê°„\", \"ì§€ì§€ìœ¨\")) |&gt; \n  mutate(ì •ë‹¹ëª… = ifelse(str_detect(ì¡°ì‚¬ê¸°ê°„, \"â—\"), \n                      str_split(ì§€ì§€ìœ¨, \"â—\"), NA)) |&gt; \n  mutate(ì •ë‹¹ëª… = map_chr(ì •ë‹¹ëª…, paste0, collapse=\"\")) |&gt; \n  mutate(ì •ë‹¹ëª… = ifelse(ì •ë‹¹ëª… == \"NA\", NA, ì •ë‹¹ëª…)) |&gt; \n  fill(ì •ë‹¹ëª…, .direction = \"down\") |&gt; \n  filter(str_detect(ì¡°ì‚¬ê¸°ê°„, \"^\\\\d{1,2}ì›”\")) |&gt; \n  mutate(ì§€ì§€ìœ¨ = str_squish(ì§€ì§€ìœ¨),\n         ì •ë‹¹ëª… = str_squish(ì •ë‹¹ëª…)) |&gt; \n  mutate(ì •ë‹¹ëª… = str_split(ì •ë‹¹ëª…, pattern = \"\\\\s+/\\\\s+\"),\n         ì§€ì§€ìœ¨ = str_split(ì§€ì§€ìœ¨, pattern = \"%\"))  |&gt; \n  mutate(ì§€ì§€ìœ¨ìˆ˜ = map_int(ì§€ì§€ìœ¨, length),\n         ì •ë‹¹ìˆ˜   = map_int(ì •ë‹¹ëª…, length)) |&gt; \n  mutate(ì§€ì§€ìœ¨ = ifelse(ì§€ì§€ìœ¨ìˆ˜ == ì •ë‹¹ìˆ˜, ì§€ì§€ìœ¨,\n                      map(ì§€ì§€ìœ¨, remove_last))) |&gt; \n  filter(abs(ì§€ì§€ìœ¨ìˆ˜ - ì •ë‹¹ìˆ˜)  &lt; 2) |&gt; \n  mutate(data = map2(ì§€ì§€ìœ¨, ì •ë‹¹ëª…, make_dataframe)) |&gt; \n  select(ì¡°ì‚¬ê¸°ê°„, data)\n  \nrm_tbl |&gt; \n  unnest(data)"
  },
  {
    "objectID": "approval_rate.html#í•¨ìˆ˜",
    "href": "approval_rate.html#í•¨ìˆ˜",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n2.2 í•¨ìˆ˜",
    "text": "2.2 í•¨ìˆ˜\n\nì½”ë“œ\nget_party_data &lt;- function(year = \"2012\") {\n  \n  rm_url &lt;- glue::glue('https://namu.wiki/w/%ED%8B%80:%EB%A6%AC%EC%96%BC%EB%AF%B8%ED%84%B0%20',\n                       '{year}',\n                       '%EB%85%84%20%EC%A0%95%EB%8B%B9%EC%A7%80%EC%A7%80%EC%9C%A8') |&gt; as.character()\n\n  rm_html &lt;- read_html(rm_url)\n  \n  rm_list &lt;- rm_html |&gt; \n    html_nodes('table') |&gt; \n    html_table(header = TRUE)\n  \n  rm_raw &lt;- rm_list |&gt; \n    enframe() |&gt; \n    mutate(nrow = map_int(value, nrow)) |&gt; \n    filter(name == 1) |&gt; \n    mutate(ì¡°ì‚¬íšŒì‚¬ = \"ë¦¬ì–¼ë¯¸í„°\") \n  \n  remove_last &lt;- function(vector) {\n    \n    if(length(vector) &lt; 3){\n      vector\n    } else if(vector[length(vector)] ==\"\") {\n      vector[1:(length(vector)-1)]\n    } else {\n      vector\n    }\n  }\n  \n  make_dataframe &lt;- function(x_vec, y_vec) {\n    min_row &lt;- min(length(x_vec), length(y_vec))\n    data.frame(x_vec = x_vec[1:min_row], y_vec = y_vec[1:min_row])\n  }\n  \n  ## ì •ë‹¹ëª…ê³¼ ì§€ì§€ìœ¨\n  rm_tbl &lt;- rm_raw |&gt; \n    mutate(data = map(value, janitor::clean_names, ascii = FALSE)) |&gt; \n    select(ì¡°ì‚¬íšŒì‚¬, data) |&gt; \n    unnest(data) |&gt;\n    select(contains(\"ì •ë‹¹ì§€ì§€ìœ¨\"), x_2) |&gt; \n    set_names(c(\"ì¡°ì‚¬ê¸°ê°„\", \"ì§€ì§€ìœ¨\")) |&gt; \n    mutate(ì •ë‹¹ëª… = ifelse(str_detect(ì¡°ì‚¬ê¸°ê°„, \"â—\"), \n                        str_split(ì§€ì§€ìœ¨, \"â—\"), NA)) |&gt; \n    mutate(ì •ë‹¹ëª… = map_chr(ì •ë‹¹ëª…, paste0, collapse=\"\")) |&gt; \n    mutate(ì •ë‹¹ëª… = ifelse(ì •ë‹¹ëª… == \"NA\", NA, ì •ë‹¹ëª…)) |&gt; \n    fill(ì •ë‹¹ëª…, .direction = \"down\") |&gt; \n    filter(str_detect(ì¡°ì‚¬ê¸°ê°„, \"^\\\\d{1,2}ì›”\")) |&gt; \n    mutate(ì§€ì§€ìœ¨ = str_squish(ì§€ì§€ìœ¨),\n           ì •ë‹¹ëª… = str_squish(ì •ë‹¹ëª…)) |&gt; \n    mutate(ì •ë‹¹ëª… = str_split(ì •ë‹¹ëª…, pattern = \"\\\\s+/\\\\s+\"),\n           ì§€ì§€ìœ¨ = str_split(ì§€ì§€ìœ¨, pattern = \"%\"))  |&gt; \n    mutate(ì§€ì§€ìœ¨ìˆ˜ = map_int(ì§€ì§€ìœ¨, length),\n           ì •ë‹¹ìˆ˜   = map_int(ì •ë‹¹ëª…, length)) |&gt; \n    mutate(ì§€ì§€ìœ¨ = ifelse(ì§€ì§€ìœ¨ìˆ˜ == ì •ë‹¹ìˆ˜, ì§€ì§€ìœ¨, map(ì§€ì§€ìœ¨, remove_last))) |&gt; \n    filter(abs(ì§€ì§€ìœ¨ìˆ˜ - ì •ë‹¹ìˆ˜)  &lt; 2) |&gt; \n    mutate(ì§€ì§€ìœ¨ìˆ˜ = map_int(ì§€ì§€ìœ¨, length),\n           ì •ë‹¹ìˆ˜   = map_int(ì •ë‹¹ëª…, length)) |&gt; \n    mutate(ì§€ì§€ìœ¨ = ifelse(ì§€ì§€ìœ¨ìˆ˜ != ì •ë‹¹ìˆ˜, NA, ì§€ì§€ìœ¨)) |&gt; \n    fill(ì§€ì§€ìœ¨, .direction = \"up\") |&gt; \n    mutate(data = map2(ì§€ì§€ìœ¨, ì •ë‹¹ëª…, make_dataframe)) |&gt; \n    select(ì¡°ì‚¬ê¸°ê°„, data)\n\n  \n  rm_df &lt;- rm_tbl |&gt; unnest(data) |&gt; mutate(x_vec = parse_number(x_vec)) |&gt; \n    rename(ì§€ì§€ìœ¨ = x_vec,\n           ì •ë‹¹   = y_vec) |&gt; \n    mutate(ì—°ë„ = year)\n  \n  return(rm_df)\n}\n\nget_party_data(\"2018\")"
  },
  {
    "objectID": "approval_rate.html#ê²°í•©-1",
    "href": "approval_rate.html#ê²°í•©-1",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n2.3 ê²°í•©",
    "text": "2.3 ê²°í•©\n\nì½”ë“œ\nsafely_get_party_data &lt;- safely(get_party_data, otherwise = \"ì˜¤ë¥˜\")\n\nyear &lt;- 2006:2023\n\nparty_raw &lt;- year |&gt; \n  enframe()  |&gt; \n  mutate(data = map(value, safely_get_party_data))\n\nparty_tbl &lt;- party_raw |&gt; \n  mutate(result = map(data, \"result\")) |&gt; \n  mutate(check = map_dbl(result, is_tibble)) |&gt; \n  unnest(result) |&gt; \n  select(ì—°ë„, ì¡°ì‚¬ê¸°ê°„, ì •ë‹¹, ì§€ì§€ìœ¨)\n\nparty_tbl |&gt; \n  write_csv(\"data/ë¦¬ì–¼ë¯¸í„°_ì •ë‹¹ì§€ì§€ìœ¨.csv\")"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "1 ì°¸ê³  ì›¹ì‚¬ì´íŠ¸\n\n#30DayMapChallenge ğŸŒğŸŒğŸŒ\n30 DAY MAP CHALLENGE IN R\nAbdoulMa/30DayMapChallenge\n\n2 ì›ì²œ ì§€ë„\n\n\nêµ­í† êµí†µë¶€\n\n\nLX í•œêµ­êµ­í† ì •ë³´ê³µì‚¬, êµ¬ í•œêµ­ì§€ì ê³µì‚¬\n\nê³µê°„ì •ë³´ì‚°ì—…ì§„í¥ì›\n\nVWorld, ê³µê°„ì •ë³´ì˜¤í”ˆí”Œë«í¼\n\n\n\nêµ­í† ì§€ë¦¬ì •ë³´ì›\n\nêµ­í† ì •ë³´í”Œë«í¼\n\nêµ­ê°€ê³µê°„ì •ë³´í¬í„¸\n\nì˜¤í”ˆë§ˆì¼“, 90m í‘œê³  ë°ì´í„°: [êµ­í† ì§€ë¦¬ì •ë³´ì›] ìˆ˜ì¹˜í‘œê³ ëª¨ë¸(DEM)_90M\n\n\n\n\n\n\nëŒ€í•œë¯¼êµ­ í–‰ì •ë™ ê²½ê³„: admdongkor\nëŒ€í•œë¯¼êµ­ ìµœì‹  í–‰ì •êµ¬ì—­(SHP) ë‹¤ìš´ë¡œë“œ\n\n3 ì„¸ê³„ì§€ë„\nì¶œì²˜: Fixing maps library data for Pacific centred (0Â°-360Â° longitude) display\n\n\nì„¸ê³„ì§€ë„: giscoR\nì„¸ê³„ì§€ë„: maps\nì„¸ê³„ì§€ë„: rnaturalearth\nì•„ì‹œì•„\nëŒ€í•œë¯¼êµ­\níƒœí‰ì–‘ ì¤‘ì‹¬\n\n\n\n\nì½”ë“œlibrary(tidyverse)\nlibrary(sf)\n\n# download.file(url = \"https://gisco-services.ec.europa.eu/distribution/v2/countries/geojson/CNTR_RG_01M_2016_4326.geojson\", destfile = \"data/world.geojson\", mode = \"w\")\n# \n# world_sf &lt;- giscoR::gisco_get_countries(\n#   epsg = \"4326\",\n#   region = \"Asia\",\n#   resolution = \"1\",\n#   cache = TRUE, \n#   update_cache = TRUE\n# )\n\nworld_sf &lt;- sf::st_read(\"data/world.geojson\")\n#&gt; Reading layer `world' from data source `D:\\tcs\\map_challenge\\data\\world.geojson' using driver `GeoJSON'\n#&gt; Simple feature collection with 257 features and 6 fields\n#&gt; Geometry type: MULTIPOLYGON\n#&gt; Dimension:     XY\n#&gt; Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.66498\n#&gt; Geodetic CRS:  WGS 84\n\nplot(st_geometry(world_sf))\n\n\n\n\n\n\n\n\n\n\nì½”ë“œ# í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\nlibrary(ggplot2)\nlibrary(maps)\n\n# ì›”ë“œë§µ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\nworld_map &lt;- map_data(\"world\")\n\n# ggplot2ë¥¼ ì‚¬ìš©í•´ ì§€ë„ë¥¼ ê·¸ë¦½ë‹ˆë‹¤.\nggplot() +\n  geom_polygon(data = world_map, aes(x = long, y = lat, group = group), fill = \"white\", color = \"black\") +\n  coord_cartesian(xlim = c(-180, 180)) +\n  theme_void()\n\n\n\n\n\n\n\n\n\n\nì½”ë“œlibrary(rnaturalearth)\n\n# Get the world map data\nworld &lt;- ne_countries(scale = \"medium\", returnclass = \"sf\")\n\n# Shift the map to center on the Pacific Ocean\nworld_trans &lt;- st_transform(st_wrap_dateline(world, options = c(\"WRAPDATELINE=YES\", \"DATELINEOFFSET=-180\")), crs = \"+proj=robin\")\n\n# Plot the world map\nggplot(data = world_trans) +\n  geom_sf() +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\nì½”ë“œasia_sf &lt;- giscoR::gisco_get_countries(\n  epsg = \"4326\",\n  region = \"Asia\",\n  resolution = \"60\",\n  cache = TRUE,\n  update_cache = TRUE\n)\n\nplot(st_geometry(asia_sf))\n\n\n\n\n\n\n\n\n\n\nì½”ë“œlibrary(tidyverse)\nlibrary(sf)\nlibrary(giscoR)\n\nkorea &lt;- giscoR::gisco_get_countries(\n    resolution = \"1\",\n    country = \"KOR\"\n) |&gt;\n    sf::st_transform(\"+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0\")\n\nplot(st_geometry(korea))\n\n\n\n\n\n\n\n\n\n\nì½”ë“œlibrary(maps)\n\nplot.map&lt;- function(database,center,...){\n    Obj &lt;- map(database,...,plot=F)\n    coord &lt;- cbind(Obj[[1]],Obj[[2]])\n\n    # split up the coordinates\n    id &lt;- rle(!is.na(coord[,1]))\n    id &lt;- matrix(c(1,cumsum(id$lengths)),ncol=2,byrow=T)\n    polygons &lt;- apply(id,1,function(i){coord[i[1]:i[2],]})\n\n    # split up polygons that differ too much\n    polygons &lt;- lapply(polygons,function(x){\n        x[,1] &lt;- x[,1] + center\n        x[,1] &lt;- ifelse(x[,1]&gt;180,x[,1]-360,x[,1])\n        if(sum(diff(x[,1])&gt;300,na.rm=T) &gt;0){\n          id &lt;- x[,1] &lt; 0\n          x &lt;- rbind(x[id,],c(NA,NA),x[!id,])\n       }\n       x\n    })\n    # reconstruct the object\n    polygons &lt;- do.call(rbind,polygons)\n    Obj[[1]] &lt;- polygons[,1]\n    Obj[[2]] &lt;- polygons[,2]\n\n    map(Obj,...)\n}\n\nplot.map(\"world\", center=210, col=\"white\",bg=\"gray\",\n         fill=TRUE, ylim=c(-60,90),mar=c(0,0,0,0))"
  },
  {
    "objectID": "km_BitGPT.html",
    "href": "km_BitGPT.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "1 ë°ì´í„°ì…‹\n\nì½”ë“œlibrary(tidyverse)\n\npop_tbl &lt;- \n  read_rds(\"data/kwangmyung_pop.rds\")\n\npop_tbl |&gt; \n  head() |&gt; \n  gt::gt()\n\n\n\n\n\nì‹œì \n      í–‰ì •ë™\n      ì„±ë³„\n      ë‚˜ì´\n      ì¸êµ¬ìˆ˜\n    \n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n0\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n1\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n2\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n3\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n4\n0\n\n\n2023-07-15\nê´‘ëª…1ë™\në‚¨ì\n5\n0\n\n\n\n\n\n\n\n2 ì±—GPT\n\nì½”ë“œlibrary(openai)\n\ncreate_chat_completion(\n    model = \"gpt-3.5-turbo\",\n    messages = list(\n        list(\n            \"role\" = \"system\",\n            \"content\" = \"You are a helpful assistant.\"\n        ),\n        list(\n            \"role\" = \"user\",\n            \"content\" = \"Who won the world series in 2020?\"\n        ),\n        list(\n            \"role\" = \"assistant\",\n            \"content\" = \"The Los Angeles Dodgers won the World Series in 2020.\"\n        ),\n        list(\n            \"role\" = \"user\",\n            \"content\" = \"Where was it played?\"\n        )\n    )\n)\n#&gt; $id\n#&gt; [1] \"chatcmpl-7kujkISwp9RYXMi8g3Tiu5iNBilQr\"\n#&gt; \n#&gt; $object\n#&gt; [1] \"chat.completion\"\n#&gt; \n#&gt; $created\n#&gt; [1] 1691415540\n#&gt; \n#&gt; $model\n#&gt; [1] \"gpt-3.5-turbo-0613\"\n#&gt; \n#&gt; $choices\n#&gt;   index finish_reason message.role\n#&gt; 1     0          stop    assistant\n#&gt;                                                             message.content\n#&gt; 1 The 2020 World Series was played at Globe Life Field in Arlington, Texas.\n#&gt; \n#&gt; $usage\n#&gt; $usage$prompt_tokens\n#&gt; [1] 53\n#&gt; \n#&gt; $usage$completion_tokens\n#&gt; [1] 17\n#&gt; \n#&gt; $usage$total_tokens\n#&gt; [1] 70"
  },
  {
    "objectID": "realmeter_metro.html",
    "href": "realmeter_metro.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œlibrary(tidyverse)\nlibrary(rvest)\n\nrm_url &lt;- glue::glue('http://www.realmeter.net/category/pdf/page/1/')\n\nrm_html &lt;- read_html(rm_url)\n\n## PDF ë‹¤ìš´ë¡œë“œ ë§í¬ ---------------\nrm_links_text &lt;- rm_html |&gt; \n  html_nodes(\"a\") |&gt; \n  html_text()\n\nrm_links &lt;- rm_html |&gt; \n  html_nodes(\"a\") |&gt; \n  html_attr(\"href\")\n\nrm_pdf_raw &lt;- tibble('text' = rm_links_text, 'link' = rm_links)\n\nrm_pdf_tbl &lt;- rm_pdf_raw |&gt; \n  filter(str_detect(text, \"ì£¼ê°„í†µê³„í‘œ\")) |&gt; \n  mutate(text = str_extract(text, \"\\\\d{2}ë…„\\\\s+\\\\d{1,2}ì›”\\\\s+\\\\d{1}ì£¼\"))  |&gt; \n  mutate(filename = str_extract(link, '[^/]+\\\\.pdf'))\n\n\n\n\nì½”ë“œfs::dir_create(\"data/realmeter/\")\n\ndownload.file(url = rm_pdf_tbl$link[1], mode='wb', \n              destfile = glue::glue(\"data/realmeter/{rm_pdf_tbl$filename[1]}\"))\n\n\n\n\nì½”ë“œlink &lt;- rm_pdf_tbl$link[2]\nfilename &lt;- rm_pdf_tbl$filename[2]\n\ndownload_pdfs &lt;- function(link, filename) {\n  download.file(url = link, mode='wb', \n              destfile = glue::glue(\"data/realmeter/{filename}\"))\n}\n\ndownload_pdfs(link, filename)\n\n\n\n\nì½”ë“œ\nget_reports &lt;- function(page=\"1\"){\n  \n  rm_url &lt;- glue::glue('http://www.realmeter.net/category/pdf/page/{page}/')\n\n  rm_html &lt;- read_html(rm_url)\n  \n  ## PDF ë‹¤ìš´ë¡œë“œ ë§í¬ ---------------\n  rm_links_text &lt;- rm_html |&gt; \n    html_nodes(\"a\") |&gt; \n    html_text()\n  \n  rm_links &lt;- rm_html |&gt; \n    html_nodes(\"a\") |&gt; \n    html_attr(\"href\")\n  \n  rm_pdf_raw &lt;- tibble('text' = rm_links_text, 'link' = rm_links)\n  \n  rm_pdf_tbl &lt;- rm_pdf_raw |&gt; \n    filter(str_detect(text, \"ì£¼ê°„í†µê³„í‘œ\")) |&gt; \n    # mutate(text = str_extract(text, \"\\\\d{2}ë…„\\\\s+\\\\d{1,2}ì›”\\\\s+\\\\d{1}ì£¼\"))  |&gt; \n    mutate(filename = str_extract(link, '[^/]+\\\\.pdf')) |&gt; \n    mutate(link = ifelse(str_detect(link, \"^http\"), link, \n                         glue::glue(\"http://realmeter.cafe24.com{link}\")))\n  \n  return(rm_pdf_tbl)\n}\n\nget_reports(157)\n\npdf_pages &lt;- 1:157\n\npdf_report_raw &lt;- pdf_pages |&gt; \n  enframe(value = \"page\")  |&gt; \n  slice(156) |&gt; \n  mutate(data = map(page, get_reports)) \n\npdf_report_raw |&gt; \n  unnest(data) |&gt; \n  pull(link)\n\npdf_report_raw |&gt; \n  unnest(data) |&gt; \n  mutate(report = walk2(link, filename, download_pdfs))"
  },
  {
    "objectID": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ-ë§í¬",
    "href": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ-ë§í¬",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œlibrary(tidyverse)\nlibrary(rvest)\n\nrm_url &lt;- glue::glue('http://www.realmeter.net/category/pdf/page/1/')\n\nrm_html &lt;- read_html(rm_url)\n\n## PDF ë‹¤ìš´ë¡œë“œ ë§í¬ ---------------\nrm_links_text &lt;- rm_html |&gt; \n  html_nodes(\"a\") |&gt; \n  html_text()\n\nrm_links &lt;- rm_html |&gt; \n  html_nodes(\"a\") |&gt; \n  html_attr(\"href\")\n\nrm_pdf_raw &lt;- tibble('text' = rm_links_text, 'link' = rm_links)\n\nrm_pdf_tbl &lt;- rm_pdf_raw |&gt; \n  filter(str_detect(text, \"ì£¼ê°„í†µê³„í‘œ\")) |&gt; \n  mutate(text = str_extract(text, \"\\\\d{2}ë…„\\\\s+\\\\d{1,2}ì›”\\\\s+\\\\d{1}ì£¼\"))  |&gt; \n  mutate(filename = str_extract(link, '[^/]+\\\\.pdf'))"
  },
  {
    "objectID": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ",
    "href": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œfs::dir_create(\"data/realmeter/\")\n\ndownload.file(url = rm_pdf_tbl$link[1], mode='wb', \n              destfile = glue::glue(\"data/realmeter/{rm_pdf_tbl$filename[1]}\"))"
  },
  {
    "objectID": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ-í•¨ìˆ˜",
    "href": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ-í•¨ìˆ˜",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œlink &lt;- rm_pdf_tbl$link[2]\nfilename &lt;- rm_pdf_tbl$filename[2]\n\ndownload_pdfs &lt;- function(link, filename) {\n  download.file(url = link, mode='wb', \n              destfile = glue::glue(\"data/realmeter/{filename}\"))\n}\n\ndownload_pdfs(link, filename)"
  },
  {
    "objectID": "realmeter_metro.html#ì „ì²´-ë‹¤ìš´ë¡œë“œ",
    "href": "realmeter_metro.html#ì „ì²´-ë‹¤ìš´ë¡œë“œ",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì½”ë“œ\nget_reports &lt;- function(page=\"1\"){\n  \n  rm_url &lt;- glue::glue('http://www.realmeter.net/category/pdf/page/{page}/')\n\n  rm_html &lt;- read_html(rm_url)\n  \n  ## PDF ë‹¤ìš´ë¡œë“œ ë§í¬ ---------------\n  rm_links_text &lt;- rm_html |&gt; \n    html_nodes(\"a\") |&gt; \n    html_text()\n  \n  rm_links &lt;- rm_html |&gt; \n    html_nodes(\"a\") |&gt; \n    html_attr(\"href\")\n  \n  rm_pdf_raw &lt;- tibble('text' = rm_links_text, 'link' = rm_links)\n  \n  rm_pdf_tbl &lt;- rm_pdf_raw |&gt; \n    filter(str_detect(text, \"ì£¼ê°„í†µê³„í‘œ\")) |&gt; \n    # mutate(text = str_extract(text, \"\\\\d{2}ë…„\\\\s+\\\\d{1,2}ì›”\\\\s+\\\\d{1}ì£¼\"))  |&gt; \n    mutate(filename = str_extract(link, '[^/]+\\\\.pdf')) |&gt; \n    mutate(link = ifelse(str_detect(link, \"^http\"), link, \n                         glue::glue(\"http://realmeter.cafe24.com{link}\")))\n  \n  return(rm_pdf_tbl)\n}\n\nget_reports(157)\n\npdf_pages &lt;- 1:157\n\npdf_report_raw &lt;- pdf_pages |&gt; \n  enframe(value = \"page\")  |&gt; \n  slice(156) |&gt; \n  mutate(data = map(page, get_reports)) \n\npdf_report_raw |&gt; \n  unnest(data) |&gt; \n  pull(link)\n\npdf_report_raw |&gt; \n  unnest(data) |&gt; \n  mutate(report = walk2(link, filename, download_pdfs))"
  },
  {
    "objectID": "realmeter_metro.html#ë‹¤ìš´ë¡œë“œ-ëª©ë¡",
    "href": "realmeter_metro.html#ë‹¤ìš´ë¡œë“œ-ëª©ë¡",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n2.1 ë‹¤ìš´ë¡œë“œ ëª©ë¡",
    "text": "2.1 ë‹¤ìš´ë¡œë“œ ëª©ë¡\n\nì½”ë“œlibrary(tidyverse)\nlibrary(rvest)\n\n## í•¨ìˆ˜\nget_reports &lt;- function(page=\"1\"){\n  \n  cat(\"\\n----------------------------\\n\", \n      \"     \", page, \" í˜ì´ì§€\",\n      \"\\n----------------------------\\n\")\n  \n  rm_url &lt;- glue::glue('http://www.realmeter.net/category/pdf/page/{page}/')\n\n  rm_html &lt;- read_html(rm_url)\n  \n  ## PDF ë‹¤ìš´ë¡œë“œ ë§í¬ ---------------\n  rm_links_text &lt;- rm_html |&gt; \n    html_nodes(\"a\") |&gt; \n    html_text()\n  \n  rm_links &lt;- rm_html |&gt; \n    html_nodes(\"a\") |&gt; \n    html_attr(\"href\")\n  \n  rm_pdf_raw &lt;- tibble('text' = rm_links_text, 'link' = rm_links)\n  \n  rm_pdf_tbl &lt;- rm_pdf_raw |&gt; \n    filter(str_detect(text, \"ì£¼ê°„í†µê³„í‘œ\")) |&gt; \n    # mutate(text = str_extract(text, \"\\\\d{2}ë…„\\\\s+\\\\d{1,2}ì›”\\\\s+\\\\d{1}ì£¼\"))  |&gt; \n    mutate(filename = str_extract(link, '[^/]+\\\\.pdf')) |&gt; \n    mutate(link = ifelse(str_detect(link, \"^http\"), link, \n                         glue::glue(\"http://realmeter.cafe24.com{link}\")))\n  \n  return(rm_pdf_tbl)\n}\n\n## ë‹¤ìš´ë¡œë“œ í˜ì´ì§€\n\npdf_pages &lt;- 1:158\n\npdf_report_raw &lt;- pdf_pages |&gt; \n  enframe(value = \"page\")  |&gt; \n  mutate(data = map(page, get_reports))\n\npdf_report_tbl &lt;- pdf_report_raw |&gt; \n  select(data) |&gt; \n  mutate(nrow = map_int(data, nrow)) |&gt; \n  filter(nrow !=0) |&gt; \n  unnest(data)\n\npdf_report_tbl |&gt; \n  write_rds(\"data/realmeter/pdf_report_tbl.rds\")"
  },
  {
    "objectID": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ-1",
    "href": "realmeter_metro.html#pdf-ë‹¤ìš´ë¡œë“œ-1",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "\n2.2 PDF ë‹¤ìš´ë¡œë“œ",
    "text": "2.2 PDF ë‹¤ìš´ë¡œë“œ\n\nì½”ë“œpdf_report_tbl &lt;- \n  read_rds(\"data/realmeter/pdf_report_tbl.rds\")\n\n\ndownload_pdfs &lt;- function(link, filename) {\n  cat(\"\\n----------------------------\\n\", \n      \"     \", filename, \": íŒŒì¼ëª…\",\n      \"\\n----------------------------\\n\")\n  download.file(url = link, mode='wb', \n              destfile = glue::glue(\"data/realmeter/{filename}\"))\n}\n\npdf_report_tbl |&gt; \n  mutate(pdfs = walk2(link, filename, download_pdfs))"
  }
]