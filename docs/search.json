[
  {
    "objectID": "day_01.html",
    "href": "day_01.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "1 ì•„ì‹œì•„ ëŒ€ë¥™ ìƒ‰ì¹ \n\n\nì½”ë“œ\n# Libraries Loading -------------------------------------------------------\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(ggtext)\nlibrary(maps)\nextrafont::loadfonts(\"win\")\n\n\n# Data Reading and Wrangling ----------------------------------------------\n# Generating pixel grid \nlat &lt;- tibble(lat = seq(-90, 90, by = .5))\nlong &lt;- tibble(long = seq(-180, 180, by = .5))\n\ndots &lt;- lat %&gt;% \n  full_join(long, by = character()) %&gt;% \n  as_tibble()\n\ndots &lt;- dots %&gt;% \n  mutate(country = map.where('world', long, lat),\n         lakes = map.where('lakes', long, lat)) %&gt;% \n  filter(!is.na(country) & is.na(lakes)) %&gt;% \n  dplyr::select(-lakes)\n\nworld &lt;- rnaturalearth::ne_countries(scale = \"medium\", returnclass = \"sf\") %&gt;% \n  filter(region_wb != \"Antarctica\")\n\ndots &lt;- dots %&gt;% \n  mutate(\n    country = case_when(\n      country %in% c(\"Comoros:Grande Comore\", \"Comoros:Anjouan\") ~ \"Comoros\",\n      country %in% c(\"Cape Verde:Santo Antao\",\"Cape Verde:Sao Tiago\") ~ \"Cape Verde\",\n      country == \"Guinea-Bissau\" ~ \"Guinea Bissau\", \n      country == \"Equatorial Guinea:Rio Muni\" ~ \"Equatorial Guinea\", \n      country ==  \"Malawi:3\" ~ \"Malawi\",\n      country == \"Somalia:Somaliland\" ~ \"Somaliland\",\n      country == \"Tanzania\" ~ \"United Republic of Tanzania\", \n      TRUE ~ country))\n\nasia_dots &lt;- world %&gt;%\n  filter(continent == \"Asia\") %&gt;% \n  dplyr::select(admin, mapcolor7) %&gt;% \n  left_join(dots, by = c(\"admin\" = \"country\")) \n\n# Graphic -----------------------------------------------------------------\npalette &lt;- c(\"#8931EF\", \"#F2CA19\", \"#FF00BD\" , \"#0057E9\", \"#87E911\", \"#E11845\", \"#FF8A12\") \n\n# 2021 Version ----\nasia_dots %&gt;% \n  ggplot() + \n  geom_point(aes(x = long, y = lat, color = factor(mapcolor7)), size = .95) + \n  guides(color =\"none\") +\n  scale_color_manual(\n    values = palette\n  ) + \n  labs(\n    title = \"ì•„ì‹œì•„\", \n    subtitle = glue::glue(\"1 ëŒ€ë¥™, {scales::comma(nrow(asia_dots))} ì \"), \n    caption = \"#30DayMapChallenge - 1ì¼ : ëŒ€ë¥™ìƒ‰ì¹ \"\n  ) + \n  annotate(geom = \"text\", x = 130, y = 38, label = \"ëŒ€í•œë¯¼êµ­\", size = 4, family = \"MaruBuri\") + \n  annotate(geom = \"segment\", x = -23.5, y = 12, xend = -23.5, yend = 14.5, size = .125, color = \"white\") + \n  coord_fixed(clip = \"off\") + \n  theme_void(base_family = \"MaruBuri\") + \n  theme(\n    plot.background = element_rect(fill = \"#111111\",color = NA),\n    plot.title = element_text(hjust = .5, size = rel(3), color = \"white\", family = \"MaruBuri\", margin = margin(t = 25,b = 15)),\n    plot.subtitle = element_text(hjust = .5, size = rel(2.5), color = \"white\",family = \"MaruBuri\", face = \"bold\", margin = margin(b = 35)),\n    plot.caption = element_text(size = rel(1.125), hjust = .5, color = \"white\", family = \"MaruBuri\", margin = margin(b = 15))\n  )\n\n\n\n\n\n\n\n\n\n\n\n2 ì•„ì‹œì•„ ëŒ€ë¥™ ì \n\n\nì½”ë“œ\n# 2022 Version ---- \nasia_dots %&gt;% \n  ggplot() + \n  geom_point(aes(x = long, y = lat), color = \"#F61753\", size = .05) + \n  labs(\n    title = \"ì•„ì‹œì•„\", \n    subtitle = glue::glue(\"1 ëŒ€ë¥™, {scales::comma(nrow(asia_dots))} ì \"), \n    caption = \"#30DayMapChallenge - 1ì¼ : ëŒ€ë¥™ìƒ‰ì¹ \"\n  ) + \n  annotate(geom = \"text\", x = 130, y = 38, label = \"ëŒ€í•œë¯¼êµ­\", size = 4, family = \"MaruBuri\") + \n  annotate(geom = \"segment\", x = -23.5, y = 12, xend = -23.5, yend = 14.5, size = .125) + \n  coord_fixed(clip = \"off\") + \n  theme_void(base_family = \"MaruBuri\") + \n  theme(\n    plot.background = element_rect(fill = \"#FFFFFF\",color = NA),\n    plot.title = element_text(hjust = .5, size = rel(3),  family = \"MaruBuri\", margin = margin(t = 25,b = 15)),\n    plot.subtitle = element_text(hjust = .5, color =\"grey30\", size = rel(2.5), family = \"MaruBuri\", face = \"bold\", margin = margin(b = 35)),\n    plot.caption = element_text(size = rel(1.5), hjust = .5, family = \"MaruBuri\", margin = margin(b = 15))\n  )"
  },
  {
    "objectID": "day_02.html",
    "href": "day_02.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì†ŒìŠ¤ì½”ë“œ\n\n\n\nGIS 101: How do I map data points in R"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì°¸ê³  ì›¹ì‚¬ì´íŠ¸\n\n#30DayMapChallenge ğŸŒğŸŒğŸŒ\n30 DAY MAP CHALLENGE IN R\nAbdoulMa/30DayMapChallenge"
  },
  {
    "objectID": "day_02.html#ì¸êµ¬ìˆ˜",
    "href": "day_02.html#ì¸êµ¬ìˆ˜",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "1.1 ì¸êµ¬ìˆ˜",
    "text": "1.1 ì¸êµ¬ìˆ˜\n\n\nì½”ë“œ\nlibrary(readxl)\nlibrary(tidyverse)\n\ngeonames_raw &lt;- read_excel(\"data/geonames-all-cities-with-a-population-1000@public.xlsx\") %&gt;% \n    janitor::clean_names()\n\nkorea_raw &lt;- geonames_raw %&gt;% \n  select(name, country_code, population, coordinates) %&gt;% \n  filter(country_code  == \"KR\") %&gt;% \n  separate(coordinates, into = c(\"lat\", \"long\"), sep = \",\", convert = TRUE)\n\n\nkorea &lt;- korea_raw %&gt;% \n  mutate(ë„ì‹œëª… = c(\"í•œì²œë¦¬\", \"ì²­ì†¡êµ°\", \"ì²­ì‚°\", \"í•¨ì—´\", \"ë™ë©´\",\n\"ìœ ë ¤\", \"ì‹¬ì›\", \"ë²•ì„±\", \"ì—°ì²œ\", \"ë™ë³µ\", \"ì‚°í‹°ì˜¥\",\n\"ë‚œê²\", \"ì œì£¼ì‹œ\", \"ì•ˆë‚¨\", \"ê¸ˆì •\", \"ìƒì‚¬\", \"ìŠ¹ì£¼\",\n\"ë¶ˆê°‘\", \"ì›ì£¼\", \"ë²Œêµ\", \"ë²•ì›\", \"ê´‘ì£¼\", \"ì‹ ì•ˆ\",\n\"êµ°ì„œ\", \"êµ°ë¶\", \"ì‹ ë™\", \"ì¡°ì„±\", \"ë¬¸ê²½\", \"ì„ì‹¤\",\n\"ìš©ì‚°ë™\", \"í•˜ì„±\", \"ê²¸ë°±\", \"ì˜ê´‘\", \"ì˜ˆì‚°\",\n\"ì–‘ì£¼\", \"ë‹¹ì§„\", \"ìƒì£¼\", \"ê³ ì°½\", \"í•´ë‚¨\", \"ì£¼ë¬¸ì§„\",\n\"ì²­ì£¼ì‹œ\", \"ì§„ì²œ\", \"ê°€ì´ê²Œíˆ¬ë¦¬\", \"ê·œì•”\", \"ì„ ì›\",\n\"íƒ„í˜„\", \"ìš¸ì‚°\", \"ì˜ì •ë¶€ì‹œ\", \"ìƒì£¼\", \"ë¬¸ê²½\", \"ê°€í‰\",\n\"í˜„í’\", \"í™ì„±\", \"ì •ì˜¥\", \"ì¥ì„±\", \"ì‹ í˜„\",\n\"ê´‘ëª…\", \"íšŒë‚¨\", \"ìš©ì‚°\", \"ë²ˆì•”\", \"ì›”ê³¶\", \"ì¥í¥\",\n\"ì•„ì´ì„¼\", \"ì˜ë•\", \"ì „ì‚°\", \"ë¶€ì—¬\", \"ë¶€ì‚°\", \"ì˜¤ì‚°\",\n\"ê³ ì„±\", \"ê²½ì‚°ì‹œ\", \"êµ°ìœ„\", \"ì¥í¥\", \"ì„±ë‚¨ì‹œ\",\n\"ë¯¸ì¡°\", \"ì˜¥ê³¡\", \"ëŒ€êµ¬\", \"ê¹€ì œ\", \"ê¹€ì²œ\", \"ìµì‚°\",\n\"ê´‘ì–‘\", \"í†µí•´\", \"ë™ì´\", \"ì˜¤ë‚¨\", \"ë´‰ê°•\", \"ìš©í™”\",\n\"ì„±í™˜\", \"ê°•í¬\", \"ì‹±ì™•\", \"ì •ì\", \"ê°•ë™\", \"ì²­í’\",\n\"ì§„ìƒ\", \"ì˜¹ë£¡\", \"ë´‰ë˜\", \"ì¸ê³„\", \"ë¹„ì¸\", \"ê³µì£¼\",\n\"ì¶©ì£¼\", \"ì•ˆì–‘ì‹œ\", \"ì¥í‰\", \"í•´ì•ˆ\", \"ë¬¸ë•\",\n\"ë¯¸ë ¥\", \"í•´ë¦¬\", \"ë¬¼ëŸ‰\", \"êµ¬ë¦¼\", \"ëŒ€ì „\", \"ê³ ì„±\",\n\"êµì‚¬ì´\", \"ì—°ë¬´\", \"í™”ë‚¨\", \"ì„œìƒ\", \"ì„œì„\", \"ë‚¨ë©´\",\n\"í•´ë ¹\", \"ì†¡ê´‘\", \"ìƒí•˜\", \"ë™ê³„\", \"ì„œìš¸\", \"ì•„ì‚°\",\n\"ê´´ì‚°\", \"í•˜ì–‘\", \"ì§„ì•ˆêµ°\", \"ì¥ì•ˆ\", \"ë‚¨ì–‘ì£¼\", \"ì•ˆë‚´\",\n\"êµë™\", \"ì§„ì›”\", \"ì£¼ì•”\", \"ëŒ€ì‚°\", \"ì˜ë™\", \"ë°±ì „\",\n\"í† ì„±\", \"ê³µìŒ\", \"ë‹´ì–‘\", \"ë³´ë ¹\", \"ì†ì´ˆ\", \"ê´‘ì£¼\",\n\"êµ¬ë£¡í¬\", \"ê°•í™”êµ°\", \"ì²­ì–‘\", \"ì§„ì£¼\", \"ì§„ì \", \"ì•ˆì‚°ì‹œ\",\n\"ë°œê¸ˆ\", \"ë³„ëŸ‰\", \"ë‚¨ë©´\", \"íƒœë°±\", \"í‘¸ì•ˆ\", \"í™”ìˆœ\", \"í™”ì²œ\", \"ì „ì£¼\",\n\"ì§€ë„\", \"ì´ì›\", \"í™”ì›\", \"ì„œê·€í¬\", \"ë³‘ê³¡\", \"í†µì§„\",\n\"ì§„ì ‘\", \"ë³´ì„±\", \"ì˜ì•”\", \"ì—¼ì‚°\", \"ì¹ ë³´\", \"ì•„ì´ì„¼\",\n\"í¬í•­\", \"ëª©í¬\", \"êµ¬ë¯¸\", \"ê¹€í•´\", \"ì²œì•ˆ\", \"ì¼ê´‘\",\n\"ì‚°ì„œ\", \"ì‚°ë‚´\", \"ë•ì§„\", \"ëŒ€ë§ˆ\", \"ì™„ì£¼\", \"ìˆ˜ì›\",\n\"í‰ì°½\", \"êµ°í¬\", \"ì¸ì²œ\", \"í™”ì„±ì‹œ\", \"ì°½ì›\", \"ì°½ìˆ˜\",\n\"í™ë†\", \"ì–‘ì‚¬\", \"ê´‘íƒ„\", \"ìœ ì¹˜\", \"ì—°ì¼\", \"ì–‘í‰\",\n\"ì™œê´€\", \"ì‹¬ì²œ\", \"ë¬´ì•ˆ\", \"ê°•ë¦‰\", \"í™”ë„\", \"ì™€ë¶€\",\n\"ì„¤ì²œ\", \"ëŒ€í•©\", \"ë™ë˜\", \"ë„¤ì´ì¸ \", \"ì‹ íƒ„ì‹ \", \"ê¸ˆì‚°\",\n\"ì¶”í’ë ¹\", \"ì•ˆë™\", \"ì²­ë‚¨\", \"í™©ê°„\", \"ì°½ë…•\", \"ì—¬ì£¼\",\n\"ë°€ì–‘\", \"í™ì²œ\", \"ì² ì›\", \"í•œë‚¨\", \"ì„¸ì¢…\", \"ë°˜ë‚¨\",\n\"ê¸ˆì„±\", \"í•˜ë™\", \"ì˜ì²œ\", \"ì¶˜ì²œ\", \"ë°±ìˆ˜\", \"ì„±ìˆ˜\",\n\"í•™ì‚°\", \"ìˆœì²œ\", \"êµ°ì‚°\", \"ì²­í‰\", \"ì†¡ê°•ë™\", \"ìˆ˜ë™\",\n\"ì™¸ì„œ\", \"ë‚™ì›”\", \"ê°•ì§„\", \"ìš©ì•ˆ\", \"ë™ë˜\", \"ë‚˜ì£¼\",\n\"ë¬¸ì‚°\", \"êµ¬ë¦¬ì‹œ\", \"ì°½í‰\", \"í•˜ì \", \"ì••í•´\", \"ë„í¬\",\n\"êµ°ì„œ\", \"í¥í•´\", \"ìœ ì„±\", \"ì´ì–‘\", \"íƒœì‚°ë¦¬\", \"ë¶€ì²œì‹œ\",\n\"ë…¼ì‚°\", \"ê´‘ì–‘\", \"ì´ì²œì‹œ\", \"ì—¬ìˆ˜\", \"ì›…ìƒ\", \"ë‚´ì„ \",\n\"íŒŒì£¼\", \"ì²­ì„±\", \"ì„œì‚°\", \"ê²½ì£¼\", \"ê´€ì´Œ\", \"ìƒì›”\", \"ì‹œì¢…\",\n\"êµ¬ì •\", \"ë™ë©´\", \"ë§ˆì‚°\", \"ê³ ì–‘ì‹œ\", \"ê¸°ì¥\", \"ì•ˆì„±\",\n\"ì²­í•˜\", \"êµ°ë¶\", \"ì†¡í•´\", \"ê´‘ì \", \"ê´€ì¸\", \"ë°©ì‚°\",\n\"ë…¸ë™\", \"ë‚˜ì‚°\", \"ì„ì\", \"ì–‘êµ¬\", \"ì¼ë¡œ\", \"ì˜¤ì²œ\",\n\"ì‹ ì„œ\", \"ë¶€í‰\", \"í™”ì–‘\", \"ì„¸ì§€\", \"í•´ë³´\", \"êµ°ë‚¨\",\n\"ìŒì¹˜\", \"ì–‘ì‚°\", \"ì˜¥ì²œ\", \"êµ¬ë¡€\", \"í‘¸ë°œ\", \"ì‚¼ìŠ¹\",\n\"ì‚¼ì‚°\", \"ì‹ ì•ˆ\", \"ì •ëŸ‰\", \"í•´ì œ\")) %&gt;% \n  filter(population &gt; 0) %&gt;% \n  arrange(desc(population))\n\nkorea\n#&gt; # A tibble: 130 Ã— 6\n#&gt;    name        country_code population   lat  long ë„ì‹œëª…\n#&gt;    &lt;chr&gt;       &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; \n#&gt;  1 Seoul       KR             10349312  37.6  127. ì„œìš¸  \n#&gt;  2 Busan       KR              3678555  35.1  129. ë¶€ì‚°  \n#&gt;  3 Incheon     KR              2954955  37.5  127. ì¸ì²œ  \n#&gt;  4 Daegu       KR              2566540  35.9  129. ëŒ€êµ¬  \n#&gt;  5 Gwangju     KR              1490092  35.2  127. ê´‘ì£¼  \n#&gt;  6 Daejeon     KR              1469543  36.3  127. ëŒ€ì „  \n#&gt;  7 Suwon       KR              1241311  37.3  127. ìˆ˜ì›  \n#&gt;  8 Goyang-si   KR              1073069  37.7  127. ê³ ì–‘ì‹œ\n#&gt;  9 Seongnam-si KR              1031935  37.4  127. ì„±ë‚¨ì‹œ\n#&gt; 10 Ulsan       KR               962865  35.5  129. ìš¸ì‚°  \n#&gt; # â„¹ 120 more rows"
  },
  {
    "objectID": "day_02.html#df-sf-ê°ì²´",
    "href": "day_02.html#df-sf-ê°ì²´",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "2.1 DF â†’ sf ê°ì²´",
    "text": "2.1 DF â†’ sf ê°ì²´\n\n\nì½”ë“œ\ncrsLONGLAT &lt;- \"+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0\"\n\nkorea_sf &lt;- korea |&gt;\n    sf::st_as_sf(\n        coords = c(\"long\", \"lat\"),\n        crs = crsLONGLAT\n    )\n\nggplot() +\n    geom_sf(\n        data = korea_sf,\n        color = \"#7d1d53\", fill = \"#7d1d53\"\n    )"
  },
  {
    "objectID": "day_02.html#shapefile",
    "href": "day_02.html#shapefile",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "2.2 shapefile",
    "text": "2.2 shapefile\ngiscoR ìœ ë¡œìŠ¤íƒ¯ - GISCO(ìœ ëŸ½ì§‘í–‰ìœ„ì›íšŒ ì§€ë¦¬ì •ë³´ì‹œìŠ¤í…œ)ì—ì„œ ë°ì´í„°ë¥¼ ë‹¤ìš´ë¡œë“œ ì—†ì´ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê°€ë²¼ìš´ APIë¥¼ ì œê³µí•œë‹¤.\n\n\nì½”ë“œ\nkr &lt;- giscoR::gisco_get_countries(\n    resolution = \"1\",\n    country = \"KOR\") |&gt;\n    sf::st_transform(crsLONGLAT)\n\nplot(kr)"
  },
  {
    "objectID": "day_02.html#ê²°í•©",
    "href": "day_02.html#ê²°í•©",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "2.3 ê²°í•©",
    "text": "2.3 ê²°í•©\n\n\nì½”ë“œ\nkr_pop_sf &lt;- sf::st_intersection(korea_sf, kr)\n\nplot(sf::st_geometry(kr_pop_sf))"
  },
  {
    "objectID": "day_03.html",
    "href": "day_03.html",
    "title": "ìŠ¤íŒŒì´í¬(Spike map)",
    "section": "",
    "text": "ì†ŒìŠ¤ì½”ë“œ\n\n\n\nMaking crisp spike maps with R\n\n\n\n1 íŒ¨í‚¤ì§€\n\n\nì½”ë“œ\n### 0. PACKAGES\n### ------------------------\nlibs &lt;- c(\n    \"tidyverse\", \"R.utils\",\n    \"httr\", \"sf\", \"stars\",\n    \"rayshader\"\n)\n\n# install missing libraries\ninstalled_libs &lt;- libs %in% rownames(installed.packages())\nif (any(installed_libs == F)) {\n    install.packages(libs[!installed_libs])\n}\n\n# load libraries\ninvisible(lapply(libs, library, character.only = T))\n\n\n\n\n2 ì¸êµ¬ ë°ì´í„°\nì¸ë„ì£¼ì˜ì  ì˜ì—­ì—ì„œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¸êµ¬ ë°ì´í„°ë¥¼ í™•ë³´í•˜ëŠ” ê²ƒì€ ìƒëª…ì„ êµ¬í•˜ëŠ” í™œë™ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ëŠ” ë° ë§¤ìš° ì¤‘ìš”í•˜ë‹¤. KONTUR: Population Density Dataset ì¸êµ¬ ë°ì´í„° ì„¸íŠ¸ëŠ” 400m í•´ìƒë„ì˜ ì¸êµ¬ ìˆ˜ë¥¼ ê°€ì§„ H3 ìœ¡ê°í˜•ìœ¼ë¡œ í‘œí˜„ëœë‹¤. ì¼ë°˜ì ì¸ ì •ì‚¬ê°í˜• ê·¸ë¦¬ë“œ ëŒ€ì‹  H3 ê·¸ë¦¬ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ì •ì‚¬ê°í˜•ê³¼ ë‹¬ë¦¬ ìœ¡ê°í˜•ì€ ìœ¡ê°í˜• ì¤‘ì‹¬ì ê³¼ ì¸ì ‘í•œ ì…€ì˜ ì¤‘ì‹¬ ì‚¬ì´ì˜ ê±°ë¦¬ê°€ ê°™ê¸° ë•Œë¬¸ì´ë‹¤. Republic of Korea: Population Density for 400m H3 Hexagons ë°ì´í„°ë„ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥í•˜ë‹¤.\n\n\nì½”ë“œ\n### 1. DOWNLOAD & UNZIP DATA\n### ------------------------\nurl &lt;-\n    \"https://geodata-eu-central-1-kontur-public.s3.amazonaws.com/kontur_datasets/kontur_population_KR_20220630.gpkg.gz\"\nfile_name &lt;- \"korea-population.gpkg.gz\"\n\nget_population_data &lt;- function() {\n    res &lt;- httr::GET(\n        url,\n        write_disk(file_name),\n        progress()\n    )\n\n    R.utils::gunzip(file_name, remove = F)\n}\n\nget_population_data()\n\n\n\n\n3 ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°\n\n\nì½”ë“œ\n### 2. LOAD DATA\n### -------------\nload_file_name &lt;- gsub(\".gz\", \"\", \"korea-population.gpkg.gz\")\n\ncrsWGS &lt;- \"+proj=tmerc +lat_0=38 +lon_0=128 +k=0.9999 +x_0=400000 +y_0=600000 +ellps=bessel +towgs84=-115.8,474.99,674.11,1.16,-2.31,-1.63,6.43 +units=m +no_defs\"\n\nget_population_data &lt;- function() {\n    pop_df &lt;- sf::st_read(\n        load_file_name\n    ) |&gt;\n        sf::st_transform(crs = crsWGS)\n}\n\npop_sf &lt;- get_population_data()\n#&gt; Reading layer `population' from data source \n#&gt;   `D:\\tcs\\map_challenge\\korea-population.gpkg' using driver `GPKG'\n#&gt; Simple feature collection with 74131 features and 2 fields\n#&gt; Geometry type: POLYGON\n#&gt; Dimension:     XY\n#&gt; Bounding box:  xmin: 13871420 ymin: 3909557 xmax: 14680470 ymax: 4667313\n#&gt; Projected CRS: WGS 84 / Pseudo-Mercator\n\nhead(pop_sf)\n#&gt; Simple feature collection with 6 features and 2 fields\n#&gt; Geometry type: POLYGON\n#&gt; Dimension:     XY\n#&gt; Bounding box:  xmin: 411917.5 ymin: 560711.5 xmax: 457833.9 ymax: 576628\n#&gt; CRS:           +proj=tmerc +lat_0=38 +lon_0=128 +k=0.9999 +x_0=400000 +y_0=600000 +ellps=bessel +towgs84=-115.8,474.99,674.11,1.16,-2.31,-1.63,6.43 +units=m +no_defs\n#&gt;                h3 population                           geom\n#&gt; 1 8830ec4415fffff         51 POLYGON ((436278.5 568529.6...\n#&gt; 2 8830ec4319fffff         96 POLYGON ((419056.4 563804.4...\n#&gt; 3 8830ec42e5fffff         45 POLYGON ((422803.1 566238.5...\n#&gt; 4 8830ec611bfffff        149 POLYGON ((457833.9 560977.9...\n#&gt; 5 8830ec52e7fffff         37 POLYGON ((412671.2 575918.4...\n#&gt; 6 8830ec51d7fffff        188 POLYGON ((415418.9 568732.5...\nggplot() +\n    geom_sf(\n        data = pop_sf,\n        color = \"grey10\", fill = \"grey10\"\n    )\n\n\n\n\n\n\n\n\n\n\n\n4 Shape to Raster\n\n\nì½”ë“œ\n### 3. SHP TO RASTER\n### ----------------\n\nbb &lt;- sf::st_bbox(pop_sf)\n\nget_raster_size &lt;- function() {\n    height &lt;- sf::st_distance(\n        sf::st_point(c(bb[[\"xmin\"]], bb[[\"ymin\"]])),\n        sf::st_point(c(bb[[\"xmin\"]], bb[[\"ymax\"]]))\n    )\n    width &lt;- sf::st_distance(\n        sf::st_point(c(bb[[\"xmin\"]], bb[[\"ymin\"]])),\n        sf::st_point(c(bb[[\"xmax\"]], bb[[\"ymin\"]]))\n    )\n\n    if (height &gt; width) {\n        height_ratio &lt;- 1\n        width_ratio &lt;- width / height\n    } else {\n        width_ratio &lt;- 1\n        height_ratio &lt;- height / width\n    }\n\n    return(list(width_ratio, height_ratio))\n}\nwidth_ratio &lt;- get_raster_size()[[1]]\nheight_ratio &lt;- get_raster_size()[[2]]\n\nsize &lt;- 3000\nwidth &lt;- round((size * width_ratio), 0)\nheight &lt;- round((size * height_ratio), 0)\n\nget_population_raster &lt;- function() {\n    pop_rast &lt;- stars::st_rasterize(\n        pop_sf |&gt;\n            dplyr::select(population, geom),\n        nx = width, ny = height\n    )\n\n    return(pop_rast)\n}\n\npop_rast &lt;- get_population_raster()\nplot(pop_rast)\n\npop_mat &lt;- pop_rast |&gt;\n    as(\"Raster\") |&gt;\n    rayshader::raster_to_matrix()\n\nlibrary(MetBrewer)\n# Specify the palette name in its own variable so that\n# we can reference it easily later.\npal &lt;- \"Demuth\"\ncolors &lt;- met.brewer(pal)\n\n# cols &lt;- rev(c(\n#     '#00004d', '#342863', '#595078', '#7d7b8a', '#a7a88b'\n# ))\n\ntexture &lt;- grDevices::colorRampPalette(colors)(256)\n\n# Create the initial 3D object\npop_mat |&gt;\n    rayshader::height_shade(texture = texture) |&gt;\n    rayshader::plot_3d(\n        heightmap = pop_mat,\n        solid = F,\n        soliddepth = 0,\n        zscale = 15,\n        shadowdepth = 0,\n        shadow_darkness = .95,\n        windowsize = c(800, 800),\n        phi = 65,\n        zoom = .65,\n        theta = -30,\n        background = \"white\"\n    )\n\n# Use this to adjust the view after building the window object\nrayshader::render_camera(phi = 75, zoom = .7, theta = 0)\n\nlibrary(rayrender)\n\nrayshader::render_highquality(\n    filename = \"images/korea_population_2022.png\",\n    preview = FALSE,\n    light = T,\n    lightdirection = 225,\n    lightaltitude = 60,\n    lightintensity = 400,\n    interactive = F,\n    width = width, height = height\n)"
  },
  {
    "objectID": "day_04.html",
    "href": "day_04.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì†ŒìŠ¤ì½”ë“œ\n\n\n\nCreate crisp topographic maps with R\n\n\n\n1 íŒ¨í‚¤ì§€\n\n\nì½”ë“œ\n### 0. PACKAGES\n### ------------------------\nlibs &lt;- c(\n    \"elevatr\", \"terra\", \"tidyverse\",\n    \"sf\", \"giscoR\", \"osmdata\", \"marmap\"\n)\n\n# install missing libraries\ninstalled_libs &lt;- libs %in% rownames(installed.packages())\nif (any(installed_libs == F)) {\n    install.packages(libs[!installed_libs])\n}\n\n# load libraries\ninvisible(lapply(libs, library, character.only = T))\n\n\n\n\n2 êµ­ê°€ ë°ì´í„°\n\n\nì½”ë“œ\n# 1. GET COUNTRY MAP\n#------------------\ncrsLONGLAT &lt;- \"+proj=longlat +datum=WGS84 +no_defs\"\nget_country_sf &lt;- function() {\n    country_sf &lt;- giscoR::gisco_get_countries(\n        year = \"2020\",\n        epsg = \"4326\",\n        resolution = \"10\",\n        country = \"KR\"\n    ) |&gt;\n        sf::st_transform(crs = crsLONGLAT)\n\n    return(country_sf)\n}\n\ncountry_sf &lt;- get_country_sf()\n\n\n\n\n3 êµ­ê°€ ê³ ë„ ë°ì´í„°\n\n\nì½”ë“œ\n# 2. GET COUNTRY ELEVATION DATA\n#------------------------------\nget_elevation_data &lt;- function() {\n    country_elevation &lt;- elevatr::get_elev_raster(\n        locations = country_sf,\n        z = 7,\n        clip = \"locations\"\n    )\n\n    return(country_elevation)\n}\n\ncountry_elevation &lt;- get_elevation_data()\nterra::plot(country_elevation)\n\n\n\n\n4 BBOX ê³ ë„ ë°ì´í„°\n\n\nì½”ë“œ\n# 3. GET BBOX ELEVATION DATA\n#------------------------------\nget_elevation_data_bbox &lt;- function() {\n    country_elevation &lt;- elevatr::get_elev_raster(\n        locations = country_sf,\n        z = 7,\n        clip = \"bbox\"\n    )\n\n    return(country_elevation)\n}\n\ncountry_elevation &lt;- get_elevation_data_bbox() |&gt;\n    terra::rast()\n\n\n\n\n\n\n\n\n\nì½”ë“œ\n# 4. PLOT\n#---------\nkr_elevation_gg &lt;- country_elevation |&gt;\n    as.data.frame(xy = TRUE) |&gt; \n    ggplot() +\n    geom_tile(\n        aes(x = x, y = y, fill = fileb78875126249 )\n    ) +\n    geom_sf(\n        data = country_sf,\n        fill = \"transparent\", color = \"yellow\", size = .25\n    ) +\n    theme_void()\n\nggsave(\n    filename = \"images/kr_blue_map.png\", width = 7, \n    height = 8.5, dpi = 600, device = \"png\", \n    kr_elevation_gg, bg = \"white\"\n)\n\n\n\n\n\n\n\n\n\n5 ì‹œê°í™”\n\n\nì½”ë“œ\n# 7. FINAL MAP\n#-------------\n\ncountry_elevation_df &lt;- country_elevation |&gt;\n    as.data.frame(xy = T) |&gt;\n    na.omit()\n\nnames(country_elevation_df)[3] &lt;- \"elevation\"\n\ncountry_map &lt;-\n    ggplot(data = country_elevation_df) +\n    geom_raster(\n        aes(x = x, y = y, fill = elevation),\n        alpha = 1\n    ) +\n    marmap::scale_fill_etopo() +\n    coord_sf(crs = crsLONGLAT) +\n    labs(\n        x = \"\",\n        y = \"\",\n        title = \"\",\n        subtitle = \"\",\n        caption = \"\"\n    ) +\n    theme_minimal() +\n    theme(\n        axis.line = element_blank(),\n        axis.text.x = element_blank(),\n        axis.text.y = element_blank(),\n        axis.ticks = element_blank(),\n        legend.position = \"none\",\n        panel.grid.major = element_blank(),\n        panel.grid.minor = element_blank(),\n        plot.margin = unit(c(t = 0, r = 0, b = 0, l = 0), \"cm\"),\n        plot.background = element_blank(),\n        panel.background = element_blank(),\n        panel.border = element_blank()\n    )\n\ncountry_map\n\nggsave(\n    filename = \"images/korea_topo_map.png\", width = 7, \n    height = 8.5, dpi = 600, device = \"png\", \n    country_map, bg = \"white\"\n)\n\n\n\n\n\n\n\n\n\n6 ì¶”ê°€ì‘ì—…\nhttp://bboxfinder.com/ ì—ì„œ ì œê±°í•  ì˜ì—­ì„ ì„ ì •í•œë‹¤.\n\n\nì½”ë“œ\n# 5. CROP AREA\n#--------------------\n# 7.805786,38.779781,10.134888,41.294317\nget_area_bbox &lt;- function() {\n    xmin &lt;- 7.805786\n    xmax &lt;- 10.134888\n    ymin &lt;- 38.779781\n    ymax &lt;- 41.294317\n\n    bbox &lt;- sf::st_sfc(\n        sf::st_polygon(list(cbind(\n            c(xmin, xmax, xmax, xmin, xmin),\n            c(ymin, ymin, ymax, ymax, ymin)\n        ))),\n        crs = crsLONGLAT\n    )\n\n    return(bbox)\n}\n\nbbox &lt;- get_area_bbox()\n\ncrop_area_with_polygon &lt;- function() {\n    bbox_vect &lt;- terra::vect(bbox)\n    bbox_raster &lt;- terra::crop(country_elevation, bbox_vect)\n    bbox_raster_final &lt;- terra::mask(\n        bbox_raster, bbox_vect\n    )\n    return(bbox_raster_final)\n}\n\nbbox_raster_final &lt;- crop_area_with_polygon()\n\nbbox_raster_final |&gt;\n    as.data.frame(xy = T) |&gt;\n    ggplot() +\n    geom_tile(\n        aes(x = x, y = y, fill = file514862c13e19)\n    ) +\n    geom_sf(\n        data = country_sf,\n        fill = \"transparent\", color = \"black\", size = .25\n    ) +\n    theme_void()\n\n# 6. GET REGION LINES\n#--------------------\nregion &lt;- \"Sardinia\"\n# define longlat projection\n\nsardinia_sf &lt;- osmdata::getbb(\n    region,\n    format_out = \"sf_polygon\"\n)\n\nsardinia_sf\n\nggplot() +\n    geom_sf(\n        data = sardinia_sf$multipolygon,\n        color = \"red\", fill = \"grey80\", size = .5\n    ) +\n    theme_void()\n\ncrop_region_with_polygon &lt;- function() {\n    region_vect &lt;- terra::vect(sardinia_sf$multipolygon)\n    region_raster &lt;- terra::crop(country_elevation, region_vect)\n    region_raster_final &lt;- terra::mask(\n        region_raster, region_vect\n    )\n    return(region_raster_final)\n}\n\nregion_raster_final &lt;- crop_region_with_polygon()\n\nregion_raster_final |&gt;\n    as.data.frame(xy = T) |&gt;\n    ggplot() +\n    geom_tile(\n        aes(x = x, y = y, fill = file514862c13e19)\n    ) +\n    geom_sf(\n        data = country_sf,\n        fill = \"transparent\", color = \"black\", size = .25\n    ) +\n    theme_void()"
  },
  {
    "objectID": "day_05.html",
    "href": "day_05.html",
    "title": "ì§€ë„ì œì‘ ëŒ€íšŒ",
    "section": "",
    "text": "ì†ŒìŠ¤ì½”ë“œ\n\n\n\n3D digital elevation maps with R\n\n\n\n1 íŒ¨í‚¤ì§€\n\n\nì½”ë“œ\n# install rayvista\n# devtools::install_github(\"h-a-graham/rayvista\", dependencies = T)\n# # install elevatr\n# devtools::install_github(\"jhollist/elevatr\")\n# \n# remotes::install_github(\"tylermorganwall/rayshader\")\n# remotes::install_github(\"tylermorganwall/rayrender\")\n# remotes::install_github(\"dmurdoch/rgl\")\n\n# libraries we need\nlibs &lt;- c(\n    \"rayvista\", \"elevatr\",\n    \"rayshader\", \"sf\", \"giscoR\"\n)\n\n# install missing libraries\ninstalled_libs &lt;- libs %in% rownames(installed.packages())\nif (any(installed_libs == F)) {\n    install.packages(libs[!installed_libs])\n}\n\n# load libraries\ninvisible(lapply(libs, library, character.only = T))\n\ncrs_LONGLAT &lt;- \"+proj=longlat +datum=WGS84 +no_defs\"\n\n\n\n\n2 ëŒ€í•œë¯¼êµ­\n\n\nì½”ë“œ\n# 3. RAYVISTA - COUNTRY\n#----------------------\n\nkorea_sf &lt;- giscoR::gisco_get_countries(country = \"KR\",\n                                        resolution = \"1\") |&gt; \n  sf::st_transform(crs = crs_LONGLAT)\n\n\n\ncountry_elevation &lt;- elevatr::get_elev_raster(\n    locations = korea_sf,\n    z = 7,\n    clip = \"locations\"\n)\n\n\nnames(country_elevation) &lt;- \"elevation\"\n\nrgl::close3d()\n\nkorea_dem &lt;- rayvista::plot_3d_vista(\n    dem = country_elevation$elevation,\n    overlay_detail = 11,\n    zscale = 10,\n    zoom = .8,\n    phi = 85,\n    theta = 0,\n    solid = F,\n    windowsize = c(800, 800)\n)\n\nrayshader::render_camera(phi = 75, zoom = .7, theta = 0)\n\nrayshader::render_highquality(\n    filename = \"images/korea-dem.png\",\n    preview = FALSE,\n    light = T,\n    lightdirection = 225,\n    lightaltitude = 60,\n    lightintensity = 400,\n    parallel = TRUE,\n    width = 4000,\n    height = 4000,\n    interactive = FALSE\n)\n\n\n\n\n\n\n\n\n\n3 ë…ë„\n\n\nì½”ë“œ\nget_area_bbox &lt;- function() {\n    xmin &lt;- 131.860035\n    ymin &lt;- 37.237007\n    xmax &lt;- 131.874372\n    ymax &lt;- 37.245153\n\n    bbox &lt;- sf::st_sfc(\n        sf::st_polygon(\n            list(\n                cbind(\n                    c(xmin, xmax, xmax, xmin, xmin),\n                    c(ymin, ymin, ymax, ymax, ymin)\n                )\n            )\n        ), crs = crs_LONGLAT\n    ) |&gt; sf::st_as_sf()\n\n    return(bbox)\n}\n\ndokdo_bbox &lt;- get_area_bbox()\n\nrgl::close3d()\n\ndokdo_dem &lt;- rayvista::plot_3d_vista(\n    req_area = dokdo_bbox,\n    phi = 80,\n    theta = 0,\n    zscale = 0.1,\n    outlier_filter = .001\n)\n\nrayshader::render_snapshot(\n    filename = \"images/dokdo.png\",\n    clear = T\n)\n\n\n\n\n4 ë…ë„ (ìœ„ê²½ë„)\n\n\nì½”ë“œ\n.lat  &lt;- (37.237007 + 37.245153) / 2\n.long &lt;- (131.860035 + 131.874372) / 2\n \ndokdo &lt;- plot_3d_vista(lat = .lat, long = .long,\n    radius =1000,\n    zscale = 5,\n    zoom = .8,\n    solid = TRUE,\n    elevation_detail = 13,\n    overlay_detail = 15,\n    theta = 0,\n    windowsize = 800)\n\nrayshader::render_camera(\n    zoom = .7, theta = 0, phi = 30\n)\n\nrayshader::render_highquality(\n    filename = \"images/dokdo_highqual.png\",\n    preview = T,\n    light = T,\n    lightdirection = 225,\n    lightintensity = 1200,\n    lightaltitude = 60,\n    interactive = F,\n    width = 4000,\n    height = 4000\n)"
  },
  {
    "objectID": "docs/day_04.html",
    "href": "docs/day_04.html",
    "title": "ìŠ¤íŒŒì´í¬(Spike map)",
    "section": "",
    "text": "ì†ŒìŠ¤ì½”ë“œ\n\n\n\nMaking crisp spike maps with R\n\n\n\n1 íŒ¨í‚¤ì§€\n\n\nì½”ë“œ\n### 0. PACKAGES\n### ------------------------\nlibs &lt;- c(\n    \"tidyverse\", \"R.utils\",\n    \"httr\", \"sf\", \"stars\",\n    \"rayshader\"\n)\n\n# install missing libraries\ninstalled_libs &lt;- libs %in% rownames(installed.packages())\nif (any(installed_libs == F)) {\n    install.packages(libs[!installed_libs])\n}\n\n# load libraries\ninvisible(lapply(libs, library, character.only = T))\n\n\n\n\n2 ì¸êµ¬ ë°ì´í„°\nì¸ë„ì£¼ì˜ì  ì˜ì—­ì—ì„œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¸êµ¬ ë°ì´í„°ë¥¼ í™•ë³´í•˜ëŠ” ê²ƒì€ ìƒëª…ì„ êµ¬í•˜ëŠ” í™œë™ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ëŠ” ë° ë§¤ìš° ì¤‘ìš”í•˜ë‹¤. KONTUR: Population Density Dataset ì¸êµ¬ ë°ì´í„° ì„¸íŠ¸ëŠ” 400m í•´ìƒë„ì˜ ì¸êµ¬ ìˆ˜ë¥¼ ê°€ì§„ H3 ìœ¡ê°í˜•ìœ¼ë¡œ í‘œí˜„ëœë‹¤. ì¼ë°˜ì ì¸ ì •ì‚¬ê°í˜• ê·¸ë¦¬ë“œ ëŒ€ì‹  H3 ê·¸ë¦¬ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ì •ì‚¬ê°í˜•ê³¼ ë‹¬ë¦¬ ìœ¡ê°í˜•ì€ ìœ¡ê°í˜• ì¤‘ì‹¬ì ê³¼ ì¸ì ‘í•œ ì…€ì˜ ì¤‘ì‹¬ ì‚¬ì´ì˜ ê±°ë¦¬ê°€ ê°™ê¸° ë•Œë¬¸ì´ë‹¤. Republic of Korea: Population Density for 400m H3 Hexagons ë°ì´í„°ë„ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥í•˜ë‹¤.\n\n\nì½”ë“œ\n### 1. DOWNLOAD & UNZIP DATA\n### ------------------------\nurl &lt;-\n    \"https://geodata-eu-central-1-kontur-public.s3.amazonaws.com/kontur_datasets/kontur_population_KR_20220630.gpkg.gz\"\nfile_name &lt;- \"korea-population.gpkg.gz\"\n\nget_population_data &lt;- function() {\n    res &lt;- httr::GET(\n        url,\n        write_disk(file_name),\n        progress()\n    )\n\n    R.utils::gunzip(file_name, remove = F)\n}\n\nget_population_data()\n\n\n\n\n3 ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°\n\n\nì½”ë“œ\n### 2. LOAD DATA\n### -------------\nload_file_name &lt;- gsub(\".gz\", \"\", \"korea-population.gpkg.gz\")\n\ncrsWGS &lt;- \"+proj=tmerc +lat_0=38 +lon_0=128 +k=0.9999 +x_0=400000 +y_0=600000 +ellps=bessel +towgs84=-115.8,474.99,674.11,1.16,-2.31,-1.63,6.43 +units=m +no_defs\"\n\nget_population_data &lt;- function() {\n    pop_df &lt;- sf::st_read(\n        load_file_name\n    ) |&gt;\n        sf::st_transform(crs = crsWGS)\n}\n\npop_sf &lt;- get_population_data()\n#&gt; Reading layer `population' from data source \n#&gt;   `D:\\tcs\\map_challenge\\docs\\korea-population.gpkg' using driver `GPKG'\n#&gt; Simple feature collection with 74131 features and 2 fields\n#&gt; Geometry type: POLYGON\n#&gt; Dimension:     XY\n#&gt; Bounding box:  xmin: 13871420 ymin: 3909557 xmax: 14680470 ymax: 4667313\n#&gt; Projected CRS: WGS 84 / Pseudo-Mercator\n\nhead(pop_sf)\n#&gt; Simple feature collection with 6 features and 2 fields\n#&gt; Geometry type: POLYGON\n#&gt; Dimension:     XY\n#&gt; Bounding box:  xmin: 411917.5 ymin: 560711.5 xmax: 457833.9 ymax: 576628\n#&gt; CRS:           +proj=tmerc +lat_0=38 +lon_0=128 +k=0.9999 +x_0=400000 +y_0=600000 +ellps=bessel +towgs84=-115.8,474.99,674.11,1.16,-2.31,-1.63,6.43 +units=m +no_defs\n#&gt;                h3 population                           geom\n#&gt; 1 8830ec4415fffff         51 POLYGON ((436278.5 568529.6...\n#&gt; 2 8830ec4319fffff         96 POLYGON ((419056.4 563804.4...\n#&gt; 3 8830ec42e5fffff         45 POLYGON ((422803.1 566238.5...\n#&gt; 4 8830ec611bfffff        149 POLYGON ((457833.9 560977.9...\n#&gt; 5 8830ec52e7fffff         37 POLYGON ((412671.2 575918.4...\n#&gt; 6 8830ec51d7fffff        188 POLYGON ((415418.9 568732.5...\nggplot() +\n    geom_sf(\n        data = pop_sf,\n        color = \"grey10\", fill = \"grey10\"\n    )\n\n\n\n\n\n\n\n\n\n\n\n4 Shape to Raster\n\n\nì½”ë“œ\n### 3. SHP TO RASTER\n### ----------------\n\nbb &lt;- sf::st_bbox(pop_sf)\n\nget_raster_size &lt;- function() {\n    height &lt;- sf::st_distance(\n        sf::st_point(c(bb[[\"xmin\"]], bb[[\"ymin\"]])),\n        sf::st_point(c(bb[[\"xmin\"]], bb[[\"ymax\"]]))\n    )\n    width &lt;- sf::st_distance(\n        sf::st_point(c(bb[[\"xmin\"]], bb[[\"ymin\"]])),\n        sf::st_point(c(bb[[\"xmax\"]], bb[[\"ymin\"]]))\n    )\n\n    if (height &gt; width) {\n        height_ratio &lt;- 1\n        width_ratio &lt;- width / height\n    } else {\n        width_ratio &lt;- 1\n        height_ratio &lt;- height / width\n    }\n\n    return(list(width_ratio, height_ratio))\n}\nwidth_ratio &lt;- get_raster_size()[[1]]\nheight_ratio &lt;- get_raster_size()[[2]]\n\nsize &lt;- 3000\nwidth &lt;- round((size * width_ratio), 0)\nheight &lt;- round((size * height_ratio), 0)\n\nget_population_raster &lt;- function() {\n    pop_rast &lt;- stars::st_rasterize(\n        pop_sf |&gt;\n            dplyr::select(population, geom),\n        nx = width, ny = height\n    )\n\n    return(pop_rast)\n}\n\npop_rast &lt;- get_population_raster()\nplot(pop_rast)\n\npop_mat &lt;- pop_rast |&gt;\n    as(\"Raster\") |&gt;\n    rayshader::raster_to_matrix()\n\nlibrary(MetBrewer)\n# Specify the palette name in its own variable so that\n# we can reference it easily later.\npal &lt;- \"Demuth\"\ncolors &lt;- met.brewer(pal)\n\n# cols &lt;- rev(c(\n#     '#00004d', '#342863', '#595078', '#7d7b8a', '#a7a88b'\n# ))\n\ntexture &lt;- grDevices::colorRampPalette(colors)(256)\n\n# Create the initial 3D object\npop_mat |&gt;\n    rayshader::height_shade(texture = texture) |&gt;\n    rayshader::plot_3d(\n        heightmap = pop_mat,\n        solid = F,\n        soliddepth = 0,\n        zscale = 15,\n        shadowdepth = 0,\n        shadow_darkness = .95,\n        windowsize = c(800, 800),\n        phi = 65,\n        zoom = .65,\n        theta = -30,\n        background = \"white\"\n    )\n\n# Use this to adjust the view after building the window object\nrayshader::render_camera(phi = 75, zoom = .7, theta = 0)\n\nlibrary(rayrender)\n\nrayshader::render_highquality(\n    filename = \"images/korea_population_2022.png\",\n    preview = FALSE,\n    light = T,\n    lightdirection = 225,\n    lightaltitude = 60,\n    lightintensity = 400,\n    interactive = F,\n    width = width, height = height\n)"
  }
]