{
  "hash": "08abc0f6db8abb60373c9eb2c26a96bd",
  "result": {
    "markdown": "---\ntitle: \"지도제작 대회\"\nsubtitle: \"국회의원 통계\"\ndescription: |\n  국회의원 당선자 통계를 살펴보자.\nauthor:\n  - name: 이광춘\n    url: https://www.linkedin.com/in/kwangchunlee/\n    affiliation: 한국 R 사용자회\n    affiliation-url: https://github.com/bit2r\ntitle-block-banner: true\nformat:\n  html:\n    theme: flatly\n    code-fold: true\n    code-overflow: wrap\n    toc: true\n    toc-depth: 3\n    toc-title: 목차\n    number-sections: true\n    highlight-style: github    \n    self-contained: false\n    default-image-extension: jpg\nfilters:\n   - lightbox\nlightbox: auto\nlink-citations: true\nknitr:\n  opts_chunk: \n    eval: true\n    message: false\n    warning: false\n    collapse: true\n    comment: \"#>\" \n    R.options:\n      knitr.graphics.auto_pdf: true\neditor_options: \n  chunk_output_type: console\n---\n\n\n# 데이터\n\n공공데이터포털 [중앙선거관리위원회 당선인정보 API](https://www.data.go.kr/data/15000864/openapi.do)\n를 통해 당선인 정보를 조회한다. (선거종류, 선거구명, 시도명, 구시군명, 기호, 정당, 성명, 성별, 연령, 경력, 득표수, 득표율 등을 조회)\n\n## 국회의원 선거 코드\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(gt)\nlibrary(gtExtras)\nlibrary(rvest)\n\n# iconv(names(krvote::code_election), from = \"EUC-KR\", to = \"UTF-8\")\n\ncode_election <- krvote::code_election\n\nnames(code_election) <- c(\"선거코드\", \"선거명\", \"선거구분\")\n\nlegislator_code <- code_election |> \n  filter(str_detect(선거명, \"국회의원\")) |> \n  pull(선거코드) |> \n  unique()\n\nlegislator_code\n#> [1] \"20040415\" \"20080409\" \"20120411\" \"20160413\" \"20180613\" \"20190403\" \"20200415\"\n#> [8] \"20220309\"\n```\n:::\n\n\n## 당선인 \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(httr)\nlibrary(jsonlite)\n\n# httr의 GET 함수로 데이터를 추출한다\nresponse <- GET(\"http://apis.data.go.kr/9760000/WinnerInfoInqireService2/getWinnerInfoInqire\",\n                query = list(sgId = \"20220309\",\n                              sgTypecode = \"1\",\n                              sdName = \"전국\",\n                              sggName = \"대한민국\",\n                              pageNo = 1,\n                              numOfRows = 10,\n                              resultType = \"json\",\n                              serviceKey = Sys.getenv('DATA_GO_DECODE_KEY')))\n\n# 응답 상태와 내용을 확인한다\nprint(status_code(response))\n#> [1] 200\n\nresponse_list <- content(response, \"text\") |> \n  fromJSON()\n\nresponse_tbl <- response_list$getWinnerInfoInqire$item\n\nresponse_tbl\n#>   num     sgId sgTypecode    huboid  sggName sdName wiwName giho gihoSangse\n#> 1   1 20220309          1 100138362 대한민국   전국            2           \n#>     jdName   name hanjaName gender birthday age                         addr\n#> 1 국민의힘 윤석열    尹錫悅     남 19601218  61 서울특별시 서초구 서초중앙로\n#>   jobId    job eduId                              edu              career1\n#> 1    75 정치인   221 서울대학교 대학원 졸업(법학석사) (전) 제43대 검찰총장\n#>                          career2    dugsu dugyul\n#> 1 (전) 서울중앙지방검찰청 검사장 16394815  48.56\n```\n:::\n\n\n## 국회의원\n\n\n::: {.cell}\n\n```{.r .cell-code}\n\n# httr의 GET 함수로 데이터를 추출한다\nresponse <- GET(\"http://apis.data.go.kr/9760000/WinnerInfoInqireService2/getWinnerInfoInqire\",\n                query = list(sgId = legislator_code[8],\n                              sgTypecode = \"2\",\n                              sdName = \"서울특별시\",\n                              sggName = \"종로구\",\n                              pageNo = 1,\n                              numOfRows = 10,\n                              resultType = \"json\",\n                              serviceKey = Sys.getenv('DATA_GO_DECODE_KEY')))\n\n# 응답 상태와 내용을 확인한다\nprint(status_code(response))\n#> [1] 200\n\nresponse_list <- content(response, \"text\") |> \n  fromJSON()\n\nresponse_tbl <- response_list$getWinnerInfoInqire$item\n\nresponse_tbl\n#>   num     sgId sgTypecode    huboid sggName     sdName wiwName giho gihoSangse\n#> 1   1 20220309          2 100138535  종로구 서울특별시  종로구    2           \n#>     jdName   name hanjaName gender birthday age                            addr\n#> 1 국민의힘 최재형    崔在亨     남 19560902  65 서울특별시 양천구 목동중앙로7길\n#>   jobId    job eduId                    edu      career1          career2 dugsu\n#> 1    75 정당인    68 서울대학교 법학과 졸업 (전)감사원장 (전)사법연수원장 49637\n#>   dugyul\n#> 1  52.09\n```\n:::\n\n\n## 선거구\n\n선거종류코드(`sgTypecode`): (0) 대표선거명, (1)대통령,(2)국회의원,(3)시도지사,(4)구시군장,(5)시도의원,(6)구시군의회의원,(7)국회의원비례대표,(8)광역의원비례대표,(9)기초의원비례대표,(10)교육의원,(11)교육감\n\n### 스크립트\n\n\n::: {.cell}\n\n```{.r .cell-code}\n\n# httr의 GET 함수로 데이터를 추출한다\nresponse <- GET(\"http://apis.data.go.kr/9760000/CommonCodeService/getCommonSggCodeList\",\n                query = list(sgId = legislator_code[7],\n                              sgTypecode = \"2\",\n                              numOfRows =  \"1000\",\n                              resultType = \"json\",\n                              serviceKey = Sys.getenv('DATA_GO_DECODE_KEY')))\n\n# 응답 상태와 내용을 확인한다\nprint(status_code(response))\n#> [1] 200\n\nresponse_list <- content(response, \"text\") |> \n  fromJSON()\n\nresponse_tbl <- response_list$getCommonSggCodeList$item\n\nresponse_tbl\n#>     num     sgId sgTypecode                    sggName         sdName\n#> 1     1 20200415          2                     종로구     서울특별시\n#> 2     2 20200415          2               중구성동구갑     서울특별시\n#> 3     3 20200415          2               중구성동구을     서울특별시\n#> 4     4 20200415          2                     용산구     서울특별시\n#> 5     5 20200415          2                   광진구갑     서울특별시\n#> 6     6 20200415          2                   광진구을     서울특별시\n#> 7     7 20200415          2                 동대문구갑     서울특별시\n#> 8     8 20200415          2                 동대문구을     서울특별시\n#> 9     9 20200415          2                   중랑구갑     서울특별시\n#> 10   10 20200415          2                   중랑구을     서울특별시\n#> 11   11 20200415          2                   성북구갑     서울특별시\n#> 12   12 20200415          2                   성북구을     서울특별시\n#> 13   13 20200415          2                   강북구갑     서울특별시\n#> 14   14 20200415          2                   강북구을     서울특별시\n#> 15   15 20200415          2                   도봉구갑     서울특별시\n#> 16   16 20200415          2                   도봉구을     서울특별시\n#> 17   17 20200415          2                   노원구갑     서울특별시\n#> 18   18 20200415          2                   노원구을     서울특별시\n#> 19   19 20200415          2                   노원구병     서울특별시\n#> 20   20 20200415          2                   은평구갑     서울특별시\n#> 21   21 20200415          2                   은평구을     서울특별시\n#> 22   22 20200415          2                 서대문구갑     서울특별시\n#> 23   23 20200415          2                 서대문구을     서울특별시\n#> 24   24 20200415          2                   마포구갑     서울특별시\n#> 25   25 20200415          2                   마포구을     서울특별시\n#> 26   26 20200415          2                   양천구갑     서울특별시\n#> 27   27 20200415          2                   양천구을     서울특별시\n#> 28   28 20200415          2                   강서구갑     서울특별시\n#> 29   29 20200415          2                   강서구을     서울특별시\n#> 30   30 20200415          2                   강서구병     서울특별시\n#> 31   31 20200415          2                   구로구갑     서울특별시\n#> 32   32 20200415          2                   구로구을     서울특별시\n#> 33   33 20200415          2                     금천구     서울특별시\n#> 34   34 20200415          2                 영등포구갑     서울특별시\n#> 35   35 20200415          2                 영등포구을     서울특별시\n#> 36   36 20200415          2                   동작구갑     서울특별시\n#> 37   37 20200415          2                   동작구을     서울특별시\n#> 38   38 20200415          2                   관악구갑     서울특별시\n#> 39   39 20200415          2                   관악구을     서울특별시\n#> 40   40 20200415          2                   서초구갑     서울특별시\n#> 41   41 20200415          2                   서초구을     서울특별시\n#> 42   42 20200415          2                   강남구갑     서울특별시\n#> 43   43 20200415          2                   강남구을     서울특별시\n#> 44   44 20200415          2                   강남구병     서울특별시\n#> 45   45 20200415          2                   송파구갑     서울특별시\n#> 46   46 20200415          2                   송파구을     서울특별시\n#> 47   47 20200415          2                   송파구병     서울특별시\n#> 48   48 20200415          2                   강동구갑     서울특별시\n#> 49   49 20200415          2                   강동구을     서울특별시\n#> 50   50 20200415          2                 중구영도구     부산광역시\n#> 51   51 20200415          2                   서구동구     부산광역시\n#> 52   52 20200415          2                 부산진구갑     부산광역시\n#> 53   53 20200415          2                 부산진구을     부산광역시\n#> 54   54 20200415          2                     동래구     부산광역시\n#> 55   55 20200415          2                     남구갑     부산광역시\n#> 56   56 20200415          2                     남구을     부산광역시\n#> 57   57 20200415          2               북구강서구갑     부산광역시\n#> 58   58 20200415          2               북구강서구을     부산광역시\n#> 59   59 20200415          2                 해운대구갑     부산광역시\n#> 60   60 20200415          2                 해운대구을     부산광역시\n#> 61   61 20200415          2                   사하구갑     부산광역시\n#> 62   62 20200415          2                   사하구을     부산광역시\n#> 63   63 20200415          2                     금정구     부산광역시\n#> 64   64 20200415          2                     연제구     부산광역시\n#> 65   65 20200415          2                     수영구     부산광역시\n#> 66   66 20200415          2                     사상구     부산광역시\n#> 67   67 20200415          2                     기장군     부산광역시\n#> 68   68 20200415          2                   중구남구     대구광역시\n#> 69   69 20200415          2                     동구갑     대구광역시\n#> 70   70 20200415          2                     동구을     대구광역시\n#> 71   71 20200415          2                       서구     대구광역시\n#> 72   72 20200415          2                     북구갑     대구광역시\n#> 73   73 20200415          2                     북구을     대구광역시\n#> 74   74 20200415          2                   수성구갑     대구광역시\n#> 75   75 20200415          2                   수성구을     대구광역시\n#> 76   76 20200415          2                   달서구갑     대구광역시\n#> 77   77 20200415          2                   달서구을     대구광역시\n#> 78   78 20200415          2                   달서구병     대구광역시\n#> 79   79 20200415          2                     달성군     대구광역시\n#> 80   80 20200415          2           중구강화군옹진군     인천광역시\n#> 81   81 20200415          2             동구미추홀구갑     인천광역시\n#> 82   82 20200415          2             동구미추홀구을     인천광역시\n#> 83   83 20200415          2                   연수구갑     인천광역시\n#> 84   84 20200415          2                   연수구을     인천광역시\n#> 85   85 20200415          2                   남동구갑     인천광역시\n#> 86   86 20200415          2                   남동구을     인천광역시\n#> 87   87 20200415          2                   부평구갑     인천광역시\n#> 88   88 20200415          2                   부평구을     인천광역시\n#> 89   89 20200415          2                   계양구갑     인천광역시\n#> 90   90 20200415          2                   계양구을     인천광역시\n#> 91   91 20200415          2                     서구갑     인천광역시\n#> 92   92 20200415          2                     서구을     인천광역시\n#> 93   93 20200415          2                 동구남구갑     광주광역시\n#> 94   94 20200415          2                 동구남구을     광주광역시\n#> 95   95 20200415          2                     서구갑     광주광역시\n#> 96   96 20200415          2                     서구을     광주광역시\n#> 97   97 20200415          2                     북구갑     광주광역시\n#> 98   98 20200415          2                     북구을     광주광역시\n#> 99   99 20200415          2                   광산구갑     광주광역시\n#> 100 100 20200415          2                   광산구을     광주광역시\n#> 101 101 20200415          2                       동구     대전광역시\n#> 102 102 20200415          2                       중구     대전광역시\n#> 103 103 20200415          2                     서구갑     대전광역시\n#> 104 104 20200415          2                     서구을     대전광역시\n#> 105 105 20200415          2                   유성구갑     대전광역시\n#> 106 106 20200415          2                   유성구을     대전광역시\n#> 107 107 20200415          2                     대덕구     대전광역시\n#> 108 108 20200415          2                       중구     울산광역시\n#> 109 109 20200415          2                     남구갑     울산광역시\n#> 110 110 20200415          2                     남구을     울산광역시\n#> 111 111 20200415          2                       동구     울산광역시\n#> 112 112 20200415          2                       북구     울산광역시\n#> 113 113 20200415          2                     울주군     울산광역시\n#> 114 114 20200415          2           세종특별자치시갑 세종특별자치시\n#> 115 115 20200415          2           세종특별자치시을 세종특별자치시\n#> 116 116 20200415          2                   수원시갑         경기도\n#> 117 117 20200415          2                   수원시을         경기도\n#> 118 118 20200415          2                   수원시병         경기도\n#> 119 119 20200415          2                   수원시정         경기도\n#> 120 120 20200415          2                   수원시무         경기도\n#> 121 121 20200415          2               성남시수정구         경기도\n#> 122 122 20200415          2               성남시중원구         경기도\n#> 123 123 20200415          2             성남시분당구갑         경기도\n#> 124 124 20200415          2             성남시분당구을         경기도\n#> 125 125 20200415          2                 의정부시갑         경기도\n#> 126 126 20200415          2                 의정부시을         경기도\n#> 127 127 20200415          2               안양시만안구         경기도\n#> 128 128 20200415          2             안양시동안구갑         경기도\n#> 129 129 20200415          2             안양시동안구을         경기도\n#> 130 130 20200415          2                   부천시갑         경기도\n#> 131 131 20200415          2                   부천시을         경기도\n#> 132 132 20200415          2                   부천시병         경기도\n#> 133 133 20200415          2                   부천시정         경기도\n#> 134 134 20200415          2                   광명시갑         경기도\n#> 135 135 20200415          2                   광명시을         경기도\n#> 136 136 20200415          2                   평택시갑         경기도\n#> 137 137 20200415          2                   평택시을         경기도\n#> 138 138 20200415          2             동두천시연천군         경기도\n#> 139 139 20200415          2             안산시상록구갑         경기도\n#> 140 140 20200415          2             안산시상록구을         경기도\n#> 141 141 20200415          2             안산시단원구갑         경기도\n#> 142 142 20200415          2             안산시단원구을         경기도\n#> 143 143 20200415          2                   고양시갑         경기도\n#> 144 144 20200415          2                   고양시을         경기도\n#> 145 145 20200415          2                   고양시병         경기도\n#> 146 146 20200415          2                   고양시정         경기도\n#> 147 147 20200415          2               의왕시과천시         경기도\n#> 148 148 20200415          2                     구리시         경기도\n#> 149 149 20200415          2                 남양주시갑         경기도\n#> 150 150 20200415          2                 남양주시을         경기도\n#> 151 151 20200415          2                 남양주시병         경기도\n#> 152 152 20200415          2                     오산시         경기도\n#> 153 153 20200415          2                   시흥시갑         경기도\n#> 154 154 20200415          2                   시흥시을         경기도\n#> 155 155 20200415          2                     군포시         경기도\n#> 156 156 20200415          2                     하남시         경기도\n#> 157 157 20200415          2                   용인시갑         경기도\n#> 158 158 20200415          2                   용인시을         경기도\n#> 159 159 20200415          2                   용인시병         경기도\n#> 160 160 20200415          2                   용인시정         경기도\n#> 161 161 20200415          2                   파주시갑         경기도\n#> 162 162 20200415          2                   파주시을         경기도\n#> 163 163 20200415          2                     이천시         경기도\n#> 164 164 20200415          2                     안성시         경기도\n#> 165 165 20200415          2                   김포시갑         경기도\n#> 166 166 20200415          2                   김포시을         경기도\n#> 167 167 20200415          2                   화성시갑         경기도\n#> 168 168 20200415          2                   화성시을         경기도\n#> 169 169 20200415          2                   화성시병         경기도\n#> 170 170 20200415          2                   광주시갑         경기도\n#> 171 171 20200415          2                   광주시을         경기도\n#> 172 172 20200415          2                     양주시         경기도\n#> 173 173 20200415          2               포천시가평군         경기도\n#> 174 174 20200415          2               여주시양평군         경기도\n#> 175 175 20200415          2 춘천시철원군화천군양구군갑         강원도\n#> 176 176 20200415          2 춘천시철원군화천군양구군을         강원도\n#> 177 177 20200415          2                   원주시갑         강원도\n#> 178 178 20200415          2                   원주시을         강원도\n#> 179 179 20200415          2                     강릉시         강원도\n#> 180 180 20200415          2   동해시태백시삼척시정선군         강원도\n#> 181 181 20200415          2   속초시인제군고성군양양군         강원도\n#> 182 182 20200415          2   홍천군횡성군영월군평창군         강원도\n#> 183 183 20200415          2               청주시상당구       충청북도\n#> 184 184 20200415          2               청주시서원구       충청북도\n#> 185 185 20200415          2               청주시흥덕구       충청북도\n#> 186 186 20200415          2               청주시청원구       충청북도\n#> 187 187 20200415          2                     충주시       충청북도\n#> 188 188 20200415          2               제천시단양군       충청북도\n#> 189 189 20200415          2   보은군옥천군영동군괴산군       충청북도\n#> 190 190 20200415          2         증평군진천군음성군       충청북도\n#> 191 191 20200415          2                   천안시갑       충청남도\n#> 192 192 20200415          2                   천안시을       충청남도\n#> 193 193 20200415          2                   천안시병       충청남도\n#> 194 194 20200415          2         공주시부여군청양군       충청남도\n#> 195 195 20200415          2               보령시서천군       충청남도\n#> 196 196 20200415          2                   아산시갑       충청남도\n#> 197 197 20200415          2                   아산시을       충청남도\n#> 198 198 20200415          2               서산시태안군       충청남도\n#> 199 199 20200415          2         논산시계룡시금산군       충청남도\n#> 200 200 20200415          2                     당진시       충청남도\n#> 201 201 20200415          2               홍성군예산군       충청남도\n#> 202 202 20200415          2                   전주시갑       전라북도\n#> 203 203 20200415          2                   전주시을       전라북도\n#> 204 204 20200415          2                   전주시병       전라북도\n#> 205 205 20200415          2                     군산시       전라북도\n#> 206 206 20200415          2                   익산시갑       전라북도\n#> 207 207 20200415          2                   익산시을       전라북도\n#> 208 208 20200415          2               정읍시고창군       전라북도\n#> 209 209 20200415          2         남원시임실군순창군       전라북도\n#> 210 210 20200415          2               김제시부안군       전라북도\n#> 211 211 20200415          2   완주군진안군무주군장수군       전라북도\n#> 212 212 20200415          2                     목포시       전라남도\n#> 213 213 20200415          2                   여수시갑       전라남도\n#> 214 214 20200415          2                   여수시을       전라남도\n#> 215 215 20200415          2 순천시광양시곡성군구례군갑       전라남도\n#> 216 216 20200415          2 순천시광양시곡성군구례군을       전라남도\n#> 217 217 20200415          2               나주시화순군       전라남도\n#> 218 218 20200415          2   담양군함평군영광군장성군       전라남도\n#> 219 219 20200415          2   고흥군보성군장흥군강진군       전라남도\n#> 220 220 20200415          2         해남군완도군진도군       전라남도\n#> 221 221 20200415          2         영암군무안군신안군       전라남도\n#> 222 222 20200415          2                 포항시북구       경상북도\n#> 223 223 20200415          2           포항시남구울릉군       경상북도\n#> 224 224 20200415          2                     경주시       경상북도\n#> 225 225 20200415          2                     김천시       경상북도\n#> 226 226 20200415          2               안동시예천군       경상북도\n#> 227 227 20200415          2                   구미시갑       경상북도\n#> 228 228 20200415          2                   구미시을       경상북도\n#> 229 229 20200415          2   영주시영양군봉화군울진군       경상북도\n#> 230 230 20200415          2               영천시청도군       경상북도\n#> 231 231 20200415          2               상주시문경시       경상북도\n#> 232 232 20200415          2                     경산시       경상북도\n#> 233 233 20200415          2   군위군의성군청송군영덕군       경상북도\n#> 234 234 20200415          2         고령군성주군칠곡군       경상북도\n#> 235 235 20200415          2               창원시의창구       경상남도\n#> 236 236 20200415          2               창원시성산구       경상남도\n#> 237 237 20200415          2           창원시마산합포구       경상남도\n#> 238 238 20200415          2           창원시마산회원구       경상남도\n#> 239 239 20200415          2               창원시진해구       경상남도\n#> 240 240 20200415          2                   진주시갑       경상남도\n#> 241 241 20200415          2                   진주시을       경상남도\n#> 242 242 20200415          2               통영시고성군       경상남도\n#> 243 243 20200415          2         사천시남해군하동군       경상남도\n#> 244 244 20200415          2                   김해시갑       경상남도\n#> 245 245 20200415          2                   김해시을       경상남도\n#> 246 246 20200415          2   밀양시의령군함안군창녕군       경상남도\n#> 247 247 20200415          2                     거제시       경상남도\n#> 248 248 20200415          2                   양산시갑       경상남도\n#> 249 249 20200415          2                   양산시을       경상남도\n#> 250 250 20200415          2   산청군함양군거창군합천군       경상남도\n#> 251 251 20200415          2                   제주시갑 제주특별자치도\n#> 252 252 20200415          2                   제주시을 제주특별자치도\n#> 253 253 20200415          2                   서귀포시 제주특별자치도\n#>              wiwName sggJungsu sOrder\n#> 1             종로구         1      1\n#> 2             성동구         1      2\n#> 3               중구         1      3\n#> 4             용산구         1      4\n#> 5             광진구         1      5\n#> 6             광진구         1      6\n#> 7           동대문구         1      7\n#> 8           동대문구         1      8\n#> 9             중랑구         1      9\n#> 10            중랑구         1     10\n#> 11            성북구         1     11\n#> 12            성북구         1     12\n#> 13            강북구         1     13\n#> 14            강북구         1     14\n#> 15            도봉구         1     15\n#> 16            도봉구         1     16\n#> 17            노원구         1     17\n#> 18            노원구         1     18\n#> 19            노원구         1     19\n#> 20            은평구         1     20\n#> 21            은평구         1     21\n#> 22          서대문구         1     22\n#> 23          서대문구         1     23\n#> 24            마포구         1     24\n#> 25            마포구         1     25\n#> 26            양천구         1     26\n#> 27            양천구         1     27\n#> 28            강서구         1     28\n#> 29            강서구         1     29\n#> 30            강서구         1     30\n#> 31            구로구         1     31\n#> 32            구로구         1     32\n#> 33            금천구         1     33\n#> 34          영등포구         1     34\n#> 35          영등포구         1     35\n#> 36            동작구         1     36\n#> 37            동작구         1     37\n#> 38            관악구         1     38\n#> 39            관악구         1     39\n#> 40            서초구         1     40\n#> 41            서초구         1     41\n#> 42            강남구         1     42\n#> 43            강남구         1     43\n#> 44            강남구         1     44\n#> 45            송파구         1     45\n#> 46            송파구         1     46\n#> 47            송파구         1     47\n#> 48            강동구         1     48\n#> 49            강동구         1     49\n#> 50            영도구         1     50\n#> 51              서구         1     51\n#> 52          부산진구         1     52\n#> 53          부산진구         1     53\n#> 54            동래구         1     54\n#> 55              남구         1     55\n#> 56              남구         1     56\n#> 57              북구         1     57\n#> 58            강서구         1     58\n#> 59          해운대구         1     59\n#> 60          해운대구         1     60\n#> 61            사하구         1     61\n#> 62            사하구         1     62\n#> 63            금정구         1     63\n#> 64            연제구         1     64\n#> 65            수영구         1     65\n#> 66            사상구         1     66\n#> 67            기장군         1     67\n#> 68              남구         1     68\n#> 69              동구         1     69\n#> 70              동구         1     70\n#> 71              서구         1     71\n#> 72              북구         1     72\n#> 73              북구         1     73\n#> 74            수성구         1     74\n#> 75            수성구         1     75\n#> 76            달서구         1     76\n#> 77            달서구         1     77\n#> 78            달서구         1     78\n#> 79            달성군         1     79\n#> 80              중구         1     80\n#> 81          미추홀구         1     81\n#> 82          미추홀구         1     82\n#> 83            연수구         1     83\n#> 84            연수구         1     84\n#> 85            남동구         1     85\n#> 86            남동구         1     86\n#> 87            부평구         1     87\n#> 88            부평구         1     88\n#> 89            계양구         1     89\n#> 90            계양구         1     90\n#> 91              서구         1     91\n#> 92              서구         1     92\n#> 93              남구         1     93\n#> 94              동구         1     94\n#> 95              서구         1     95\n#> 96              서구         1     96\n#> 97              북구         1     97\n#> 98              북구         1     98\n#> 99            광산구         1     99\n#> 100           광산구         1    100\n#> 101             동구         1    101\n#> 102             중구         1    102\n#> 103             서구         1    103\n#> 104             서구         1    104\n#> 105           유성구         1    105\n#> 106           유성구         1    106\n#> 107           대덕구         1    107\n#> 108             중구         1    108\n#> 109             남구         1    109\n#> 110             남구         1    110\n#> 111             동구         1    111\n#> 112             북구         1    112\n#> 113           울주군         1    113\n#> 114   세종특별자치시         1    114\n#> 115   세종특별자치시         1    115\n#> 116     수원시장안구         1    116\n#> 117     수원시권선구         1    117\n#> 118     수원시팔달구         1    118\n#> 119     수원시영통구         1    119\n#> 120     수원시권선구         1    120\n#> 121     성남시수정구         1    121\n#> 122     성남시중원구         1    122\n#> 123     성남시분당구         1    123\n#> 124     성남시분당구         1    124\n#> 125         의정부시         1    125\n#> 126         의정부시         1    126\n#> 127     안양시만안구         1    127\n#> 128     안양시동안구         1    128\n#> 129     안양시동안구         1    129\n#> 130           부천시         1    130\n#> 131           부천시         1    131\n#> 132           부천시         1    132\n#> 133           부천시         1    133\n#> 134           광명시         1    134\n#> 135           광명시         1    135\n#> 136           평택시         1    136\n#> 137           평택시         1    137\n#> 138         동두천시         1    138\n#> 139     안산시상록구         1    139\n#> 140     안산시상록구         1    140\n#> 141     안산시단원구         1    141\n#> 142     안산시단원구         1    142\n#> 143     고양시덕양구         1    143\n#> 144     고양시덕양구         1    144\n#> 145   고양시일산동구         1    145\n#> 146   고양시일산서구         1    146\n#> 147           의왕시         1    147\n#> 148           구리시         1    148\n#> 149         남양주시         1    149\n#> 150         남양주시         1    150\n#> 151         남양주시         1    151\n#> 152           오산시         1    152\n#> 153           시흥시         1    153\n#> 154           시흥시         1    154\n#> 155           군포시         1    155\n#> 156           하남시         1    156\n#> 157     용인시처인구         1    157\n#> 158     용인시기흥구         1    158\n#> 159     용인시수지구         1    159\n#> 160     용인시기흥구         1    160\n#> 161           파주시         1    161\n#> 162           파주시         1    162\n#> 163           이천시         1    163\n#> 164           안성시         1    164\n#> 165           김포시         1    165\n#> 166           김포시         1    166\n#> 167           화성시         1    167\n#> 168           화성시         1    168\n#> 169           화성시         1    169\n#> 170           광주시         1    170\n#> 171           광주시         1    171\n#> 172           양주시         1    172\n#> 173           포천시         1    173\n#> 174           여주시         1    174\n#> 175           춘천시         1    175\n#> 176           춘천시         1    176\n#> 177           원주시         1    177\n#> 178           원주시         1    178\n#> 179           강릉시         1    179\n#> 180           동해시         1    180\n#> 181           속초시         1    181\n#> 182           영월군         1    182\n#> 183     청주시상당구         1    183\n#> 184     청주시서원구         1    184\n#> 185     청주시흥덕구         1    185\n#> 186     청주시청원구         1    186\n#> 187           충주시         1    187\n#> 188           제천시         1    188\n#> 189           영동군         1    189\n#> 190           음성군         1    190\n#> 191     천안시동남구         1    191\n#> 192     천안시서북구         1    192\n#> 193     천안시동남구         1    193\n#> 194           공주시         1    194\n#> 195           보령시         1    195\n#> 196           아산시         1    196\n#> 197           아산시         1    197\n#> 198           서산시         1    198\n#> 199           논산시         1    199\n#> 200           당진시         1    200\n#> 201           홍성군         1    201\n#> 202     전주시완산구         1    202\n#> 203     전주시완산구         1    203\n#> 204     전주시덕진구         1    204\n#> 205           군산시         1    205\n#> 206           익산시         1    206\n#> 207           익산시         1    207\n#> 208           정읍시         1    208\n#> 209           남원시         1    209\n#> 210           김제시         1    210\n#> 211           완주군         1    211\n#> 212           목포시         1    212\n#> 213           여수시         1    213\n#> 214           여수시         1    214\n#> 215           순천시         1    215\n#> 216           광양시         1    216\n#> 217           나주시         1    217\n#> 218           영광군         1    218\n#> 219           장흥군         1    219\n#> 220           해남군         1    220\n#> 221           무안군         1    221\n#> 222       포항시북구         1    222\n#> 223       포항시남구         1    223\n#> 224           경주시         1    224\n#> 225           김천시         1    225\n#> 226           안동시         1    226\n#> 227           구미시         1    227\n#> 228           구미시         1    228\n#> 229           영주시         1    229\n#> 230           영천시         1    230\n#> 231           상주시         1    231\n#> 232           경산시         1    232\n#> 233           의성군         1    233\n#> 234           칠곡군         1    234\n#> 235     창원시의창구         1    235\n#> 236     창원시성산구         1    236\n#> 237 창원시마산합포구         1    237\n#> 238 창원시마산회원구         1    238\n#> 239     창원시진해구         1    239\n#> 240           진주시         1    240\n#> 241           진주시         1    241\n#> 242           통영시         1    242\n#> 243           사천시         1    243\n#> 244           김해시         1    244\n#> 245           김해시         1    245\n#> 246           밀양시         1    246\n#> 247           거제시         1    247\n#> 248           양산시         1    248\n#> 249           양산시         1    249\n#> 250           거창군         1    250\n#> 251           제주시         1    251\n#> 252           제주시         1    252\n#> 253         서귀포시         1    253\n```\n:::\n\n\n### 함수\n\n\n::: {.cell}\n\n```{.r .cell-code}\n\nlegislator_raw <- code_election |> \n  filter(str_detect(선거명, \"국회의원\"),\n         선거구분 != \"0\") \n\nget_precinct <- function(legislator_cd = \"20200415\", \n                         sgTypecode = \"2\") {\n  # httr의 GET 함수로 데이터를 추출한다\n  response <- GET(\"http://apis.data.go.kr/9760000/CommonCodeService/getCommonSggCodeList\",\n                  query = list(sgId = legislator_cd,\n                                sgTypecode = sgTypecode,\n                                numOfRows =  \"1000\",\n                                resultType = \"json\",\n                                serviceKey = Sys.getenv('DATA_GO_DECODE_KEY')))\n  \n  # 응답 상태와 내용을 확인한다\n  print(status_code(response))\n  \n  response_list <- content(response, \"text\") |> \n    fromJSON()\n  \n  response_tbl <- response_list$getCommonSggCodeList$item\n  \n  return(response_tbl |> as_tibble())\n}\n\nget_precinct(\"20220309\")\n#> [1] 200\n#> # A tibble: 5 × 8\n#>   num   sgId     sgTypecode sggName      sdName     wiwName     sggJungsu sOrder\n#>   <chr> <chr>    <chr>      <chr>        <chr>      <chr>       <chr>     <chr> \n#> 1 1     20220309 2          종로구       서울특별시 종로구      1         1     \n#> 2 2     20220309 2          서초구갑     서울특별시 서초구      1         40    \n#> 3 3     20220309 2          중구남구     대구광역시 남구        1         68    \n#> 4 4     20220309 2          안성시       경기도     안성시      1         164   \n#> 5 5     20220309 2          청주시상당구 충청북도   청주시상당… 1         183\n```\n:::\n\n\n### 전체 선거구\n\n\n::: {.cell}\n\n```{.r .cell-code}\n\n# 재보궐 제외\n# legislator_tbl <- legislator_raw |> \n#   filter(선거코드 %in% c(\"20040415\", \"20080409\", \"20120411\", \n#                       \"20160413\", \"20200415\")) \n\nlegislator_tbl <- legislator_raw |> \n  mutate(data = map2(선거코드, 선거구분, get_precinct))\n#> [1] 200\n#> [1] 200\n#> [1] 200\n#> [1] 200\n#> [1] 200\n#> [1] 200\n#> [1] 200\n#> [1] 200\n#> [1] 200\n#> [1] 200\n#> [1] 200\n#> [1] 200\n#> [1] 200\n\nprecinct_tbl <- legislator_tbl |> \n  unnest(data)\n\nprecinct_tbl\n#> # A tibble: 1,264 × 11\n#>    선거코드 선거명       선거구분 num   sgId   sgTypecode sggName sdName wiwName\n#>    <chr>    <chr>        <chr>    <chr> <chr>  <chr>      <chr>   <chr>  <chr>  \n#>  1 20040415 국회의원선거 2        1     20040… 2          종로구  서울…  종로구 \n#>  2 20040415 국회의원선거 2        2     20040… 2          중구    서울…  중구(… \n#>  3 20040415 국회의원선거 2        3     20040… 2          용산구  서울…  용산구 \n#>  4 20040415 국회의원선거 2        4     20040… 2          성동구… 서울…  성동구 \n#>  5 20040415 국회의원선거 2        5     20040… 2          성동구… 서울…  성동구 \n#>  6 20040415 국회의원선거 2        6     20040… 2          광진구… 서울…  광진구 \n#>  7 20040415 국회의원선거 2        7     20040… 2          광진구… 서울…  광진구 \n#>  8 20040415 국회의원선거 2        8     20040… 2          동대문… 서울…  동대문…\n#>  9 20040415 국회의원선거 2        9     20040… 2          동대문… 서울…  동대문…\n#> 10 20040415 국회의원선거 2        10    20040… 2          중랑구… 서울…  중랑구 \n#> # ℹ 1,254 more rows\n#> # ℹ 2 more variables: sggJungsu <chr>, sOrder <chr>\n```\n:::\n\n\n## 국회의원 당선인\n\n### 함수\n\n\n::: {.cell}\n\n```{.r .cell-code}\n\nget_elected <- function(sgId = \"20200415\", sgTypecode = \"2\",\n                        sdName = \"서울특별시\",sggName = \"종로구\") {\n  response <- GET(\"http://apis.data.go.kr/9760000/WinnerInfoInqireService2/getWinnerInfoInqire\",\n              query = list(sgId = sgId,\n                           sgTypecode = sgTypecode,\n                           sdName = sdName,\n                           sggName = sggName,\n                           numOfRows = 100,\n                           resultType = \"json\",\n                           serviceKey = Sys.getenv('DATA_GO_DECODE_KEY')))\n\n  # 응답 상태와 내용을 확인한다\n  cat(status_code(response), \": \", sgId, sgTypecode, sdName, sggName, \"\\n\")\n  \n  response_list <- content(response, \"text\") |> \n    fromJSON()\n  \n  response_tbl <- response_list$getWinnerInfoInqire$item\n  \n  Sys.sleep(runif(1, 0,0.5))\n  \n  return(response_tbl |> as_tibble())\n}\n\nget_elected()\n#> 200 :  20200415 2 서울특별시 종로구\n#> # A tibble: 1 × 24\n#>   num   sgId    sgTypecode huboid sggName sdName wiwName giho  gihoSangse jdName\n#>   <chr> <chr>   <chr>      <chr>  <chr>   <chr>  <chr>   <chr> <chr>      <chr> \n#> 1 1     202004… 2          10013… 종로구  서울…  종로구  1     \"\"         더불… \n#> # ℹ 14 more variables: name <chr>, hanjaName <chr>, gender <chr>,\n#> #   birthday <chr>, age <chr>, addr <chr>, jobId <chr>, job <chr>, eduId <chr>,\n#> #   edu <chr>, career1 <chr>, career2 <chr>, dugsu <chr>, dugyul <chr>\n```\n:::\n\n\n\n### 전체 당선인\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# sido_code <- tribble(\n# ~\"시도코드\", ~\"시도명\",\n# \"1100\", \"서울특별시\",\n# \"2600\", \"부산광역시\",\n# \"2700\", \"대구광역시\",\n# \"2800\", \"인천광역시\",\n# \"2900\", \"광주광역시\",\n# \"3000\", \"대전광역시\",\n# \"3100\", \"울산광역시\",\n# \"5100\", \"세종특별자치시\",\n# \"4100\", \"경기도\",\n# \"4200\", \"강원도\",\n# \"4300\", \"충청북도\",\n# \"4400\", \"충청남도\",\n# \"4500\", \"전라북도\",\n# \"4600\", \"전라남도\",\n# \"4700\", \"경상북도\",\n# \"4800\", \"경상남도\",\n# \"4900\", \"제주특별자치도\")\n\nelected_raw <- legislator_tbl |> \n  filter(선거코드 == \"20200415\",\n         선거구분 == \"2\") |> \n  unnest(data)  |> \n  select(sgId, sgTypecode, sdName, sggName, wiwName) |> \n  mutate(data = pmap(list(sgId, sgTypecode, sdName, sggName), get_elected))\n\nelected_tbl <- elected_raw |> \n  select(data) |> \n  unnest(data)\n```\n:::\n\n\n### 전체선거 당선인\n\n\n::: {.cell}\n\n```{.r .cell-code}\nget_elected_safely <- safely(get_elected, otherwise = \"error\")\n\ntotal_elected_raw <- legislator_tbl |> \n  unnest(data)  |> \n  select(sgId, sgTypecode, sdName, sggName, wiwName) |> \n  mutate(data = pmap(list(sgId, sgTypecode, sdName, sggName), get_elected_safely))\n\ntotal_elected_tbl <- total_elected_raw |> \n  mutate(result = map(data, pluck, \"result\")) |>\n  select(sgId, sgTypecode, sdName, sggName, wiwName, result)\n\ntotal_elected_tbl |> \n  write_rds(\"data/total_elected_tbl.rds\")\n\n```\n:::\n\n\n### 후처리(오류)\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntotal_elected_tbl <- \n  read_rds(\"data/total_elected_tbl.rds\")\n\ntotal_elected_true <- total_elected_tbl |> \n  mutate(tibble = map_lgl(result, is_tibble)) |> \n  filter(tibble) |> \n  select(-tibble)\n\ntotal_elected_false <- total_elected_raw |> \n  filter(sgId == \"20120411\",\n         sdName == \"인천광역시\",\n         sggName %in% c(\"남동구을\", \"부평구갑\", \"서구강화군갑\")) |> \n  mutate(data = pmap(list(sgId, sgTypecode, sdName, sggName), get_elected_safely)) |> \n  mutate(result = map(data, pluck, \"result\")) |>\n  select(sgId, sgTypecode, sdName, sggName, wiwName, result)\n\n\ntotal_elected_all <- bind_rows(total_elected_true, total_elected_false)\n\ntotal_elected_all |> \n  write_rds(\"data/total_elected_all.rds\")\n```\n:::\n\n\n\n# 분석\n\n## 국회의원 정수\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(gt)\n\ncode_election |> \n  filter(str_detect(선거명, \"국회의원\"),\n         선거구분 == \"0\") |> \n  add_column(의원수 = c(299, 299, 300, 300, 300)) |> \n  gt() |> \n  gtExtras::gt_theme_538() |> \n  cols_align(\"center\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"tuofxorrtb\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>@import url(\"https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n#tuofxorrtb table {\n  font-family: Chivo, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#tuofxorrtb thead, #tuofxorrtb tbody, #tuofxorrtb tfoot, #tuofxorrtb tr, #tuofxorrtb td, #tuofxorrtb th {\n  border-style: none;\n}\n\n#tuofxorrtb p {\n  margin: 0;\n  padding: 0;\n}\n\n#tuofxorrtb .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: 300;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: none;\n  border-top-width: 3px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#tuofxorrtb .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#tuofxorrtb .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#tuofxorrtb .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#tuofxorrtb .gt_heading {\n  background-color: #FFFFFF;\n  text-align: left;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#tuofxorrtb .gt_bottom_border {\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tuofxorrtb .gt_col_headings {\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#tuofxorrtb .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: normal;\n  text-transform: uppercase;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#tuofxorrtb .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: normal;\n  text-transform: uppercase;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#tuofxorrtb .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#tuofxorrtb .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#tuofxorrtb .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#tuofxorrtb .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#tuofxorrtb .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  text-transform: uppercase;\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 1px;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#tuofxorrtb .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 1px;\n  border-bottom-color: #FFFFFF;\n  vertical-align: middle;\n}\n\n#tuofxorrtb .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#tuofxorrtb .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#tuofxorrtb .gt_row {\n  padding-top: 3px;\n  padding-bottom: 3px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#tuofxorrtb .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  text-transform: uppercase;\n  border-right-style: solid;\n  border-right-width: 0px;\n  border-right-color: #FFFFFF;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tuofxorrtb .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#tuofxorrtb .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#tuofxorrtb .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#tuofxorrtb .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tuofxorrtb .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#tuofxorrtb .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#tuofxorrtb .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tuofxorrtb .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tuofxorrtb .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#tuofxorrtb .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tuofxorrtb .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#tuofxorrtb .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tuofxorrtb .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#tuofxorrtb .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tuofxorrtb .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#tuofxorrtb .gt_sourcenote {\n  font-size: 12px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tuofxorrtb .gt_left {\n  text-align: left;\n}\n\n#tuofxorrtb .gt_center {\n  text-align: center;\n}\n\n#tuofxorrtb .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#tuofxorrtb .gt_font_normal {\n  font-weight: normal;\n}\n\n#tuofxorrtb .gt_font_bold {\n  font-weight: bold;\n}\n\n#tuofxorrtb .gt_font_italic {\n  font-style: italic;\n}\n\n#tuofxorrtb .gt_super {\n  font-size: 65%;\n}\n\n#tuofxorrtb .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#tuofxorrtb .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#tuofxorrtb .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#tuofxorrtb .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#tuofxorrtb .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#tuofxorrtb .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#tuofxorrtb .gt_indent_5 {\n  text-indent: 25px;\n}\n\ntbody tr:last-child {\n  border-bottom: 2px solid #ffffff00;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"선거코드\">선거코드</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"선거명\">선거명</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"선거구분\">선거구분</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"의원수\">의원수</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"선거코드\" class=\"gt_row gt_center\">20040415</td>\n<td headers=\"선거명\" class=\"gt_row gt_center\">제17대 국회의원선거</td>\n<td headers=\"선거구분\" class=\"gt_row gt_center\">0</td>\n<td headers=\"의원수\" class=\"gt_row gt_center\">299</td></tr>\n    <tr><td headers=\"선거코드\" class=\"gt_row gt_center\">20080409</td>\n<td headers=\"선거명\" class=\"gt_row gt_center\">제18대 국회의원선거</td>\n<td headers=\"선거구분\" class=\"gt_row gt_center\">0</td>\n<td headers=\"의원수\" class=\"gt_row gt_center\">299</td></tr>\n    <tr><td headers=\"선거코드\" class=\"gt_row gt_center\">20120411</td>\n<td headers=\"선거명\" class=\"gt_row gt_center\">제19대 국회의원선거</td>\n<td headers=\"선거구분\" class=\"gt_row gt_center\">0</td>\n<td headers=\"의원수\" class=\"gt_row gt_center\">300</td></tr>\n    <tr><td headers=\"선거코드\" class=\"gt_row gt_center\">20160413</td>\n<td headers=\"선거명\" class=\"gt_row gt_center\">제20대 국회의원선거</td>\n<td headers=\"선거구분\" class=\"gt_row gt_center\">0</td>\n<td headers=\"의원수\" class=\"gt_row gt_center\">300</td></tr>\n    <tr><td headers=\"선거코드\" class=\"gt_row gt_center\">20200415</td>\n<td headers=\"선거명\" class=\"gt_row gt_center\">제21대 국회의원선거</td>\n<td headers=\"선거구분\" class=\"gt_row gt_center\">0</td>\n<td headers=\"의원수\" class=\"gt_row gt_center\">300</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n## 제21대 총선\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntotal_elected_all <- \n  read_rds(\"data/total_elected_all.rds\")\n\nelected_tbl <- total_elected_all |> \n  select(result) |> \n  unnest(result)\n\nelected_tbl |> \n  count(name, birthday, sort=TRUE) |> \n  count(n) |> \n  mutate(비율 = nn/sum(nn))\n#> # A tibble: 5 × 3\n#>       n    nn    비율\n#>   <int> <int>   <dbl>\n#> 1     1   602 0.632  \n#> 2     2   196 0.206  \n#> 3     3   105 0.110  \n#> 4     4    42 0.0441 \n#> 5     5     8 0.00839\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nelected_tbl |> \n  filter(sgId %in% c(\"20040415\", \"20080409\", \"20120411\", \"20160413\", \"20200415\")) |> \n  count(sdName, sgId, sort = TRUE) |> \n  pivot_wider(names_from = sgId, values_from = n) \n#> # A tibble: 19 × 6\n#>    sdName         `20160413` `20200415` `20040415` `20080409` `20120411`\n#>    <chr>               <int>      <int>      <int>      <int>      <int>\n#>  1 경기도                 60         59         49         51         52\n#>  2 전국                   47         47         56         54         54\n#>  3 서울특별시             49         49         48         48         48\n#>  4 부산광역시             18         18         18         18         18\n#>  5 경상남도               16         16         17         17         16\n#>  6 경상북도               13         13         15         15         15\n#>  7 인천광역시             13         13         12         12         12\n#>  8 전라남도               10         10         13         12         11\n#>  9 대구광역시             12         12         12         12         12\n#> 10 전라북도               10         10         11         11         11\n#> 11 충청남도               11         11         10         10         10\n#> 12 강원도                  8          8          8          8          9\n#> 13 광주광역시              8          8          7          8          8\n#> 14 충청북도                8          8          8          8          8\n#> 15 대전광역시              7          7          6          6          6\n#> 16 울산광역시              6          6          6          6          6\n#> 17 제주도                 NA         NA          3         NA         NA\n#> 18 제주특별자치도          3          3         NA          3          3\n#> 19 세종특별자치시          1          2         NA         NA          1\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}